; generated by ARM C/C++ Compiler, 4.1 [Build 481]
; commandline ArmCC [--debug -c --asm --interleave -o.\rvmdk\gui_settextstyle.o --depend=.\rvmdk\gui_settextstyle.d --cpu=Cortex-M3 --apcs=interwork -O1 -Otime -I. -I..\BSP -I..\..\..\..\..\uCOS-II\Ports\arm-cortex-m3\Generic\RealView -I..\..\..\..\..\uCOS-II\Source -I..\..\..\..\..\CPU\ST\STM32\inc -I..\..\..\..\..\uC-CPU -I..\..\..\..\..\uC-CPU\Arm-Cortex-M3\RealView -I..\..\..\..\..\uC-LIB -I..\..\..\..\..\uC-Probe\Target\Plugins\uCOS-II -I..\..\..\..\..\uC-Probe\Target\Communication\Generic\Source -I..\..\..\..\..\uC-Probe\Target\Communication\Generic\RS-232\Ports\ST\STM32 -I..\..\..\..\..\uC-Probe\Target\Communication\Generic\RS-232\Source -I..\..\..\..\..\User\inc -I..\..\..\..\..\uCGUI\Config -I..\..\..\..\..\uCGUI\GUIDemo -I..\..\..\..\..\uCGUI\LCDDriver -I..\..\..\..\..\uCGUI\GUI\AntiAlias -I..\..\..\..\..\uCGUI\GUI\ConvertColor -I..\..\..\..\..\uCGUI\GUI\ConvertMono -I..\..\..\..\..\uCGUI\GUI\Core -I..\..\..\..\..\uCGUI\GUI\Font -I..\..\..\..\..\uCGUI\GUI\LCDDriver -I..\..\..\..\..\uCGUI\GUI\MemDev -I..\..\..\..\..\uCGUI\GUI\MultiLayer -I..\..\..\..\..\uCGUI\GUI\Widget -I..\..\..\..\..\uCGUI\GUI\WM -Id:\Keil-stm32\ARM\INC -Id:\Keil-stm32\ARM\INC\ST\STM32F10x -D__MICROLIB --omf_browse=.\rvmdk\gui_settextstyle.crf ..\..\..\..\..\uCGUI\GUI\Core\GUI_SetTextStyle.c]
                          THUMB

                          AREA ||.text||, CODE, READONLY, ALIGN=2

                  GUI__cbDrawTextStyle PROC
;;;33     */
;;;34     static void GUI__cbDrawTextStyle(U16 Char) {
000000  b570              PUSH     {r4-r6,lr}
;;;35       int x0, x1;
;;;36       x1 = GUI_Context.DispPosX - 1;
000002  4d27              LDR      r5,|L1.160|
000004  f9b51026          LDRSH    r1,[r5,#0x26]  ; GUI_Context
000008  1e4c              SUBS     r4,r1,#1
;;;37       x0 = x1 - GUI_Context.pAFont->pfGetCharDistX(Char) + 1;
00000a  69e9              LDR      r1,[r5,#0x1c]  ; GUI_Context
00000c  6849              LDR      r1,[r1,#4]
00000e  4788              BLX      r1
000010  1a20              SUBS     r0,r4,r0
000012  1c46              ADDS     r6,r0,#1
;;;38       /* Handle Underline */
;;;39       if (GUI_Context.TextStyle & GUI_TS_UNDERLINE) {
000014  7ca8              LDRB     r0,[r5,#0x12]  ; GUI_Context
000016  f0100f01          TST      r0,#1
00001a  d00c              BEQ      |L1.54|
;;;40         int yOff = GUI_Context.pAFont->Baseline;
00001c  69eb              LDR      r3,[r5,#0x1c]  ; GUI_Context
00001e  7f19              LDRB     r1,[r3,#0x1c]
;;;41         if (yOff >= GUI_Context.pAFont->YSize) {
000020  7d1b              LDRB     r3,[r3,#0x14]
000022  428b              CMP      r3,r1
000024  dc00              BGT      |L1.40|
;;;42           yOff = GUI_Context.pAFont->YSize - 1;
000026  1e59              SUBS     r1,r3,#1
                  |L1.40|
;;;43         }
;;;44         LCD_DrawHLine(x0, GUI_Context.DispPosY + yOff, x1);
000028  f9b50028          LDRSH    r0,[r5,#0x28]  ; GUI_Context
00002c  4622              MOV      r2,r4
00002e  4401              ADD      r1,r1,r0
000030  4630              MOV      r0,r6
000032  f7fffffe          BL       LCD_DrawHLine
                  |L1.54|
;;;45       }
;;;46       /* Handle strike thru */
;;;47       if (GUI_Context.TextStyle & GUI_TS_STRIKETHRU) {
000036  7ca8              LDRB     r0,[r5,#0x12]  ; GUI_Context
000038  f0100f02          TST      r0,#2
00003c  d00c              BEQ      |L1.88|
;;;48         int yOff = GUI_Context.pAFont->Baseline - ((GUI_Context.pAFont->CHeight + 1) / 2);
00003e  69e8              LDR      r0,[r5,#0x1c]  ; GUI_Context
000040  7f01              LDRB     r1,[r0,#0x1c]
000042  7f80              LDRB     r0,[r0,#0x1e]
000044  1c40              ADDS     r0,r0,#1
000046  eba10050          SUB      r0,r1,r0,LSR #1
;;;49         LCD_DrawHLine(x0, GUI_Context.DispPosY + yOff, x1);
00004a  f9b51028          LDRSH    r1,[r5,#0x28]  ; GUI_Context
00004e  4622              MOV      r2,r4
000050  4401              ADD      r1,r1,r0
000052  4630              MOV      r0,r6
000054  f7fffffe          BL       LCD_DrawHLine
                  |L1.88|
;;;50       }
;;;51       /* Handle over line */
;;;52       if (GUI_Context.TextStyle & GUI_TS_OVERLINE) {
000058  7ca8              LDRB     r0,[r5,#0x12]  ; GUI_Context
00005a  f0100f04          TST      r0,#4
00005e  d010              BEQ      |L1.130|
;;;53         int yOff = GUI_Context.pAFont->Baseline - GUI_Context.pAFont->CHeight - 1;
000060  69e9              LDR      r1,[r5,#0x1c]  ; GUI_Context
000062  7f08              LDRB     r0,[r1,#0x1c]
000064  7f89              LDRB     r1,[r1,#0x1e]
000066  1a40              SUBS     r0,r0,r1
000068  1e41              SUBS     r1,r0,#1
;;;54         if (yOff < 0) {
00006a  2900              CMP      r1,#0
00006c  da00              BGE      |L1.112|
;;;55           yOff = 0;
00006e  2100              MOVS     r1,#0
                  |L1.112|
;;;56         }
;;;57         LCD_DrawHLine(x0, GUI_Context.DispPosY + yOff, x1);
000070  f9b50028          LDRSH    r0,[r5,#0x28]  ; GUI_Context
000074  4622              MOV      r2,r4
000076  4401              ADD      r1,r1,r0
000078  4630              MOV      r0,r6
00007a  e8bd4070          POP      {r4-r6,lr}
00007e  f7ffbffe          B.W      LCD_DrawHLine
                  |L1.130|
;;;58       }
;;;59     }
000082  bd70              POP      {r4-r6,pc}
;;;60     
                          ENDP

                  GUI_SetTextStyle PROC
;;;70     */
;;;71     char GUI_SetTextStyle(char Style) {
000084  b570              PUSH     {r4-r6,lr}
000086  4604              MOV      r4,r0
;;;72       char OldStyle;
;;;73       GUI_LOCK();
000088  f7fffffe          BL       GUI_Lock
;;;74       OldStyle = GUI_Context.TextStyle;
00008c  4804              LDR      r0,|L1.160|
00008e  7c85              LDRB     r5,[r0,#0x12]  ; GUI_Context
;;;75       GUI_pfDispCharStyle = GUI__cbDrawTextStyle;    /* Init function pointer (function in this module) */
000090  4a05              LDR      r2,|L1.168|
000092  4904              LDR      r1,|L1.164|
000094  6011              STR      r1,[r2,#0]  ; GUI_pfDispCharStyle
;;;76       GUI_Context.TextStyle = Style;
000096  7484              STRB     r4,[r0,#0x12]
;;;77       GUI_UNLOCK();
000098  f7fffffe          BL       GUI_Unlock
;;;78       return OldStyle;
00009c  4628              MOV      r0,r5
;;;79     }
00009e  bd70              POP      {r4-r6,pc}
;;;80     
                          ENDP

                  |L1.160|
                          DCD      GUI_Context
                  |L1.164|
                          DCD      GUI__cbDrawTextStyle
                  |L1.168|
                          DCD      GUI_pfDispCharStyle
