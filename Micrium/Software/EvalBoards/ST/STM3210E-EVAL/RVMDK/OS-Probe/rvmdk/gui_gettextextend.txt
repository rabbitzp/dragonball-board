; generated by ARM C/C++ Compiler, 4.1 [Build 481]
; commandline ArmCC [--debug -c --asm --interleave -o.\rvmdk\gui_gettextextend.o --depend=.\rvmdk\gui_gettextextend.d --cpu=Cortex-M3 --apcs=interwork -O1 -Otime -I. -I..\BSP -I..\..\..\..\..\uCOS-II\Ports\arm-cortex-m3\Generic\RealView -I..\..\..\..\..\uCOS-II\Source -I..\..\..\..\..\CPU\ST\STM32\inc -I..\..\..\..\..\uC-CPU -I..\..\..\..\..\uC-CPU\Arm-Cortex-M3\RealView -I..\..\..\..\..\uC-LIB -I..\..\..\..\..\uC-Probe\Target\Plugins\uCOS-II -I..\..\..\..\..\uC-Probe\Target\Communication\Generic\Source -I..\..\..\..\..\uC-Probe\Target\Communication\Generic\RS-232\Ports\ST\STM32 -I..\..\..\..\..\uC-Probe\Target\Communication\Generic\RS-232\Source -I..\..\..\..\..\User\inc -I..\..\..\..\..\uCGUI\Config -I..\..\..\..\..\uCGUI\GUIDemo -I..\..\..\..\..\uCGUI\LCDDriver -I..\..\..\..\..\uCGUI\GUI\AntiAlias -I..\..\..\..\..\uCGUI\GUI\ConvertColor -I..\..\..\..\..\uCGUI\GUI\ConvertMono -I..\..\..\..\..\uCGUI\GUI\Core -I..\..\..\..\..\uCGUI\GUI\Font -I..\..\..\..\..\uCGUI\GUI\LCDDriver -I..\..\..\..\..\uCGUI\GUI\MemDev -I..\..\..\..\..\uCGUI\GUI\MultiLayer -I..\..\..\..\..\uCGUI\GUI\Widget -I..\..\..\..\..\uCGUI\GUI\WM -Id:\Keil-stm32\ARM\INC -Id:\Keil-stm32\ARM\INC\ST\STM32F10x -D__MICROLIB --omf_browse=.\rvmdk\gui_gettextextend.crf ..\..\..\..\..\uCGUI\GUI\Core\GUI_GetTextExtend.c]
                          THUMB

                          AREA ||.text||, CODE, READONLY, ALIGN=2

                  GUI_GetTextExtend PROC
;;;31     */
;;;32     void GUI_GetTextExtend(GUI_RECT* pRect, const char GUI_UNI_PTR * s, int MaxNumChars) {
000000  e92d43f7          PUSH     {r0-r2,r4-r9,lr}
000004  4607              MOV      r7,r0
;;;33       int xMax, NumLines, LineSizeX;
;;;34       U16 Char;
;;;35       xMax = NumLines = LineSizeX = 0;
000006  2400              MOVS     r4,#0
000008  4626              MOV      r6,r4
00000a  4625              MOV      r5,r4
;;;36       pRect->x0 = GUI_Context.DispPosX;
00000c  481a              LDR      r0,|L1.120|
00000e  8cc1              LDRH     r1,[r0,#0x26]  ; GUI_Context
000010  8039              STRH     r1,[r7,#0]
;;;37       pRect->y0 = GUI_Context.DispPosY;
000012  8d00              LDRH     r0,[r0,#0x28]  ; GUI_Context
000014  8078              STRH     r0,[r7,#2]
;;;38       if (!s) {
000016  9801              LDR      r0,[sp,#4]
000018  2800              CMP      r0,#0
00001a  d020              BEQ      |L1.94|
;;;39         return;
;;;40       }
;;;41       if (*s) {
00001c  7800              LDRB     r0,[r0,#0]
00001e  b178              CBZ      r0,|L1.64|
;;;42         NumLines++;
000020  2601              MOVS     r6,#1
;;;43         while (MaxNumChars--) {
000022  f1a20801          SUB      r8,r2,#1
000026  b15a              CBZ      r2,|L1.64|
                  |L1.40|
;;;44           Char = GUI_UC__GetCharCodeInc(&s);
000028  a801              ADD      r0,sp,#4
00002a  f7fffffe          BL       GUI_UC__GetCharCodeInc
;;;45           if ((Char == '\n') || (Char == 0)) {
00002e  280a              CMP      r0,#0xa
000030  d018              BEQ      |L1.100|
000032  b1b8              CBZ      r0,|L1.100|
;;;46             if (LineSizeX > xMax) {
;;;47               xMax = LineSizeX;
;;;48             }
;;;49             LineSizeX = 0;
;;;50             if (Char == '\n') {
;;;51               NumLines++;
;;;52             }
;;;53             if (!Char) {
;;;54               break;
;;;55             }
;;;56           } else {
;;;57             LineSizeX += GUI_GetCharDistX(Char);
000034  f7fffffe          BL       GUI_GetCharDistX
000038  4404              ADD      r4,r4,r0
                  |L1.58|
00003a  f1b80801          SUBS     r8,r8,#1              ;43
00003e  d2f3              BCS      |L1.40|
                  |L1.64|
;;;58           }
;;;59         }
;;;60       }
;;;61       if (LineSizeX > xMax) {
000040  42ac              CMP      r4,r5
000042  dd00              BLE      |L1.70|
;;;62         xMax = LineSizeX;
000044  4625              MOV      r5,r4
                  |L1.70|
;;;63       }
;;;64       pRect->x1 = pRect->x0 + xMax - 1;
000046  8838              LDRH     r0,[r7,#0]
000048  1e69              SUBS     r1,r5,#1
00004a  4408              ADD      r0,r0,r1
00004c  80b8              STRH     r0,[r7,#4]
;;;65       pRect->y1 = pRect->y0 + GUI__GetFontSizeY() * NumLines - 1;
00004e  f7fffffe          BL       GUI__GetFontSizeY
000052  f9b71002          LDRSH    r1,[r7,#2]
000056  fb001006          MLA      r0,r0,r6,r1
00005a  1e40              SUBS     r0,r0,#1
00005c  80f8              STRH     r0,[r7,#6]
                  |L1.94|
;;;66     }
00005e  b003              ADD      sp,sp,#0xc
000060  e8bd83f0          POP      {r4-r9,pc}
                  |L1.100|
000064  42ac              CMP      r4,r5                 ;46
000066  dd00              BLE      |L1.106|
000068  4625              MOV      r5,r4                 ;47
                  |L1.106|
00006a  2400              MOVS     r4,#0                 ;49
00006c  280a              CMP      r0,#0xa               ;50
00006e  d100              BNE      |L1.114|
000070  1c76              ADDS     r6,r6,#1              ;51
                  |L1.114|
000072  2800              CMP      r0,#0                 ;53
000074  d0e4              BEQ      |L1.64|
000076  e7e0              B        |L1.58|
;;;67     
                          ENDP

                  |L1.120|
                          DCD      GUI_Context
