; generated by ARM C/C++ Compiler, 4.1 [Build 481]
; commandline ArmCC [--debug -c --asm --interleave -o.\rvmdk\listbox_multisel.o --depend=.\rvmdk\listbox_multisel.d --cpu=Cortex-M3 --apcs=interwork -O1 -Otime -I. -I..\BSP -I..\..\..\..\..\uCOS-II\Ports\arm-cortex-m3\Generic\RealView -I..\..\..\..\..\uCOS-II\Source -I..\..\..\..\..\CPU\ST\STM32\inc -I..\..\..\..\..\uC-CPU -I..\..\..\..\..\uC-CPU\Arm-Cortex-M3\RealView -I..\..\..\..\..\uC-LIB -I..\..\..\..\..\uC-Probe\Target\Plugins\uCOS-II -I..\..\..\..\..\uC-Probe\Target\Communication\Generic\Source -I..\..\..\..\..\uC-Probe\Target\Communication\Generic\RS-232\Ports\ST\STM32 -I..\..\..\..\..\uC-Probe\Target\Communication\Generic\RS-232\Source -I..\..\..\..\..\User\inc -I..\..\..\..\..\uCGUI\Config -I..\..\..\..\..\uCGUI\GUIDemo -I..\..\..\..\..\uCGUI\LCDDriver -I..\..\..\..\..\uCGUI\GUI\AntiAlias -I..\..\..\..\..\uCGUI\GUI\ConvertColor -I..\..\..\..\..\uCGUI\GUI\ConvertMono -I..\..\..\..\..\uCGUI\GUI\Core -I..\..\..\..\..\uCGUI\GUI\Font -I..\..\..\..\..\uCGUI\GUI\LCDDriver -I..\..\..\..\..\uCGUI\GUI\MemDev -I..\..\..\..\..\uCGUI\GUI\MultiLayer -I..\..\..\..\..\uCGUI\GUI\Widget -I..\..\..\..\..\uCGUI\GUI\WM -Id:\Keil-stm32\ARM\INC -Id:\Keil-stm32\ARM\INC\ST\STM32F10x -D__MICROLIB --omf_browse=.\rvmdk\listbox_multisel.crf ..\..\..\..\..\uCGUI\GUI\Widget\LISTBOX_MultiSel.c]
                          THUMB

                          AREA ||.text||, CODE, READONLY, ALIGN=1

                  LISTBOX_SetMulti PROC
;;;38     */
;;;39     void LISTBOX_SetMulti(LISTBOX_Handle hObj, int Mode) {
000000  b570              PUSH     {r4-r6,lr}
000002  4605              MOV      r5,r0
000004  460c              MOV      r4,r1
;;;40       if (hObj) {
000006  2d00              CMP      r5,#0
000008  d022              BEQ      |L1.80|
;;;41         LISTBOX_Obj* pObj;
;;;42         WM_LOCK();
00000a  f7fffffe          BL       GUI_Lock
;;;43         pObj = LISTBOX_H2P(hObj);
00000e  4628              MOV      r0,r5
000010  f7fffffe          BL       GUI_ALLOC_h2p
;;;44         if (Mode) {
000014  b164              CBZ      r4,|L1.48|
;;;45           if (!(pObj->Flags & LISTBOX_SF_MULTISEL)) {
000016  f8901084          LDRB     r1,[r0,#0x84]
00001a  f0110f04          TST      r1,#4
00001e  d113              BNE      |L1.72|
;;;46             pObj->Flags |= LISTBOX_SF_MULTISEL;
000020  f0410104          ORR      r1,r1,#4
000024  f8801084          STRB     r1,[r0,#0x84]
;;;47             LISTBOX__InvalidateInsideArea(hObj);
000028  4628              MOV      r0,r5
00002a  f7fffffe          BL       LISTBOX__InvalidateInsideArea
00002e  e00b              B        |L1.72|
                  |L1.48|
;;;48           }
;;;49         } else {
;;;50           if (pObj->Flags & LISTBOX_SF_MULTISEL) {
000030  f8901084          LDRB     r1,[r0,#0x84]
000034  f0110f04          TST      r1,#4
000038  d006              BEQ      |L1.72|
;;;51             pObj->Flags &= ~LISTBOX_SF_MULTISEL;
00003a  f0210104          BIC      r1,r1,#4
00003e  f8801084          STRB     r1,[r0,#0x84]
;;;52             LISTBOX__InvalidateInsideArea(hObj);
000042  4628              MOV      r0,r5
000044  f7fffffe          BL       LISTBOX__InvalidateInsideArea
                  |L1.72|
;;;53           }
;;;54         }
;;;55         WM_UNLOCK();
000048  e8bd4070          POP      {r4-r6,lr}
00004c  f7ffbffe          B.W      GUI_Unlock
                  |L1.80|
;;;56       }
;;;57     }
000050  bd70              POP      {r4-r6,pc}
;;;58     
                          ENDP

                  LISTBOX_GetMulti PROC
;;;62     */
;;;63     int LISTBOX_GetMulti(LISTBOX_Handle hObj) {
000052  b570              PUSH     {r4-r6,lr}
000054  4605              MOV      r5,r0
;;;64       int Multi = 0;
000056  2400              MOVS     r4,#0
;;;65       if (hObj) {
000058  b165              CBZ      r5,|L1.116|
;;;66         LISTBOX_Obj* pObj;
;;;67         WM_LOCK();
00005a  f7fffffe          BL       GUI_Lock
;;;68         pObj = LISTBOX_H2P(hObj);
00005e  4628              MOV      r0,r5
000060  f7fffffe          BL       GUI_ALLOC_h2p
;;;69         if (!(pObj->Flags & LISTBOX_SF_MULTISEL)) {
000064  f8900084          LDRB     r0,[r0,#0x84]
000068  f0100f04          TST      r0,#4
00006c  d000              BEQ      |L1.112|
;;;70           Multi = 0;
;;;71         } else {
;;;72           Multi = 1;
00006e  2401              MOVS     r4,#1
                  |L1.112|
;;;73         }
;;;74         WM_UNLOCK();
000070  f7fffffe          BL       GUI_Unlock
                  |L1.116|
;;;75       }
;;;76       return Multi;
000074  4620              MOV      r0,r4
;;;77     }
000076  bd70              POP      {r4-r6,pc}
;;;78     
                          ENDP

                  LISTBOX_GetItemSel PROC
;;;82     */
;;;83     int LISTBOX_GetItemSel(LISTBOX_Handle hObj, unsigned Index) {
000078  b570              PUSH     {r4-r6,lr}
00007a  4604              MOV      r4,r0
00007c  460e              MOV      r6,r1
;;;84       int Ret = 0;
00007e  2500              MOVS     r5,#0
;;;85       if (hObj) {
000080  b1f4              CBZ      r4,|L1.192|
;;;86         unsigned NumItems;
;;;87         LISTBOX_Obj* pObj;
;;;88         WM_LOCK();
000082  f7fffffe          BL       GUI_Lock
;;;89         pObj = LISTBOX_H2P(hObj);
000086  4620              MOV      r0,r4
000088  f7fffffe          BL       GUI_ALLOC_h2p
00008c  4604              MOV      r4,r0
;;;90         NumItems = LISTBOX__GetNumItems(pObj);
00008e  4620              MOV      r0,r4
000090  f7fffffe          BL       LISTBOX__GetNumItems
;;;91         if ((Index < NumItems) && (pObj->Flags & LISTBOX_SF_MULTISEL)) {
000094  4286              CMP      r6,r0
000096  d211              BCS      |L1.188|
000098  f8940084          LDRB     r0,[r4,#0x84]
00009c  f0100f04          TST      r0,#4
0000a0  d00c              BEQ      |L1.188|
;;;92           WM_HMEM hItem = GUI_ARRAY_GethItem(&pObj->ItemArray, Index);
0000a2  4631              MOV      r1,r6
0000a4  f1040028          ADD      r0,r4,#0x28
0000a8  f7fffffe          BL       GUI_ARRAY_GethItem
;;;93           if (hItem) {
0000ac  b130              CBZ      r0,|L1.188|
;;;94             LISTBOX_ITEM * pItem = (LISTBOX_ITEM *)GUI_ALLOC_h2p(hItem);
0000ae  f7fffffe          BL       GUI_ALLOC_h2p
;;;95             if (pItem->Status & LISTBOX_ITEM_SELECTED) {
0000b2  7900              LDRB     r0,[r0,#4]
0000b4  f0100f01          TST      r0,#1
0000b8  d000              BEQ      |L1.188|
;;;96               Ret = 1;
0000ba  2501              MOVS     r5,#1
                  |L1.188|
;;;97             }
;;;98           }
;;;99         }
;;;100        WM_UNLOCK();
0000bc  f7fffffe          BL       GUI_Unlock
                  |L1.192|
;;;101      }
;;;102      return Ret;
0000c0  4628              MOV      r0,r5
;;;103    }
0000c2  bd70              POP      {r4-r6,pc}
;;;104    
                          ENDP

                  LISTBOX_SetItemSel PROC
;;;108    */
;;;109    void LISTBOX_SetItemSel(LISTBOX_Handle hObj, unsigned Index, int OnOff) {
0000c4  e92d41f0          PUSH     {r4-r8,lr}
0000c8  4606              MOV      r6,r0
0000ca  460d              MOV      r5,r1
0000cc  4617              MOV      r7,r2
;;;110      if (hObj) {
0000ce  2e00              CMP      r6,#0
0000d0  d035              BEQ      |L1.318|
;;;111        unsigned NumItems;
;;;112        LISTBOX_Obj* pObj;
;;;113        WM_LOCK();
0000d2  f7fffffe          BL       GUI_Lock
;;;114        pObj = LISTBOX_H2P(hObj);
0000d6  4630              MOV      r0,r6
0000d8  f7fffffe          BL       GUI_ALLOC_h2p
0000dc  4604              MOV      r4,r0
;;;115        NumItems = LISTBOX__GetNumItems(pObj);
0000de  4620              MOV      r0,r4
0000e0  f7fffffe          BL       LISTBOX__GetNumItems
;;;116        if ((Index < NumItems) && (pObj->Flags & LISTBOX_SF_MULTISEL)) {
0000e4  4285              CMP      r5,r0
0000e6  d226              BCS      |L1.310|
0000e8  f8940084          LDRB     r0,[r4,#0x84]
0000ec  f0100f04          TST      r0,#4
0000f0  d021              BEQ      |L1.310|
;;;117          WM_HMEM hItem = GUI_ARRAY_GethItem(&pObj->ItemArray, Index);
0000f2  4629              MOV      r1,r5
0000f4  f1040028          ADD      r0,r4,#0x28
0000f8  f7fffffe          BL       GUI_ARRAY_GethItem
;;;118          if (hItem) {
0000fc  b1d8              CBZ      r0,|L1.310|
;;;119            LISTBOX_ITEM * pItem = (LISTBOX_ITEM *)GUI_ALLOC_h2p(hItem);
0000fe  f7fffffe          BL       GUI_ALLOC_h2p
;;;120            if (OnOff) {
000102  b167              CBZ      r7,|L1.286|
;;;121              if (!(pItem->Status & LISTBOX_ITEM_SELECTED)) {
000104  7901              LDRB     r1,[r0,#4]
000106  f0110f01          TST      r1,#1
00010a  d114              BNE      |L1.310|
;;;122                pItem->Status |= LISTBOX_ITEM_SELECTED;
00010c  f0410101          ORR      r1,r1,#1
000110  7101              STRB     r1,[r0,#4]
;;;123                LISTBOX__InvalidateItem(hObj, pObj, Index);
000112  462a              MOV      r2,r5
000114  4621              MOV      r1,r4
000116  4630              MOV      r0,r6
000118  f7fffffe          BL       LISTBOX__InvalidateItem
00011c  e00b              B        |L1.310|
                  |L1.286|
;;;124              }
;;;125            } else {
;;;126              if (pItem->Status & LISTBOX_ITEM_SELECTED) {
00011e  7901              LDRB     r1,[r0,#4]
000120  f0110f01          TST      r1,#1
000124  d007              BEQ      |L1.310|
;;;127                pItem->Status &= ~LISTBOX_ITEM_SELECTED;
000126  f0210101          BIC      r1,r1,#1
00012a  7101              STRB     r1,[r0,#4]
;;;128                LISTBOX__InvalidateItem(hObj, pObj, Index);
00012c  462a              MOV      r2,r5
00012e  4621              MOV      r1,r4
000130  4630              MOV      r0,r6
000132  f7fffffe          BL       LISTBOX__InvalidateItem
                  |L1.310|
;;;129              }
;;;130            }
;;;131          }
;;;132        }
;;;133        WM_UNLOCK();
000136  e8bd41f0          POP      {r4-r8,lr}
00013a  f7ffbffe          B.W      GUI_Unlock
                  |L1.318|
;;;134      }
;;;135    }
00013e  e8bd81f0          POP      {r4-r8,pc}
;;;136    
                          ENDP

