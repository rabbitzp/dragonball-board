; generated by ARM C/C++ Compiler, 4.1 [Build 481]
; commandline ArmCC [--debug -c --asm --interleave -o.\rvmdk\gui_sif_prop.o --depend=.\rvmdk\gui_sif_prop.d --cpu=Cortex-M3 --apcs=interwork -O1 -Otime -I. -I..\BSP -I..\..\..\..\..\uCOS-II\Ports\arm-cortex-m3\Generic\RealView -I..\..\..\..\..\uCOS-II\Source -I..\..\..\..\..\CPU\ST\STM32\inc -I..\..\..\..\..\uC-CPU -I..\..\..\..\..\uC-CPU\Arm-Cortex-M3\RealView -I..\..\..\..\..\uC-LIB -I..\..\..\..\..\uC-Probe\Target\Plugins\uCOS-II -I..\..\..\..\..\uC-Probe\Target\Communication\Generic\Source -I..\..\..\..\..\uC-Probe\Target\Communication\Generic\RS-232\Ports\ST\STM32 -I..\..\..\..\..\uC-Probe\Target\Communication\Generic\RS-232\Source -I..\..\..\..\..\User\inc -I..\..\..\..\..\uCGUI\Config -I..\..\..\..\..\uCGUI\GUIDemo -I..\..\..\..\..\uCGUI\LCDDriver -I..\..\..\..\..\uCGUI\GUI\AntiAlias -I..\..\..\..\..\uCGUI\GUI\ConvertColor -I..\..\..\..\..\uCGUI\GUI\ConvertMono -I..\..\..\..\..\uCGUI\GUI\Core -I..\..\..\..\..\uCGUI\GUI\Font -I..\..\..\..\..\uCGUI\GUI\LCDDriver -I..\..\..\..\..\uCGUI\GUI\MemDev -I..\..\..\..\..\uCGUI\GUI\MultiLayer -I..\..\..\..\..\uCGUI\GUI\Widget -I..\..\..\..\..\uCGUI\GUI\WM -Id:\Keil-stm32\ARM\INC -Id:\Keil-stm32\ARM\INC\ST\STM32F10x -D__MICROLIB --omf_browse=.\rvmdk\gui_sif_prop.crf ..\..\..\..\..\uCGUI\GUI\Core\GUI_SIF_Prop.c]
                          THUMB

                          AREA ||.text||, CODE, READONLY, ALIGN=2

                  _GetNumCharAreas PROC
;;;32     */
;;;33     static int _GetNumCharAreas(const GUI_FONT GUI_UNI_PTR * pFont) {
000000  b508              PUSH     {r3,lr}
;;;34       U16 NumCharAreas;
;;;35       const U8 * pData;
;;;36       pData = (const U8 *)pFont->p.pFontData + 14 /* Skip ID, YSize, YDist, Baseline, LHeight and CHeight */;
000002  6980              LDR      r0,[r0,#0x18]
000004  300e              ADDS     r0,r0,#0xe
000006  9000              STR      r0,[sp,#0]
;;;37       NumCharAreas = GUI__Read16(&pData);
000008  4668              MOV      r0,sp
00000a  f7fffffe          BL       GUI__Read16
;;;38       return NumCharAreas;
;;;39     }
00000e  bd08              POP      {r3,pc}
;;;40     
                          ENDP

                  _GetpCharInfo PROC
;;;44     */
;;;45     static const U8 * _GetpCharInfo(const GUI_FONT GUI_UNI_PTR * pFont, U16P c) {
000010  b5f0              PUSH     {r4-r7,lr}
000012  b083              SUB      sp,sp,#0xc
000014  4604              MOV      r4,r0
000016  460e              MOV      r6,r1
;;;46       const U8 * pCharArea, * pCharInfo;
;;;47       int NumCharAreas;
;;;48       NumCharAreas = _GetNumCharAreas(pFont);                 /* Get # of char areas */
000018  4620              MOV      r0,r4
00001a  f7fffffe          BL       _GetNumCharAreas
00001e  4605              MOV      r5,r0
;;;49       pCharArea = (const U8 *)pFont->p.pFontData 
000020  69a0              LDR      r0,[r4,#0x18]
000022  f1000110          ADD      r1,r0,#0x10
000026  9102              STR      r1,[sp,#8]
;;;50                   + sizeof(GUI_SI_FONT);                      /* Set char area pointer to first char area */
;;;51       pCharInfo = pCharArea
000028  eb010485          ADD      r4,r1,r5,LSL #2
                  |L1.44|
;;;52                   + sizeof(GUI_SIF_CHAR_AREA) * NumCharAreas; /* Set char info pointer to first character info */
;;;53       do {
;;;54         GUI_SIF_CHAR_AREA CharArea;
;;;55         CharArea.First    = GUI__Read16(&pCharArea);
00002c  a802              ADD      r0,sp,#8
00002e  f7fffffe          BL       GUI__Read16
000032  f8ad0004          STRH     r0,[sp,#4]
000036  4607              MOV      r7,r0
;;;56         CharArea.Last     = GUI__Read16(&pCharArea);
000038  a802              ADD      r0,sp,#8
00003a  f7fffffe          BL       GUI__Read16
00003e  f8ad0006          STRH     r0,[sp,#6]
000042  4602              MOV      r2,r0
;;;57         if ((c >= CharArea.First) && (c <= CharArea.Last)) {
000044  42b7              CMP      r7,r6
000046  d80a              BHI      |L1.94|
000048  42b2              CMP      r2,r6
00004a  d308              BCC      |L1.94|
;;;58           pCharInfo += sizeof(GUI_SIF_CHARINFO) * (c - CharArea.First);
00004c  f8bd0004          LDRH     r0,[sp,#4]
000050  1a30              SUBS     r0,r6,r0
000052  eb000040          ADD      r0,r0,r0,LSL #1
000056  eb040080          ADD      r0,r4,r0,LSL #2
;;;59           return pCharInfo;
;;;60         }
;;;61         pCharInfo += sizeof(GUI_SIF_CHARINFO) * (CharArea.Last - CharArea.First + 1);
;;;62       } while(--NumCharAreas);
;;;63       return 0;
;;;64     }
00005a  b003              ADD      sp,sp,#0xc
00005c  bdf0              POP      {r4-r7,pc}
                  |L1.94|
00005e  1bd0              SUBS     r0,r2,r7              ;61
000060  1c40              ADDS     r0,r0,#1              ;61
000062  eb000040          ADD      r0,r0,r0,LSL #1       ;61
000066  eb040480          ADD      r4,r4,r0,LSL #2       ;61
00006a  1e6d              SUBS     r5,r5,#1              ;62
00006c  d1de              BNE      |L1.44|
00006e  b003              ADD      sp,sp,#0xc
000070  2000              MOVS     r0,#0                 ;63
000072  bdf0              POP      {r4-r7,pc}
;;;65     
                          ENDP

                  _GUI_SIF_DispChar PROC
;;;76     */
;;;77     static void _GUI_SIF_DispChar(U16P c) {
000074  e92d47f0          PUSH     {r4-r10,lr}
000078  b08a              SUB      sp,sp,#0x28
00007a  4601              MOV      r1,r0
;;;78       const U8 * pCharInfo, * pData;
;;;79       pCharInfo = _GetpCharInfo(GUI_Context.pAFont, c);
00007c  4c4a              LDR      r4,|L1.424|
00007e  69e0              LDR      r0,[r4,#0x1c]  ; GUI_Context
000080  f7fffffe          BL       _GetpCharInfo
000084  9009              STR      r0,[sp,#0x24]
;;;80       if (pCharInfo) {
000086  2800              CMP      r0,#0
000088  d05c              BEQ      |L1.324|
;;;81         GUI_DRAWMODE DrawMode, OldDrawMode;
;;;82         GUI_SIF_CHARINFO CharInfo;
;;;83         CharInfo.XSize        = GUI__Read16(&pCharInfo);
00008a  a809              ADD      r0,sp,#0x24
00008c  f7fffffe          BL       GUI__Read16
000090  f8ad0018          STRH     r0,[sp,#0x18]
000094  4605              MOV      r5,r0
;;;84         CharInfo.XDist        = GUI__Read16(&pCharInfo);
000096  a809              ADD      r0,sp,#0x24
000098  f7fffffe          BL       GUI__Read16
00009c  f8ad001a          STRH     r0,[sp,#0x1a]
0000a0  4680              MOV      r8,r0
;;;85         CharInfo.BytesPerLine = GUI__Read16(&pCharInfo);
0000a2  a809              ADD      r0,sp,#0x24
0000a4  f7fffffe          BL       GUI__Read16
0000a8  f8ad001c          STRH     r0,[sp,#0x1c]
0000ac  4606              MOV      r6,r0
;;;86                                 GUI__Read16(&pCharInfo); /* Dummy */
0000ae  a809              ADD      r0,sp,#0x24
0000b0  f7fffffe          BL       GUI__Read16
;;;87         CharInfo.OffData      = GUI__Read32(&pCharInfo);
0000b4  a809              ADD      r0,sp,#0x24
0000b6  f7fffffe          BL       GUI__Read32
0000ba  9008              STR      r0,[sp,#0x20]
;;;88         pData = (const U8 *)GUI_Context.pAFont->p.pFontData + CharInfo.OffData;
0000bc  69e0              LDR      r0,[r4,#0x1c]  ; GUI_Context
0000be  9908              LDR      r1,[sp,#0x20]
0000c0  6980              LDR      r0,[r0,#0x18]
0000c2  eb000a01          ADD      r10,r0,r1
;;;89         DrawMode = GUI_Context.TextMode;
0000c6  f9b4702e          LDRSH    r7,[r4,#0x2e]  ; GUI_Context
;;;90         OldDrawMode  = LCD_SetDrawMode(DrawMode);
0000ca  4638              MOV      r0,r7
0000cc  f7fffffe          BL       LCD_SetDrawMode
0000d0  4681              MOV      r9,r0
;;;91         LCD_DrawBitmap(GUI_Context.DispPosX, GUI_Context.DispPosY,
0000d2  4623              MOV      r3,r4
0000d4  2001              MOVS     r0,#1
0000d6  f8cda010          STR      r10,[sp,#0x10]
0000da  9603              STR      r6,[sp,#0xc]
0000dc  9305              STR      r3,[sp,#0x14]
0000de  9002              STR      r0,[sp,#8]
0000e0  69e0              LDR      r0,[r4,#0x1c]  ; GUI_Context
0000e2  7dc3              LDRB     r3,[r0,#0x17]
0000e4  7d82              LDRB     r2,[r0,#0x16]
0000e6  9200              STR      r2,[sp,#0]
0000e8  9301              STR      r3,[sp,#4]
0000ea  7d03              LDRB     r3,[r0,#0x14]
0000ec  f9b41028          LDRSH    r1,[r4,#0x28]  ; GUI_Context
0000f0  f9b40026          LDRSH    r0,[r4,#0x26]  ; GUI_Context
0000f4  462a              MOV      r2,r5
0000f6  f7fffffe          BL       LCD_DrawBitmap
;;;92                        CharInfo.XSize,
;;;93     									 GUI_Context.pAFont->YSize,
;;;94                        GUI_Context.pAFont->XMag,
;;;95     									 GUI_Context.pAFont->YMag,
;;;96                        1,
;;;97                        CharInfo.BytesPerLine,
;;;98                        pData,
;;;99                        &LCD_BKCOLORINDEX);
;;;100        /* Fill empty pixel lines */
;;;101        if (GUI_Context.pAFont->YDist > GUI_Context.pAFont->YSize) {
0000fa  69e0              LDR      r0,[r4,#0x1c]  ; GUI_Context
0000fc  7d42              LDRB     r2,[r0,#0x15]
0000fe  7d01              LDRB     r1,[r0,#0x14]
000100  428a              CMP      r2,r1
000102  d919              BLS      |L1.312|
;;;102          int YMag = GUI_Context.pAFont->YMag;
000104  7dc0              LDRB     r0,[r0,#0x17]
;;;103          int YDist = GUI_Context.pAFont->YDist * YMag;
000106  fb02f600          MUL      r6,r2,r0
;;;104          int YSize = GUI_Context.pAFont->YSize * YMag;
00010a  fb01fa00          MUL      r10,r1,r0
;;;105          if (DrawMode != LCD_DRAWMODE_TRANS) {
00010e  2f02              CMP      r7,#2
000110  d012              BEQ      |L1.312|
;;;106            LCD_COLOR OldColor = GUI_GetColor();
000112  f7fffffe          BL       GUI_GetColor
000116  4607              MOV      r7,r0
;;;107            GUI_SetColor(GUI_GetBkColor());
000118  f7fffffe          BL       GUI_GetBkColor
00011c  f7fffffe          BL       GUI_SetColor
;;;108            LCD_FillRect(GUI_Context.DispPosX, 
000120  f9b41028          LDRSH    r1,[r4,#0x28]  ; GUI_Context
000124  f9b40026          LDRSH    r0,[r4,#0x26]  ; GUI_Context
000128  198b              ADDS     r3,r1,r6
00012a  1942              ADDS     r2,r0,r5
00012c  4451              ADD      r1,r1,r10
00012e  f7fffffe          BL       LCD_FillRect
;;;109                         GUI_Context.DispPosY + YSize, 
;;;110                         GUI_Context.DispPosX + CharInfo.XSize, 
;;;111                         GUI_Context.DispPosY + YDist);
;;;112            GUI_SetColor(OldColor);
000132  4638              MOV      r0,r7
000134  f7fffffe          BL       GUI_SetColor
                  |L1.312|
;;;113          }
;;;114        }
;;;115        LCD_SetDrawMode(OldDrawMode); /* Restore draw mode */
000138  4648              MOV      r0,r9
00013a  f7fffffe          BL       LCD_SetDrawMode
;;;116        GUI_Context.DispPosX += CharInfo.XDist;
00013e  8ce0              LDRH     r0,[r4,#0x26]  ; GUI_Context
000140  4440              ADD      r0,r0,r8
000142  84e0              STRH     r0,[r4,#0x26]
                  |L1.324|
;;;117      }
;;;118    }
000144  b00a              ADD      sp,sp,#0x28
000146  e8bd87f0          POP      {r4-r10,pc}
;;;119    
                          ENDP

                  _GUI_SIF_GetCharDistX PROC
;;;123    */
;;;124    static int _GUI_SIF_GetCharDistX(U16P c) {
00014a  b538              PUSH     {r3-r5,lr}
00014c  4601              MOV      r1,r0
;;;125      const U8 * pCharInfo;
;;;126      U16 DistX = 0;
00014e  2400              MOVS     r4,#0
;;;127      pCharInfo = _GetpCharInfo(GUI_Context.pAFont, c); /* Get pointer to char info data */
000150  4815              LDR      r0,|L1.424|
000152  69c0              LDR      r0,[r0,#0x1c]  ; GUI_Context
000154  f7fffffe          BL       _GetpCharInfo
000158  9000              STR      r0,[sp,#0]
;;;128      if (pCharInfo) {
00015a  b128              CBZ      r0,|L1.360|
;;;129        pCharInfo += 2 /* Skip XSize */;
00015c  1c80              ADDS     r0,r0,#2
00015e  9000              STR      r0,[sp,#0]
;;;130        DistX = GUI__Read16(&pCharInfo);
000160  4668              MOV      r0,sp
000162  f7fffffe          BL       GUI__Read16
000166  4604              MOV      r4,r0
                  |L1.360|
;;;131      }
;;;132      return DistX;
000168  4620              MOV      r0,r4
;;;133    }
00016a  bd38              POP      {r3-r5,pc}
;;;134    
                          ENDP

                  _GUI_SIF_GetFontInfo PROC
;;;138    */
;;;139    static void _GUI_SIF_GetFontInfo(const GUI_FONT GUI_UNI_PTR * pFont, GUI_FONTINFO * pfi) {
00016c  b538              PUSH     {r3-r5,lr}
00016e  460c              MOV      r4,r1
;;;140      const U8 * pData;
;;;141      pData = (const U8 *)pFont->p.pFontData + 4 /* Skip XSize and XDist */;
000170  6980              LDR      r0,[r0,#0x18]
000172  1d00              ADDS     r0,r0,#4
000174  9000              STR      r0,[sp,#0]
;;;142      pfi->Baseline = GUI__Read16(&pData);
000176  4668              MOV      r0,sp
000178  f7fffffe          BL       GUI__Read16
00017c  70a0              STRB     r0,[r4,#2]
;;;143      pfi->LHeight  = GUI__Read16(&pData);
00017e  4668              MOV      r0,sp
000180  f7fffffe          BL       GUI__Read16
000184  70e0              STRB     r0,[r4,#3]
;;;144      pfi->CHeight  = GUI__Read16(&pData);
000186  4668              MOV      r0,sp
000188  f7fffffe          BL       GUI__Read16
00018c  7120              STRB     r0,[r4,#4]
;;;145      pfi->Flags    = GUI_FONTINFO_FLAG_PROP;
00018e  2001              MOVS     r0,#1
000190  8020              STRH     r0,[r4,#0]
;;;146    }
000192  bd38              POP      {r3-r5,pc}
;;;147    
                          ENDP

                  _GUI_SIF_IsInFont PROC
;;;151    */
;;;152    static char _GUI_SIF_IsInFont(const GUI_FONT GUI_UNI_PTR * pFont, U16 c) {
000194  b510              PUSH     {r4,lr}
;;;153      const U8 * pCharInfo;
;;;154      GUI_USE_PARA(pFont);
;;;155      pCharInfo = _GetpCharInfo(GUI_Context.pAFont, c);
000196  4804              LDR      r0,|L1.424|
000198  69c0              LDR      r0,[r0,#0x1c]  ; GUI_Context
00019a  f7fffffe          BL       _GetpCharInfo
;;;156      return (pCharInfo) ? 1 : 0;
00019e  b108              CBZ      r0,|L1.420|
0001a0  2001              MOVS     r0,#1
;;;157    }
0001a2  bd10              POP      {r4,pc}
                  |L1.420|
0001a4  2000              MOVS     r0,#0                 ;156
0001a6  bd10              POP      {r4,pc}
;;;158    
                          ENDP

                  |L1.424|
                          DCD      GUI_Context

                          AREA ||.constdata||, DATA, READONLY, ALIGN=2

                  GUI_SIF_APIList_Prop
                          DCD      _GUI_SIF_DispChar
                          DCD      _GUI_SIF_GetCharDistX
                          DCD      _GUI_SIF_GetFontInfo
                          DCD      _GUI_SIF_IsInFont
