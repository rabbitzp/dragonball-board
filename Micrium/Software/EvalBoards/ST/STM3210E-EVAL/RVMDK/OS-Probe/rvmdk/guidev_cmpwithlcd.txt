; generated by ARM C/C++ Compiler, 4.1 [Build 481]
; commandline ArmCC [--debug -c --asm --interleave -o.\rvmdk\guidev_cmpwithlcd.o --depend=.\rvmdk\guidev_cmpwithlcd.d --cpu=Cortex-M3 --apcs=interwork -O1 -Otime -I. -I..\BSP -I..\..\..\..\..\uCOS-II\Ports\arm-cortex-m3\Generic\RealView -I..\..\..\..\..\uCOS-II\Source -I..\..\..\..\..\CPU\ST\STM32\inc -I..\..\..\..\..\uC-CPU -I..\..\..\..\..\uC-CPU\Arm-Cortex-M3\RealView -I..\..\..\..\..\uC-LIB -I..\..\..\..\..\uC-Probe\Target\Plugins\uCOS-II -I..\..\..\..\..\uC-Probe\Target\Communication\Generic\Source -I..\..\..\..\..\uC-Probe\Target\Communication\Generic\RS-232\Ports\ST\STM32 -I..\..\..\..\..\uC-Probe\Target\Communication\Generic\RS-232\Source -I..\..\..\..\..\User\inc -I..\..\..\..\..\uCGUI\Config -I..\..\..\..\..\uCGUI\GUIDemo -I..\..\..\..\..\uCGUI\LCDDriver -I..\..\..\..\..\uCGUI\GUI\AntiAlias -I..\..\..\..\..\uCGUI\GUI\ConvertColor -I..\..\..\..\..\uCGUI\GUI\ConvertMono -I..\..\..\..\..\uCGUI\GUI\Core -I..\..\..\..\..\uCGUI\GUI\Font -I..\..\..\..\..\uCGUI\GUI\LCDDriver -I..\..\..\..\..\uCGUI\GUI\MemDev -I..\..\..\..\..\uCGUI\GUI\MultiLayer -I..\..\..\..\..\uCGUI\GUI\Widget -I..\..\..\..\..\uCGUI\GUI\WM -Id:\Keil-stm32\ARM\INC -Id:\Keil-stm32\ARM\INC\ST\STM32F10x -D__MICROLIB --omf_browse=.\rvmdk\guidev_cmpwithlcd.crf ..\..\..\..\..\uCGUI\GUI\MemDev\GUIDEV_CmpWithLCD.c]
                          THUMB

                          AREA ||.text||, CODE, READONLY, ALIGN=2

                  GUI_MEMDEV_CompareWithLCD PROC
;;;44     */
;;;45     int GUI_MEMDEV_CompareWithLCD(GUI_MEMDEV_Handle hMem, int*px, int*py, int *pExp, int*pAct) {
000000  e92d4fff          PUSH     {r0-r11,lr}
000004  b085              SUB      sp,sp,#0x14
000006  4604              MOV      r4,r0
;;;46       int Ret = 0;
000008  2000              MOVS     r0,#0
00000a  9003              STR      r0,[sp,#0xc]
;;;47       /* Make sure memory handle is valid */
;;;48       if (!hMem) {
00000c  b914              CBNZ     r4,|L1.20|
;;;49         hMem = GUI_Context.hDevData;
00000e  4835              LDR      r0,|L1.228|
000010  f9b04050          LDRSH    r4,[r0,#0x50]  ; GUI_Context
                  |L1.20|
;;;50       }
;;;51       if (!hMem) {
000014  b3f4              CBZ      r4,|L1.148|
;;;52         return 1;
;;;53       }
;;;54       GUI_LOCK();
000016  f7fffffe          BL       GUI_Lock
;;;55       {
;;;56         GUI_MEMDEV * pDevData = (GUI_MEMDEV*) GUI_ALLOC_h2p(hMem);  /* Convert to pointer */
00001a  4620              MOV      r0,r4
00001c  f7fffffe          BL       GUI_ALLOC_h2p
;;;57         int y    = pDevData->y0;
000020  f9b07002          LDRSH    r7,[r0,#2]
;;;58         int x0   = pDevData->x0;
000024  f9b0a000          LDRSH    r10,[r0,#0]
;;;59         int XMax = pDevData->XSize + x0;
000028  f9b01004          LDRSH    r1,[r0,#4]
00002c  eb01080a          ADD      r8,r1,r10
;;;60         int YMax = pDevData->YSize + y;
000030  f9b00006          LDRSH    r0,[r0,#6]
000034  eb000907          ADD      r9,r0,r7
;;;61         int Max;
;;;62         int MagX = LCD_GetXMag();
000038  f7fffffe          BL       LCD_GetXMag
00003c  9002              STR      r0,[sp,#8]
;;;63         int MagY = LCD_GetYMag();
00003e  f7fffffe          BL       LCD_GetYMag
000042  9001              STR      r0,[sp,#4]
;;;64         /* Calculate limits */
;;;65         if (y < 0) {
000044  2f00              CMP      r7,#0
000046  da00              BGE      |L1.74|
;;;66     			y = 0;
000048  2700              MOVS     r7,#0
                  |L1.74|
;;;67         }
;;;68         if (x0 < 0) {
00004a  f1ba0f00          CMP      r10,#0
00004e  da01              BGE      |L1.84|
;;;69     			x0 = 0;
000050  f04f0a00          MOV      r10,#0
                  |L1.84|
;;;70         }
;;;71         Max = LCD_GET_YSIZE();
000054  f7fffffe          BL       LCD_GetYSize
;;;72     		if (YMax > Max) {
000058  4581              CMP      r9,r0
00005a  dd00              BLE      |L1.94|
;;;73     			YMax = Max;
00005c  4681              MOV      r9,r0
                  |L1.94|
;;;74         }
;;;75         Max = LCD_GET_XSIZE();
00005e  f7fffffe          BL       LCD_GetXSize
;;;76     		if (XMax > Max) {
000062  4580              CMP      r8,r0
000064  dd00              BLE      |L1.104|
;;;77     			XMax = Max;
000066  4680              MOV      r8,r0
                  |L1.104|
;;;78         }
;;;79         for (; y < YMax; y++) {
000068  454f              CMP      r7,r9
00006a  da34              BGE      |L1.214|
                  |L1.108|
;;;80           int x = x0;
00006c  4655              MOV      r5,r10
;;;81           U8 * pData = (U8 *)GUI_MEMDEV__XY2PTR(x, y);
00006e  4639              MOV      r1,r7
000070  4628              MOV      r0,r5
000072  f7fffffe          BL       GUI_MEMDEV__XY2PTR
000076  4604              MOV      r4,r0
;;;82           for (x = x0; x < XMax; x++) {
000078  4545              CMP      r5,r8
00007a  da29              BGE      |L1.208|
;;;83             int Exp = *pData++;
;;;84             int Act = LCD_L0_GetPixelIndex(x * MagX, y * MagY);
00007c  9801              LDR      r0,[sp,#4]
00007e  4378              MULS     r0,r7,r0
000080  9004              STR      r0,[sp,#0x10]
                  |L1.130|
000082  f8146b01          LDRB     r6,[r4],#1            ;83
000086  9802              LDR      r0,[sp,#8]
000088  9904              LDR      r1,[sp,#0x10]
00008a  4368              MULS     r0,r5,r0
00008c  f7fffffe          BL       LCD_L0_GetPixelIndex
000090  4683              MOV      r11,r0
;;;85             #if (GUI_NUM_LAYERS > 1)
;;;86             if (LCD_GetBitsPerPixelEx(GUI_Context.SelLayer) > 8)
;;;87             #else
;;;88             if (LCD_GetBitsPerPixel() > 8)
000092  e000              B        |L1.150|
                  |L1.148|
000094  e015              B        |L1.194|
                  |L1.150|
000096  f7fffffe          BL       LCD_GetBitsPerPixel
00009a  2808              CMP      r0,#8
00009c  dd03              BLE      |L1.166|
;;;89             #endif
;;;90             {
;;;91               Exp |= (*pData++) << 8;
00009e  f8140b01          LDRB     r0,[r4],#1
0000a2  ea462600          ORR      r6,r6,r0,LSL #8
                  |L1.166|
;;;92             }
;;;93             if (Act != Exp) {
0000a6  45b3              CMP      r11,r6
0000a8  d00f              BEQ      |L1.202|
;;;94               *px    = x;
0000aa  9806              LDR      r0,[sp,#0x18]
0000ac  6005              STR      r5,[r0,#0]
;;;95               *py    = y;
0000ae  9807              LDR      r0,[sp,#0x1c]
0000b0  6007              STR      r7,[r0,#0]
;;;96               *pAct  = Act;
0000b2  9812              LDR      r0,[sp,#0x48]
0000b4  f8c0b000          STR      r11,[r0,#0]
;;;97               *pExp  = Exp;
0000b8  9808              LDR      r0,[sp,#0x20]
0000ba  6006              STR      r6,[r0,#0]
;;;98               Ret = 1;
0000bc  2001              MOVS     r0,#1
0000be  9003              STR      r0,[sp,#0xc]
;;;99               goto Skip;
0000c0  e009              B        |L1.214|
                  |L1.194|
;;;100            }
;;;101          }
;;;102        }
;;;103      }
;;;104    Skip:
;;;105      GUI_UNLOCK();
;;;106      return Ret;
;;;107    }
0000c2  b009              ADD      sp,sp,#0x24
0000c4  2001              MOVS     r0,#1                 ;52
0000c6  e8bd8ff0          POP      {r4-r11,pc}
                  |L1.202|
0000ca  1c6d              ADDS     r5,r5,#1              ;82
0000cc  4545              CMP      r5,r8                 ;82
0000ce  dbd8              BLT      |L1.130|
                  |L1.208|
0000d0  1c7f              ADDS     r7,r7,#1              ;79
0000d2  454f              CMP      r7,r9                 ;79
0000d4  dbca              BLT      |L1.108|
                  |L1.214|
0000d6  f7fffffe          BL       GUI_Unlock
0000da  9803              LDR      r0,[sp,#0xc]          ;106
0000dc  b009              ADD      sp,sp,#0x24
0000de  e8bd8ff0          POP      {r4-r11,pc}
;;;108    
                          ENDP

0000e2  0000              DCW      0x0000
                  |L1.228|
                          DCD      GUI_Context
