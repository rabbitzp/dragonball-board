; generated by ARM C/C++ Compiler, 4.1 [Build 481]
; commandline ArmCC [--debug -c --asm --interleave -o.\rvmdk\guiaachar.o --depend=.\rvmdk\guiaachar.d --cpu=Cortex-M3 --apcs=interwork -O1 -Otime -I. -I..\BSP -I..\..\..\..\..\uCOS-II\Ports\arm-cortex-m3\Generic\RealView -I..\..\..\..\..\uCOS-II\Source -I..\..\..\..\..\CPU\ST\STM32\inc -I..\..\..\..\..\uC-CPU -I..\..\..\..\..\uC-CPU\Arm-Cortex-M3\RealView -I..\..\..\..\..\uC-LIB -I..\..\..\..\..\uC-Probe\Target\Plugins\uCOS-II -I..\..\..\..\..\uC-Probe\Target\Communication\Generic\Source -I..\..\..\..\..\uC-Probe\Target\Communication\Generic\RS-232\Ports\ST\STM32 -I..\..\..\..\..\uC-Probe\Target\Communication\Generic\RS-232\Source -I..\..\..\..\..\User\inc -I..\..\..\..\..\uCGUI\Config -I..\..\..\..\..\uCGUI\GUIDemo -I..\..\..\..\..\uCGUI\LCDDriver -I..\..\..\..\..\uCGUI\GUI\AntiAlias -I..\..\..\..\..\uCGUI\GUI\ConvertColor -I..\..\..\..\..\uCGUI\GUI\ConvertMono -I..\..\..\..\..\uCGUI\GUI\Core -I..\..\..\..\..\uCGUI\GUI\Font -I..\..\..\..\..\uCGUI\GUI\LCDDriver -I..\..\..\..\..\uCGUI\GUI\MemDev -I..\..\..\..\..\uCGUI\GUI\MultiLayer -I..\..\..\..\..\uCGUI\GUI\Widget -I..\..\..\..\..\uCGUI\GUI\WM -Id:\Keil-stm32\ARM\INC -Id:\Keil-stm32\ARM\INC\ST\STM32F10x -D__MICROLIB --omf_browse=.\rvmdk\guiaachar.crf ..\..\..\..\..\uCGUI\GUI\AntiAlias\GUIAAChar.c]
                          THUMB

                          AREA ||.text||, CODE, READONLY, ALIGN=2

                  Draw PROC
;;;55     */
;;;56     static void Draw(int x0, int y0, int XSize, int YSize, int BytesPerLine, const U8*pData) {
000000  e92d4fff          PUSH     {r0-r11,lr}
000004  b081              SUB      sp,sp,#4
000006  4605              MOV      r5,r0
000008  f8dd903c          LDR      r9,[sp,#0x3c]
00000c  4693              MOV      r11,r2
;;;57         int x, y;
;;;58         tSetPixelAA* pfSetPixelAA;
;;;59         pfSetPixelAA = (GUI_Context.TextMode & GUI_TM_TRANS)
00000e  495f              LDR      r1,|L1.396|
000010  8dc8              LDRH     r0,[r1,#0x2e]  ; GUI_Context
000012  f0100f02          TST      r0,#2
000016  d002              BEQ      |L1.30|
;;;60                      ? LCD_SetPixelAA : LCD_SetPixelAA_NoTrans;
000018  f8df8174          LDR      r8,|L1.400|
00001c  e001              B        |L1.34|
                  |L1.30|
00001e  f8df8174          LDR      r8,|L1.404|
                  |L1.34|
;;;61     	  for (y=0; y<YSize; y++) {
000022  f04f0a00          MOV      r10,#0
000026  9804              LDR      r0,[sp,#0x10]
000028  2800              CMP      r0,#0
00002a  dd4c              BLE      |L1.198|
                  |L1.44|
;;;62       	  const U8* pData0 = pData;
;;;63     	    const U8* pData1 = pData+BytesPerLine;
00002c  980e              LDR      r0,[sp,#0x38]
00002e  464e              MOV      r6,r9
000030  eb090700          ADD      r7,r9,r0
;;;64       	  for (x=0; x<XSize; x++) {
000034  2400              MOVS     r4,#0
000036  f1bb0f00          CMP      r11,#0
00003a  dd3c              BLE      |L1.182|
;;;65             int PixelCnt=0;
;;;66             int Mask0 = Bit2Mask0[x&3];
;;;67             int Mask1 = Bit2Mask1[x&3];
;;;68     			  if ((*pData0) & Mask0)
;;;69     			    PixelCnt++;
;;;70     			  if ((*pData0) & Mask1)
;;;71     			    PixelCnt++;
;;;72     			  if ((*pData1) & Mask0)
;;;73     			    PixelCnt++;
;;;74     			  if ((*pData1) & Mask1)
;;;75     			    PixelCnt++;
;;;76             if ((x&3) ==3) {
;;;77               pData0++;
;;;78               pData1++;
;;;79     			  }
;;;80             switch (PixelCnt) {
;;;81             case 4: LCD_HL_DrawPixel(x0+x,y0+y);      break;
00003c  9802              LDR      r0,[sp,#8]
00003e  4450              ADD      r0,r0,r10
000040  9000              STR      r0,[sp,#0]
                  |L1.66|
000042  2000              MOVS     r0,#0                 ;65
000044  4954              LDR      r1,|L1.408|
000046  f0040203          AND      r2,r4,#3              ;66
00004a  5c89              LDRB     r1,[r1,r2]            ;66
00004c  4b53              LDR      r3,|L1.412|
00004e  5c9a              LDRB     r2,[r3,r2]            ;67
000050  7833              LDRB     r3,[r6,#0]            ;68
000052  420b              TST      r3,r1                 ;68
000054  d000              BEQ      |L1.88|
000056  2001              MOVS     r0,#1                 ;69
                  |L1.88|
000058  4213              TST      r3,r2                 ;70
00005a  d000              BEQ      |L1.94|
00005c  1c40              ADDS     r0,r0,#1              ;71
                  |L1.94|
00005e  783b              LDRB     r3,[r7,#0]            ;72
000060  420b              TST      r3,r1                 ;72
000062  d000              BEQ      |L1.102|
000064  1c40              ADDS     r0,r0,#1              ;73
                  |L1.102|
000066  4213              TST      r3,r2                 ;74
000068  d000              BEQ      |L1.108|
00006a  1c40              ADDS     r0,r0,#1              ;75
                  |L1.108|
00006c  2103              MOVS     r1,#3                 ;76
00006e  43a1              BICS     r1,r1,r4              ;76
000070  d101              BNE      |L1.118|
000072  1c76              ADDS     r6,r6,#1              ;77
000074  1c7f              ADDS     r7,r7,#1              ;78
                  |L1.118|
000076  2801              CMP      r0,#1                 ;80
000078  d016              BEQ      |L1.168|
00007a  2802              CMP      r0,#2                 ;80
00007c  d00f              BEQ      |L1.158|
00007e  2803              CMP      r0,#3                 ;80
000080  d008              BEQ      |L1.148|
000082  2804              CMP      r0,#4                 ;80
000084  d114              BNE      |L1.176|
000086  4941              LDR      r1,|L1.396|
000088  1928              ADDS     r0,r5,r4
00008a  6dc9              LDR      r1,[r1,#0x5c]  ; GUI_Context
00008c  684a              LDR      r2,[r1,#4]
00008e  9900              LDR      r1,[sp,#0]
000090  4790              BLX      r2
000092  e00d              B        |L1.176|
                  |L1.148|
;;;82             case 3: (*pfSetPixelAA) (x0+x,y0+y, 12); break;
000094  1928              ADDS     r0,r5,r4
000096  220c              MOVS     r2,#0xc
000098  9900              LDR      r1,[sp,#0]
00009a  47c0              BLX      r8
00009c  e008              B        |L1.176|
                  |L1.158|
;;;83             case 2: (*pfSetPixelAA) (x0+x,y0+y, 8);  break;
00009e  1928              ADDS     r0,r5,r4
0000a0  2208              MOVS     r2,#8
0000a2  9900              LDR      r1,[sp,#0]
0000a4  47c0              BLX      r8
0000a6  e003              B        |L1.176|
                  |L1.168|
;;;84             case 1: (*pfSetPixelAA) (x0+x,y0+y, 4);  break;
0000a8  1928              ADDS     r0,r5,r4
0000aa  2204              MOVS     r2,#4
0000ac  9900              LDR      r1,[sp,#0]
0000ae  47c0              BLX      r8
                  |L1.176|
0000b0  1c64              ADDS     r4,r4,#1              ;64
0000b2  455c              CMP      r4,r11                ;64
0000b4  dbc5              BLT      |L1.66|
                  |L1.182|
;;;85     			  }
;;;86       	  }
;;;87           pData+=2*BytesPerLine;
0000b6  980e              LDR      r0,[sp,#0x38]
0000b8  eb090940          ADD      r9,r9,r0,LSL #1
0000bc  f10a0a01          ADD      r10,r10,#1            ;61
0000c0  9804              LDR      r0,[sp,#0x10]         ;61
0000c2  4582              CMP      r10,r0                ;61
0000c4  dbb2              BLT      |L1.44|
                  |L1.198|
;;;88     	  }
;;;89     }
0000c6  b005              ADD      sp,sp,#0x14
0000c8  e8bd8ff0          POP      {r4-r11,pc}
;;;90     
                          ENDP

                  GUIPROP_FindChar PROC
;;;94     */
;;;95     static const GUI_FONT_PROP* GUIPROP_FindChar(const GUI_FONT_PROP* pProp, U16P c) {
0000cc  482f              LDR      r0,|L1.396|
;;;96       for (pProp = GUI_Context.pAFont->p.pProp; pProp; pProp=(const GUI_FONT_PROP*) pProp->pNext) {
0000ce  69c0              LDR      r0,[r0,#0x1c]  ; GUI_Context
0000d0  6980              LDR      r0,[r0,#0x18]
0000d2  2800              CMP      r0,#0
0000d4  d008              BEQ      |L1.232|
                  |L1.214|
;;;97         if ((c>=pProp->First) && (c<=pProp->Last))
0000d6  8802              LDRH     r2,[r0,#0]
0000d8  428a              CMP      r2,r1
0000da  d802              BHI      |L1.226|
0000dc  8842              LDRH     r2,[r0,#2]
0000de  428a              CMP      r2,r1
0000e0  d202              BCS      |L1.232|
                  |L1.226|
0000e2  6880              LDR      r0,[r0,#8]            ;96
0000e4  2800              CMP      r0,#0                 ;96
0000e6  d1f6              BNE      |L1.214|
                  |L1.232|
;;;98           break;
;;;99       }
;;;100      return pProp;
;;;101    }
0000e8  4770              BX       lr
;;;102    
                          ENDP

                  GUIPROPAA_DispChar PROC
;;;112    */
;;;113    void GUIPROPAA_DispChar(U16P c) {
0000ea  b5f0              PUSH     {r4-r7,lr}
0000ec  b083              SUB      sp,sp,#0xc
0000ee  4604              MOV      r4,r0
;;;114      int BytesPerLine;
;;;115      GUI_DRAWMODE DrawMode = GUI_Context.TextMode;
0000f0  4d26              LDR      r5,|L1.396|
0000f2  f9b5602e          LDRSH    r6,[r5,#0x2e]  ; GUI_Context
;;;116      const GUI_FONT_PROP* pProp = GUIPROP_FindChar(GUI_Context.pAFont->p.pProp, c);
0000f6  69e8              LDR      r0,[r5,#0x1c]  ; GUI_Context
0000f8  4621              MOV      r1,r4
0000fa  6980              LDR      r0,[r0,#0x18]
0000fc  f7fffffe          BL       GUIPROP_FindChar
;;;117      if (pProp) {
000100  2800              CMP      r0,#0
000102  d020              BEQ      |L1.326|
;;;118        GUI_DRAWMODE OldDrawMode;
;;;119        const GUI_CHARINFO* pCharInfo = pProp->paCharInfo+(c-pProp->First);
000104  6841              LDR      r1,[r0,#4]
000106  8800              LDRH     r0,[r0,#0]
000108  1a20              SUBS     r0,r4,r0
00010a  eb0104c0          ADD      r4,r1,r0,LSL #3
;;;120        BytesPerLine = pCharInfo->BytesPerLine;
00010e  78a7              LDRB     r7,[r4,#2]
;;;121        OldDrawMode  = LCD_SetDrawMode(DrawMode);
000110  4630              MOV      r0,r6
000112  f7fffffe          BL       LCD_SetDrawMode
000116  4606              MOV      r6,r0
;;;122        Draw  ( GUI_Context.DispPosX, GUI_Context.DispPosY,
000118  6863              LDR      r3,[r4,#4]
00011a  9700              STR      r7,[sp,#0]
00011c  9301              STR      r3,[sp,#4]
00011e  69e8              LDR      r0,[r5,#0x1c]  ; GUI_Context
000120  f9b51028          LDRSH    r1,[r5,#0x28]  ; GUI_Context
000124  7d03              LDRB     r3,[r0,#0x14]
000126  7820              LDRB     r0,[r4,#0]
000128  1c40              ADDS     r0,r0,#1
00012a  0842              LSRS     r2,r0,#1
00012c  f9b50026          LDRSH    r0,[r5,#0x26]  ; GUI_Context
000130  f7fffffe          BL       Draw
;;;123                           (pCharInfo->XSize+1)/2,
;;;124                           GUI_Context.pAFont->YSize,
;;;125                           BytesPerLine,
;;;126                           (U8 const*) pCharInfo->pData
;;;127                           );
;;;128        LCD_SetDrawMode(OldDrawMode); /* Restore draw mode */
000134  4630              MOV      r0,r6
000136  f7fffffe          BL       LCD_SetDrawMode
;;;129        GUI_Context.DispPosX += (pCharInfo->XDist+1)/2;
00013a  7861              LDRB     r1,[r4,#1]
00013c  8ce8              LDRH     r0,[r5,#0x26]  ; GUI_Context
00013e  1c49              ADDS     r1,r1,#1
000140  eb000051          ADD      r0,r0,r1,LSR #1
000144  84e8              STRH     r0,[r5,#0x26]
                  |L1.326|
;;;130      }
;;;131    }
000146  b003              ADD      sp,sp,#0xc
000148  bdf0              POP      {r4-r7,pc}
;;;132    
                          ENDP

                  GUIPROPAA_GetCharDistX PROC
;;;136    */
;;;137    int GUIPROPAA_GetCharDistX(U16P c) {
00014a  b510              PUSH     {r4,lr}
00014c  4604              MOV      r4,r0
;;;138      int r;
;;;139      const GUI_FONT_PROP* pProp = GUIPROP_FindChar(GUI_Context.pAFont->p.pProp, c);
00014e  480f              LDR      r0,|L1.396|
000150  4621              MOV      r1,r4
000152  69c0              LDR      r0,[r0,#0x1c]  ; GUI_Context
000154  6980              LDR      r0,[r0,#0x18]
000156  f7fffffe          BL       GUIPROP_FindChar
;;;140      r = (pProp) ? (pProp->paCharInfo+(c-pProp->First))->XSize : 0;
00015a  b128              CBZ      r0,|L1.360|
00015c  6842              LDR      r2,[r0,#4]
00015e  8800              LDRH     r0,[r0,#0]
000160  1a20              SUBS     r0,r4,r0
000162  f8120030          LDRB     r0,[r2,r0,LSL #3]
000166  e000              B        |L1.362|
                  |L1.360|
000168  2000              MOVS     r0,#0
                  |L1.362|
;;;141      return (r+1)/2;
00016a  1c40              ADDS     r0,r0,#1
00016c  eb0070d0          ADD      r0,r0,r0,LSR #31
000170  1040              ASRS     r0,r0,#1
;;;142    }
000172  bd10              POP      {r4,pc}
;;;143    
                          ENDP

                  GUIPROPAA_GetFontInfo PROC
;;;147    */
;;;148    void GUIPROPAA_GetFontInfo(const GUI_FONT * pFont, GUI_FONTINFO* pfi) {
000174  2005              MOVS     r0,#5
;;;149      GUI_USE_PARA(pFont);
;;;150      pfi->Flags = GUI_FONTINFO_FLAG_PROP | GUI_FONTINFO_FLAG_AA;
000176  8008              STRH     r0,[r1,#0]
;;;151    }
000178  4770              BX       lr
;;;152    
                          ENDP

                  GUIPROPAA_IsInFont PROC
;;;156    */
;;;157    char GUIPROPAA_IsInFont(const GUI_FONT * pFont, U16 c) {
00017a  b510              PUSH     {r4,lr}
;;;158      const GUI_FONT_PROP* pProp = GUIPROP_FindChar(pFont->p.pProp, c);
00017c  6980              LDR      r0,[r0,#0x18]
00017e  f7fffffe          BL       GUIPROP_FindChar
;;;159      return (pProp==NULL) ? 0 : 1;
000182  b108              CBZ      r0,|L1.392|
000184  2001              MOVS     r0,#1
;;;160    }
000186  bd10              POP      {r4,pc}
                  |L1.392|
000188  2000              MOVS     r0,#0                 ;159
00018a  bd10              POP      {r4,pc}
;;;161    
                          ENDP

                  |L1.396|
                          DCD      GUI_Context
                  |L1.400|
                          DCD      LCD_SetPixelAA
                  |L1.404|
                          DCD      LCD_SetPixelAA_NoTrans
                  |L1.408|
                          DCD      ||.constdata||
                  |L1.412|
                          DCD      ||.constdata||+0x4

                          AREA ||.constdata||, DATA, READONLY, ALIGN=0

                  Bit2Mask0
000000  80200802          DCB      0x80,0x20,0x08,0x02
                  Bit2Mask1
000004  40100401          DCB      0x40,0x10,0x04,0x01
