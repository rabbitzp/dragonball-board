; generated by ARM C/C++ Compiler, 4.1 [Build 481]
; commandline ArmCC [--debug -c --asm --interleave -o.\rvmdk\graph_data_xy.o --depend=.\rvmdk\graph_data_xy.d --cpu=Cortex-M3 --apcs=interwork -O1 -Otime -I. -I..\BSP -I..\..\..\..\..\uCOS-II\Ports\arm-cortex-m3\Generic\RealView -I..\..\..\..\..\uCOS-II\Source -I..\..\..\..\..\CPU\ST\STM32\inc -I..\..\..\..\..\uC-CPU -I..\..\..\..\..\uC-CPU\Arm-Cortex-M3\RealView -I..\..\..\..\..\uC-LIB -I..\..\..\..\..\uC-Probe\Target\Plugins\uCOS-II -I..\..\..\..\..\uC-Probe\Target\Communication\Generic\Source -I..\..\..\..\..\uC-Probe\Target\Communication\Generic\RS-232\Ports\ST\STM32 -I..\..\..\..\..\uC-Probe\Target\Communication\Generic\RS-232\Source -I..\..\..\..\..\User\inc -I..\..\..\..\..\uCGUI\Config -I..\..\..\..\..\uCGUI\GUIDemo -I..\..\..\..\..\uCGUI\LCDDriver -I..\..\..\..\..\uCGUI\GUI\AntiAlias -I..\..\..\..\..\uCGUI\GUI\ConvertColor -I..\..\..\..\..\uCGUI\GUI\ConvertMono -I..\..\..\..\..\uCGUI\GUI\Core -I..\..\..\..\..\uCGUI\GUI\Font -I..\..\..\..\..\uCGUI\GUI\LCDDriver -I..\..\..\..\..\uCGUI\GUI\MemDev -I..\..\..\..\..\uCGUI\GUI\MultiLayer -I..\..\..\..\..\uCGUI\GUI\Widget -I..\..\..\..\..\uCGUI\GUI\WM -Id:\Keil-stm32\ARM\INC -Id:\Keil-stm32\ARM\INC\ST\STM32F10x -D__MICROLIB --omf_browse=.\rvmdk\graph_data_xy.crf ..\..\..\..\..\uCGUI\GUI\Widget\GRAPH_DATA_XY.c]
                          THUMB

                          AREA ||.text||, CODE, READONLY, ALIGN=2

                  _DrawPolyLine PROC
;;;48     */
;;;49     static void _DrawPolyLine(const GUI_POINT * pPoints, int NumPoints, int x0, int y0) {
000000  b5f8              PUSH     {r3-r7,lr}
000002  4604              MOV      r4,r0
000004  460d              MOV      r5,r1
;;;50       unsigned PixelCnt;
;;;51       PixelCnt = 0;
000006  2000              MOVS     r0,#0
000008  9000              STR      r0,[sp,#0]
;;;52       WM_ADDORG(x0,y0);
00000a  489a              LDR      r0,|L1.628|
00000c  6c41              LDR      r1,[r0,#0x44]  ; GUI_Context
00000e  188e              ADDS     r6,r1,r2
000010  6c80              LDR      r0,[r0,#0x48]  ; GUI_Context
000012  18c7              ADDS     r7,r0,r3
;;;53       WM_ITERATE_START(NULL); {
000014  2000              MOVS     r0,#0
000016  f7fffffe          BL       WM__InitIVRSearch
00001a  2800              CMP      r0,#0
00001c  d01a              BEQ      |L1.84|
                  |L1.30|
;;;54         GL_MoveTo(pPoints->x + x0, y0 - pPoints->y);
00001e  f9b40002          LDRSH    r0,[r4,#2]
000022  1a39              SUBS     r1,r7,r0
000024  f9b40000          LDRSH    r0,[r4,#0]
000028  4430              ADD      r0,r0,r6
00002a  f7fffffe          BL       GL_MoveTo
;;;55         while (--NumPoints >0) {
00002e  1e6d              SUBS     r5,r5,#1
000030  2d00              CMP      r5,#0
000032  dd0b              BLE      |L1.76|
                  |L1.52|
;;;56           pPoints++;
;;;57           GL_DrawLineToEx(pPoints->x + x0, y0 - pPoints->y, &PixelCnt);
000034  f9b40006          LDRSH    r0,[r4,#6]
000038  466a              MOV      r2,sp
00003a  1a39              SUBS     r1,r7,r0
00003c  f9340f04          LDRSH    r0,[r4,#4]!
000040  4430              ADD      r0,r0,r6
000042  f7fffffe          BL       GL_DrawLineToEx
000046  1e6d              SUBS     r5,r5,#1              ;55
000048  2d00              CMP      r5,#0                 ;55
00004a  dcf3              BGT      |L1.52|
                  |L1.76|
;;;58         }
;;;59       } WM_ITERATE_END();
00004c  f7fffffe          BL       WM__GetNextIVR
000050  2800              CMP      r0,#0
000052  d1e4              BNE      |L1.30|
                  |L1.84|
;;;60     }
000054  bdf8              POP      {r3-r7,pc}
;;;61     
                          ENDP

                  _OnPaint PROC
;;;65     */
;;;66     static void _OnPaint(GRAPH_DATA_Handle hDataObj, GUI_RECT * pRect) {
000056  e92d43f0          PUSH     {r4-r9,lr}
00005a  b083              SUB      sp,sp,#0xc
;;;67       GUI_POINT         * pData;
;;;68       GRAPH_DATA_XY_OBJ * pDataXYObj;
;;;69       GUI_USE_PARA(pRect);
;;;70       pDataXYObj = (GRAPH_DATA_XY_OBJ *)GUI_ALLOC_h2p(hDataObj);
00005c  f7fffffe          BL       GUI_ALLOC_h2p
000060  4604              MOV      r4,r0
;;;71       pData = (GUI_POINT *)GUI_ALLOC_h2p(pDataXYObj->hData);
000062  f9b40020          LDRSH    r0,[r4,#0x20]
000066  f7fffffe          BL       GUI_ALLOC_h2p
00006a  4607              MOV      r7,r0
;;;72       if (pData) {
00006c  2f00              CMP      r7,#0
00006e  d044              BEQ      |L1.250|
;;;73         GUI_RECT Rect;
;;;74         GRAPH_OBJ * pObj;
;;;75         int xPos, yPos;
;;;76         int BorderL, BorderT, BorderR, BorderB;
;;;77         pObj = GRAPH_H2P(pDataXYObj->GraphDataObj.PaintObj.hGraph);
000070  f9b40008          LDRSH    r0,[r4,#8]
000074  f7fffffe          BL       GUI_ALLOC_h2p
;;;78         BorderL = pObj->Props.BorderL;
000078  f8d08048          LDR      r8,[r0,#0x48]
;;;79         BorderT = pObj->Props.BorderT;
00007c  6cc5              LDR      r5,[r0,#0x4c]
;;;80         BorderR = pObj->Props.BorderR;
00007e  6d06              LDR      r6,[r0,#0x50]
;;;81         BorderB = pObj->Props.BorderB;
000080  f8d09054          LDR      r9,[r0,#0x54]
;;;82         WM_GetInsideRectExScrollbar(pDataXYObj->GraphDataObj.PaintObj.hGraph, &Rect);
000084  f9b40008          LDRSH    r0,[r4,#8]
000088  4669              MOV      r1,sp
00008a  f7fffffe          BL       WM_GetInsideRectExScrollbar
;;;83         Rect.x0 += BorderL;
00008e  f8bd0000          LDRH     r0,[sp,#0]
000092  4440              ADD      r0,r0,r8
000094  b200              SXTH     r0,r0
000096  f8ad0000          STRH     r0,[sp,#0]
;;;84         Rect.y0 += BorderT;
00009a  f8bd1002          LDRH     r1,[sp,#2]
00009e  4429              ADD      r1,r1,r5
0000a0  f8ad1002          STRH     r1,[sp,#2]
;;;85         Rect.x1 -= BorderR;
0000a4  f8bd1004          LDRH     r1,[sp,#4]
0000a8  1b89              SUBS     r1,r1,r6
0000aa  f8ad1004          STRH     r1,[sp,#4]
;;;86         Rect.y1 -= BorderB;
0000ae  f8bd1006          LDRH     r1,[sp,#6]
0000b2  eba10109          SUB      r1,r1,r9
0000b6  b209              SXTH     r1,r1
0000b8  f8ad1006          STRH     r1,[sp,#6]
;;;87         xPos     = Rect.x0 + pDataXYObj->GraphDataObj.OffX;
0000bc  69a2              LDR      r2,[r4,#0x18]
0000be  1886              ADDS     r6,r0,r2
;;;88         yPos     = Rect.y1 - pDataXYObj->GraphDataObj.OffY;
0000c0  69e0              LDR      r0,[r4,#0x1c]
0000c2  eba10800          SUB      r8,r1,r0
;;;89         pObj = GRAPH_H2P(pDataXYObj->GraphDataObj.PaintObj.hGraph);
0000c6  f9b40008          LDRSH    r0,[r4,#8]
0000ca  f7fffffe          BL       GUI_ALLOC_h2p
0000ce  4605              MOV      r5,r0
;;;90         GUI_SetColor(pDataXYObj->GraphDataObj.Color);
0000d0  6960              LDR      r0,[r4,#0x14]
0000d2  f7fffffe          BL       GUI_SetColor
;;;91         GUI_SetPenSize(pDataXYObj->PenSize);
0000d6  f8940022          LDRB     r0,[r4,#0x22]
0000da  f7fffffe          BL       GUI_SetPenSize
;;;92         GUI_SetLineStyle(pDataXYObj->LineStyle);
0000de  f8940023          LDRB     r0,[r4,#0x23]
0000e2  f7fffffe          BL       GUI_SetLineStyle
;;;93         _DrawPolyLine(pData, pDataXYObj->GraphDataObj.NumItems, xPos + pObj->ScrollStateH.v, yPos + pObj->ScrollStateV.v);
0000e6  6f68              LDR      r0,[r5,#0x74]
0000e8  68e1              LDR      r1,[r4,#0xc]
0000ea  eb000308          ADD      r3,r0,r8
0000ee  f8d50080          LDR      r0,[r5,#0x80]
0000f2  1982              ADDS     r2,r0,r6
0000f4  4638              MOV      r0,r7
0000f6  f7fffffe          BL       _DrawPolyLine
                  |L1.250|
;;;94       }
;;;95     }
0000fa  b003              ADD      sp,sp,#0xc
0000fc  e8bd83f0          POP      {r4-r9,pc}
;;;96     
                          ENDP

                  _OnDelete PROC
;;;100    */
;;;101    static void _OnDelete(GRAPH_DATA_Handle hDataObj) {
000100  b510              PUSH     {r4,lr}
;;;102      GRAPH_DATA_XY_OBJ * pDataXYObj;
;;;103      pDataXYObj = (GRAPH_DATA_XY_OBJ *)GUI_ALLOC_h2p(hDataObj);
000102  f7fffffe          BL       GUI_ALLOC_h2p
;;;104      if (pDataXYObj->hData) {
000106  f9b00020          LDRSH    r0,[r0,#0x20]
00010a  2800              CMP      r0,#0
00010c  d003              BEQ      |L1.278|
;;;105        GUI_ALLOC_Free(pDataXYObj->hData);
00010e  e8bd4010          POP      {r4,lr}
000112  f7ffbffe          B.W      GUI_ALLOC_Free
                  |L1.278|
;;;106      }
;;;107    }
000116  bd10              POP      {r4,pc}
;;;108    
                          ENDP

                  _SetOffX PROC
;;;112    */
;;;113    static void _SetOffX(GRAPH_DATA_OBJ * pDataObj, int Value) {
000118  2800              CMP      r0,#0
;;;114      if (pDataObj) {
00011a  d007              BEQ      |L1.300|
;;;115        if (pDataObj->OffX != Value) {
00011c  6982              LDR      r2,[r0,#0x18]
00011e  428a              CMP      r2,r1
000120  d004              BEQ      |L1.300|
;;;116          pDataObj->OffX = Value;
000122  6181              STR      r1,[r0,#0x18]
;;;117          WM_Invalidate(pDataObj->PaintObj.hGraph);
000124  f9b00008          LDRSH    r0,[r0,#8]
000128  f7ffbffe          B.W      WM_InvalidateWindow
                  |L1.300|
;;;118        }
;;;119      }
;;;120    }
00012c  4770              BX       lr
;;;121    
                          ENDP

                  _SetOffY PROC
;;;125    */
;;;126    static void _SetOffY(GRAPH_DATA_OBJ * pDataObj, int Value) {
00012e  2800              CMP      r0,#0
;;;127      if (pDataObj) {
000130  d007              BEQ      |L1.322|
;;;128        if (pDataObj->OffY != Value) {
000132  69c2              LDR      r2,[r0,#0x1c]
000134  428a              CMP      r2,r1
000136  d004              BEQ      |L1.322|
;;;129          pDataObj->OffY = Value;
000138  61c1              STR      r1,[r0,#0x1c]
;;;130          WM_Invalidate(pDataObj->PaintObj.hGraph);
00013a  f9b00008          LDRSH    r0,[r0,#8]
00013e  f7ffbffe          B.W      WM_InvalidateWindow
                  |L1.322|
;;;131        }
;;;132      }
;;;133    }
000142  4770              BX       lr
;;;134    
                          ENDP

                  GRAPH_DATA_XY_Create PROC
;;;144    */
;;;145    GRAPH_DATA_Handle GRAPH_DATA_XY_Create(GUI_COLOR Color, unsigned MaxNumItems, GUI_POINT * pItems, unsigned NumItems) {
000144  e92d47f0          PUSH     {r4-r10,lr}
000148  4607              MOV      r7,r0
00014a  460d              MOV      r5,r1
00014c  4691              MOV      r9,r2
00014e  461c              MOV      r4,r3
;;;146      GRAPH_DATA_Handle  hDataObj;
;;;147      WM_LOCK();
000150  f7fffffe          BL       GUI_Lock
;;;148      hDataObj = GUI_ALLOC_AllocZero(sizeof(GRAPH_DATA_XY_OBJ));
000154  2024              MOVS     r0,#0x24
000156  f7fffffe          BL       GUI_ALLOC_AllocZero
00015a  4680              MOV      r8,r0
;;;149      if (hDataObj) {
00015c  f1b80f00          CMP      r8,#0
000160  d01e              BEQ      |L1.416|
;;;150        GRAPH_DATA_XY_OBJ * pDataXYObj;
;;;151        WM_HMEM             hData;
;;;152        int                 BufferSize;
;;;153        BufferSize = sizeof(GUI_POINT) * MaxNumItems;
000162  00a8              LSLS     r0,r5,#2
;;;154        hData = GUI_ALLOC_AllocZero(BufferSize);
000164  b200              SXTH     r0,r0
000166  f7fffffe          BL       GUI_ALLOC_AllocZero
00016a  4606              MOV      r6,r0
;;;155        if (hData && pItems && NumItems) {
00016c  b156              CBZ      r6,|L1.388|
00016e  f1b90f00          CMP      r9,#0
000172  d007              BEQ      |L1.388|
000174  b134              CBZ      r4,|L1.388|
;;;156          void * p;
;;;157          p = GUI_ALLOC_h2p(hData);
000176  4630              MOV      r0,r6
000178  f7fffffe          BL       GUI_ALLOC_h2p
;;;158          memcpy(p, pItems, sizeof(GUI_POINT) * NumItems);
00017c  00a2              LSLS     r2,r4,#2
00017e  4649              MOV      r1,r9
000180  f7fffffe          BL       __aeabi_memcpy
                  |L1.388|
;;;159        }
;;;160        pDataXYObj = (GRAPH_DATA_XY_OBJ *)GUI_ALLOC_h2p(hDataObj);
000184  4640              MOV      r0,r8
000186  f7fffffe          BL       GUI_ALLOC_h2p
;;;161        pDataXYObj->hData = hData;
00018a  8406              STRH     r6,[r0,#0x20]
;;;162        pDataXYObj->PenSize = 1;
00018c  2101              MOVS     r1,#1
00018e  f8801022          STRB     r1,[r0,#0x22]
;;;163        pDataXYObj->GraphDataObj.Color               = Color;
000192  6147              STR      r7,[r0,#0x14]
;;;164        pDataXYObj->GraphDataObj.MaxNumItems         = MaxNumItems;
000194  6105              STR      r5,[r0,#0x10]
;;;165        pDataXYObj->GraphDataObj.NumItems            = NumItems;
000196  60c4              STR      r4,[r0,#0xc]
;;;166        pDataXYObj->GraphDataObj.PaintObj.pfOnPaint  = _OnPaint;
000198  4937              LDR      r1,|L1.632|
00019a  6001              STR      r1,[r0,#0]
;;;167        pDataXYObj->GraphDataObj.PaintObj.pfOnDelete = _OnDelete;
00019c  4937              LDR      r1,|L1.636|
00019e  6041              STR      r1,[r0,#4]
                  |L1.416|
;;;168      }
;;;169      WM_UNLOCK();
0001a0  f7fffffe          BL       GUI_Unlock
;;;170      return hDataObj;
0001a4  4640              MOV      r0,r8
;;;171    }
0001a6  e8bd87f0          POP      {r4-r10,pc}
;;;172    
                          ENDP

                  GRAPH_DATA_XY_AddPoint PROC
;;;176    */
;;;177    void GRAPH_DATA_XY_AddPoint(GRAPH_DATA_Handle hDataObj, GUI_POINT * pPoint) {
0001aa  b570              PUSH     {r4-r6,lr}
0001ac  4604              MOV      r4,r0
0001ae  460d              MOV      r5,r1
;;;178      GRAPH_DATA_XY_OBJ * pDataXYObj;
;;;179      WM_LOCK();
0001b0  f7fffffe          BL       GUI_Lock
;;;180      pDataXYObj = (GRAPH_DATA_XY_OBJ *)GUI_ALLOC_h2p(hDataObj);
0001b4  4620              MOV      r0,r4
0001b6  f7fffffe          BL       GUI_ALLOC_h2p
0001ba  4604              MOV      r4,r0
;;;181      if (pDataXYObj) {
0001bc  b14c              CBZ      r4,|L1.466|
;;;182        GUI_POINT * pData;
;;;183        pData = (GUI_POINT *)GUI_ALLOC_h2p(pDataXYObj->hData);
0001be  f9b40020          LDRSH    r0,[r4,#0x20]
0001c2  f7fffffe          BL       GUI_ALLOC_h2p
;;;184        GRAPH__AddValue(&pDataXYObj->GraphDataObj, pData, pPoint, sizeof(GUI_POINT));
0001c6  4601              MOV      r1,r0
0001c8  2304              MOVS     r3,#4
0001ca  462a              MOV      r2,r5
0001cc  4620              MOV      r0,r4
0001ce  f7fffffe          BL       GRAPH__AddValue
                  |L1.466|
;;;185      }
;;;186      WM_UNLOCK();
0001d2  e8bd4070          POP      {r4-r6,lr}
0001d6  f7ffbffe          B.W      GUI_Unlock
;;;187    }
;;;188    
                          ENDP

                  GRAPH_DATA_XY_SetOffX PROC
;;;192    */
;;;193    void GRAPH_DATA_XY_SetOffX(GRAPH_DATA_Handle hDataObj, int Off) {
0001da  b570              PUSH     {r4-r6,lr}
0001dc  4605              MOV      r5,r0
0001de  460c              MOV      r4,r1
;;;194      WM_LOCK();
0001e0  f7fffffe          BL       GUI_Lock
;;;195      _SetOffX((GRAPH_DATA_OBJ *)GUI_ALLOC_h2p(hDataObj), Off);
0001e4  4628              MOV      r0,r5
0001e6  f7fffffe          BL       GUI_ALLOC_h2p
0001ea  4621              MOV      r1,r4
0001ec  f7fffffe          BL       _SetOffX
;;;196      WM_UNLOCK();
0001f0  e8bd4070          POP      {r4-r6,lr}
0001f4  f7ffbffe          B.W      GUI_Unlock
;;;197    }
;;;198    
                          ENDP

                  GRAPH_DATA_XY_SetOffY PROC
;;;202    */
;;;203    void GRAPH_DATA_XY_SetOffY(GRAPH_DATA_Handle hDataObj, int Off) {
0001f8  b570              PUSH     {r4-r6,lr}
0001fa  4605              MOV      r5,r0
0001fc  460c              MOV      r4,r1
;;;204      WM_LOCK();
0001fe  f7fffffe          BL       GUI_Lock
;;;205      _SetOffY((GRAPH_DATA_OBJ *)GUI_ALLOC_h2p(hDataObj), Off);
000202  4628              MOV      r0,r5
000204  f7fffffe          BL       GUI_ALLOC_h2p
000208  4621              MOV      r1,r4
00020a  f7fffffe          BL       _SetOffY
;;;206      WM_UNLOCK();
00020e  e8bd4070          POP      {r4-r6,lr}
000212  f7ffbffe          B.W      GUI_Unlock
;;;207    }
;;;208    
                          ENDP

                  GRAPH_DATA_XY_SetPenSize PROC
;;;212    */
;;;213    void GRAPH_DATA_XY_SetPenSize(GRAPH_DATA_Handle hDataObj, U8 PenSize) {
000216  b570              PUSH     {r4-r6,lr}
000218  4605              MOV      r5,r0
00021a  460c              MOV      r4,r1
;;;214      GRAPH_DATA_XY_OBJ * pDataXYObj;
;;;215      WM_LOCK();
00021c  f7fffffe          BL       GUI_Lock
;;;216      pDataXYObj = (GRAPH_DATA_XY_OBJ *)GUI_ALLOC_h2p(hDataObj);
000220  4628              MOV      r0,r5
000222  f7fffffe          BL       GUI_ALLOC_h2p
;;;217      if (pDataXYObj) {
000226  b148              CBZ      r0,|L1.572|
;;;218        if (pDataXYObj->PenSize != PenSize) {
000228  f8901022          LDRB     r1,[r0,#0x22]
00022c  42a1              CMP      r1,r4
00022e  d005              BEQ      |L1.572|
;;;219          pDataXYObj->PenSize = PenSize;
000230  f8804022          STRB     r4,[r0,#0x22]
;;;220          WM_InvalidateWindow(pDataXYObj->GraphDataObj.PaintObj.hGraph);
000234  f9b00008          LDRSH    r0,[r0,#8]
000238  f7fffffe          BL       WM_InvalidateWindow
                  |L1.572|
;;;221        }
;;;222      }
;;;223      WM_UNLOCK();
00023c  e8bd4070          POP      {r4-r6,lr}
000240  f7ffbffe          B.W      GUI_Unlock
;;;224    }
;;;225    
                          ENDP

                  GRAPH_DATA_XY_SetLineStyle PROC
;;;229    */
;;;230    void GRAPH_DATA_XY_SetLineStyle(GRAPH_DATA_Handle hDataObj, U8 LineStyle) {
000244  b570              PUSH     {r4-r6,lr}
000246  4605              MOV      r5,r0
000248  460c              MOV      r4,r1
;;;231      GRAPH_DATA_XY_OBJ * pDataXYObj;
;;;232      WM_LOCK();
00024a  f7fffffe          BL       GUI_Lock
;;;233      pDataXYObj = (GRAPH_DATA_XY_OBJ *)GUI_ALLOC_h2p(hDataObj);
00024e  4628              MOV      r0,r5
000250  f7fffffe          BL       GUI_ALLOC_h2p
;;;234      if (pDataXYObj) {
000254  b148              CBZ      r0,|L1.618|
;;;235        if (pDataXYObj->LineStyle != LineStyle) {
000256  f8901023          LDRB     r1,[r0,#0x23]
00025a  42a1              CMP      r1,r4
00025c  d005              BEQ      |L1.618|
;;;236          pDataXYObj->LineStyle = LineStyle;
00025e  f8804023          STRB     r4,[r0,#0x23]
;;;237          WM_InvalidateWindow(pDataXYObj->GraphDataObj.PaintObj.hGraph);
000262  f9b00008          LDRSH    r0,[r0,#8]
000266  f7fffffe          BL       WM_InvalidateWindow
                  |L1.618|
;;;238        }
;;;239      }
;;;240      WM_UNLOCK();
00026a  e8bd4070          POP      {r4-r6,lr}
00026e  f7ffbffe          B.W      GUI_Unlock
;;;241    }
;;;242    
                          ENDP

000272  0000              DCW      0x0000
                  |L1.628|
                          DCD      GUI_Context
                  |L1.632|
                          DCD      _OnPaint
                  |L1.636|
                          DCD      _OnDelete
