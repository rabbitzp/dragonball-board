; generated by ARM C/C++ Compiler, 4.1 [Build 481]
; commandline ArmCC [--debug -c --asm --interleave -o.\rvmdk\guidev_banding.o --depend=.\rvmdk\guidev_banding.d --cpu=Cortex-M3 --apcs=interwork -O1 -Otime -I. -I..\BSP -I..\..\..\..\..\uCOS-II\Ports\arm-cortex-m3\Generic\RealView -I..\..\..\..\..\uCOS-II\Source -I..\..\..\..\..\CPU\ST\STM32\inc -I..\..\..\..\..\uC-CPU -I..\..\..\..\..\uC-CPU\Arm-Cortex-M3\RealView -I..\..\..\..\..\uC-LIB -I..\..\..\..\..\uC-Probe\Target\Plugins\uCOS-II -I..\..\..\..\..\uC-Probe\Target\Communication\Generic\Source -I..\..\..\..\..\uC-Probe\Target\Communication\Generic\RS-232\Ports\ST\STM32 -I..\..\..\..\..\uC-Probe\Target\Communication\Generic\RS-232\Source -I..\..\..\..\..\User\inc -I..\..\..\..\..\uCGUI\Config -I..\..\..\..\..\uCGUI\GUIDemo -I..\..\..\..\..\uCGUI\LCDDriver -I..\..\..\..\..\uCGUI\GUI\AntiAlias -I..\..\..\..\..\uCGUI\GUI\ConvertColor -I..\..\..\..\..\uCGUI\GUI\ConvertMono -I..\..\..\..\..\uCGUI\GUI\Core -I..\..\..\..\..\uCGUI\GUI\Font -I..\..\..\..\..\uCGUI\GUI\LCDDriver -I..\..\..\..\..\uCGUI\GUI\MemDev -I..\..\..\..\..\uCGUI\GUI\MultiLayer -I..\..\..\..\..\uCGUI\GUI\Widget -I..\..\..\..\..\uCGUI\GUI\WM -Id:\Keil-stm32\ARM\INC -Id:\Keil-stm32\ARM\INC\ST\STM32F10x -D__MICROLIB --omf_browse=.\rvmdk\guidev_banding.crf ..\..\..\..\..\uCGUI\GUI\MemDev\GUIDEV_Banding.c]
                          THUMB

                          AREA ||.text||, CODE, READONLY, ALIGN=1

                  _Min PROC
;;;53     */
;;;54     static int _Min(int v0, int v1) {
000000  4288              CMP      r0,r1
;;;55       if (v0 <= v1) {
000002  dd00              BLE      |L1.6|
;;;56         return v0;
;;;57       }
;;;58       return v1;
000004  4608              MOV      r0,r1
                  |L1.6|
;;;59     }
000006  4770              BX       lr
;;;60     
                          ENDP

                  GUI_MEMDEV_Draw PROC
;;;75     */
;;;76     int GUI_MEMDEV_Draw(GUI_RECT* pRect, GUI_CALLBACK_VOID_P* pfDraw, void* pData, int NumLines, int Flags) {
000008  e92d4ff8          PUSH     {r3-r11,lr}
00000c  4604              MOV      r4,r0
00000e  f8ddb028          LDR      r11,[sp,#0x28]
000012  4688              MOV      r8,r1
000014  4692              MOV      r10,r2
000016  461f              MOV      r7,r3
;;;77       int x0, y0, x1, y1, xsize, ysize;
;;;78       GUI_MEMDEV_Handle hMD;
;;;79       if (pRect) {
000018  b304              CBZ      r4,|L1.92|
;;;80         x0 = (pRect->x0 < 0) ? 0 : pRect->x0;
00001a  f9b49000          LDRSH    r9,[r4,#0]
00001e  f1b90f00          CMP      r9,#0
000022  da01              BGE      |L1.40|
000024  f04f0900          MOV      r9,#0
                  |L1.40|
;;;81         y0 = (pRect->y0 < 0) ? 0 : pRect->y0;
000028  f9b46002          LDRSH    r6,[r4,#2]
00002c  2e00              CMP      r6,#0
00002e  da00              BGE      |L1.50|
000030  2600              MOVS     r6,#0
                  |L1.50|
;;;82         #if GUI_NUM_LAYERS == 1
;;;83           x1 = _Min(pRect->x1, LCD_GET_XSIZE() - 1);
000032  f7fffffe          BL       LCD_GetXSize
000036  1e41              SUBS     r1,r0,#1
000038  f9b40004          LDRSH    r0,[r4,#4]
00003c  f7fffffe          BL       _Min
000040  4605              MOV      r5,r0
;;;84           y1 = _Min(pRect->y1, LCD_GET_YSIZE() - 1);
000042  f7fffffe          BL       LCD_GetYSize
000046  1e41              SUBS     r1,r0,#1
000048  f9b40006          LDRSH    r0,[r4,#6]
00004c  f7fffffe          BL       _Min
;;;85         #else
;;;86           x1 = _Min(pRect->x1, LCD_GetXSizeEx(GUI_Context.SelLayer) - 1);
;;;87           y1 = _Min(pRect->y1, LCD_GetYSizeEx(GUI_Context.SelLayer) - 1);
;;;88         #endif
;;;89         xsize = x1 - x0 + 1;
000050  eba50109          SUB      r1,r5,r9
000054  1c4c              ADDS     r4,r1,#1
;;;90         ysize = y1 - y0 + 1;
000056  1b80              SUBS     r0,r0,r6
000058  1c45              ADDS     r5,r0,#1
00005a  e008              B        |L1.110|
                  |L1.92|
;;;91       } else {
;;;92         x0 = 0;
00005c  f04f0900          MOV      r9,#0
;;;93         y0 = 0;
000060  2600              MOVS     r6,#0
;;;94         #if GUI_NUM_LAYERS == 1
;;;95           xsize = LCD_GET_XSIZE();
000062  f7fffffe          BL       LCD_GetXSize
000066  4604              MOV      r4,r0
;;;96           ysize = LCD_GET_YSIZE();
000068  f7fffffe          BL       LCD_GetYSize
00006c  4605              MOV      r5,r0
                  |L1.110|
;;;97         #else
;;;98           xsize = LCD_GetXSizeEx(GUI_Context.SelLayer);
;;;99           ysize = LCD_GetYSizeEx(GUI_Context.SelLayer);
;;;100        #endif
;;;101      }
;;;102      if (NumLines == 0) {
00006e  b907              CBNZ     r7,|L1.114|
;;;103        NumLines = -ysize;   /* Request <ysize> lines ... Less is o.k. */
000070  426f              RSBS     r7,r5,#0
                  |L1.114|
;;;104      }
;;;105      if ((xsize <= 0) || (ysize <= 0))
000072  2c00              CMP      r4,#0
000074  dd01              BLE      |L1.122|
000076  2d00              CMP      r5,#0
000078  dc02              BGT      |L1.128|
                  |L1.122|
;;;106        return 0;           /* Nothing to do ... */
00007a  2000              MOVS     r0,#0
;;;107    /* Create memory device */
;;;108      hMD = GUI_MEMDEV_CreateEx(x0, y0, xsize, NumLines, Flags);
;;;109      if (!hMD) {
;;;110        GUI_DEBUG_ERROROUT("GUI_MEMDEV_Draw() Not enough memory ...");            /* Not enough memory ! */
;;;111        pfDraw(pData);
;;;112        return 1;
;;;113      }
;;;114      NumLines = GUI_MEMDEV_GetYSize(hMD);
;;;115      GUI_MEMDEV_Select(hMD);
;;;116    /* Start drawing ... */
;;;117      {
;;;118        int i;
;;;119        for (i = 0; i < ysize; i += NumLines) {
;;;120          int RemLines = ysize - i;
;;;121          if (RemLines < NumLines) {
;;;122            GUI_MEMDEV_ReduceYSize(hMD, RemLines);
;;;123          }
;;;124          if (i) {
;;;125            GUI_MEMDEV_SetOrg(hMD, x0, y0 + i);
;;;126            GUI_MEMDEV_Clear(hMD);
;;;127          }
;;;128          pfDraw(pData);
;;;129          GUI_MEMDEV_CopyToLCD(hMD);
;;;130        }
;;;131      }
;;;132      GUI_MEMDEV_Delete(hMD);
;;;133      GUI_MEMDEV_Select(0);
;;;134      return 0;             /* Success ! */
;;;135    }
00007c  e8bd8ff8          POP      {r3-r11,pc}
                  |L1.128|
000080  463b              MOV      r3,r7                 ;108
000082  4622              MOV      r2,r4                 ;108
000084  4631              MOV      r1,r6                 ;108
000086  4648              MOV      r0,r9                 ;108
000088  f8cdb000          STR      r11,[sp,#0]           ;108
00008c  f7fffffe          BL       GUI_MEMDEV_CreateEx
000090  4683              MOV      r11,r0                ;108
000092  f1bb0f00          CMP      r11,#0                ;109
000096  d027              BEQ      |L1.232|
000098  4658              MOV      r0,r11                ;114
00009a  f7fffffe          BL       GUI_MEMDEV_GetYSize
00009e  4607              MOV      r7,r0                 ;114
0000a0  4658              MOV      r0,r11                ;115
0000a2  f7fffffe          BL       GUI_MEMDEV_Select
0000a6  2400              MOVS     r4,#0                 ;119
                  |L1.168|
0000a8  1b29              SUBS     r1,r5,r4              ;120
0000aa  42b9              CMP      r1,r7                 ;121
0000ac  da02              BGE      |L1.180|
0000ae  4658              MOV      r0,r11                ;122
0000b0  f7fffffe          BL       GUI_MEMDEV_ReduceYSize
                  |L1.180|
0000b4  b13c              CBZ      r4,|L1.198|
0000b6  1932              ADDS     r2,r6,r4              ;125
0000b8  4649              MOV      r1,r9                 ;125
0000ba  4658              MOV      r0,r11                ;125
0000bc  f7fffffe          BL       GUI_MEMDEV_SetOrg
0000c0  4658              MOV      r0,r11                ;126
0000c2  f7fffffe          BL       GUI_MEMDEV_Clear
                  |L1.198|
0000c6  4650              MOV      r0,r10                ;128
0000c8  47c0              BLX      r8                    ;128
0000ca  4658              MOV      r0,r11                ;129
0000cc  f7fffffe          BL       GUI_MEMDEV_CopyToLCD
0000d0  443c              ADD      r4,r4,r7              ;119
0000d2  42ac              CMP      r4,r5                 ;119
0000d4  dbe8              BLT      |L1.168|
0000d6  4658              MOV      r0,r11                ;132
0000d8  f7fffffe          BL       GUI_MEMDEV_Delete
0000dc  2000              MOVS     r0,#0                 ;133
0000de  f7fffffe          BL       GUI_MEMDEV_Select
0000e2  2000              MOVS     r0,#0                 ;134
0000e4  e8bd8ff8          POP      {r3-r11,pc}
                  |L1.232|
0000e8  4650              MOV      r0,r10                ;111
0000ea  47c0              BLX      r8                    ;111
0000ec  2001              MOVS     r0,#1                 ;112
0000ee  e8bd8ff8          POP      {r3-r11,pc}
;;;136    
                          ENDP

