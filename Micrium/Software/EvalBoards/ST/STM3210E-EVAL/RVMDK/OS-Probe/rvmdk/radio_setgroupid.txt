; generated by ARM C/C++ Compiler, 4.1 [Build 481]
; commandline ArmCC [--debug -c --asm --interleave -o.\rvmdk\radio_setgroupid.o --depend=.\rvmdk\radio_setgroupid.d --cpu=Cortex-M3 --apcs=interwork -O1 -Otime -I. -I..\BSP -I..\..\..\..\..\uCOS-II\Ports\arm-cortex-m3\Generic\RealView -I..\..\..\..\..\uCOS-II\Source -I..\..\..\..\..\CPU\ST\STM32\inc -I..\..\..\..\..\uC-CPU -I..\..\..\..\..\uC-CPU\Arm-Cortex-M3\RealView -I..\..\..\..\..\uC-LIB -I..\..\..\..\..\uC-Probe\Target\Plugins\uCOS-II -I..\..\..\..\..\uC-Probe\Target\Communication\Generic\Source -I..\..\..\..\..\uC-Probe\Target\Communication\Generic\RS-232\Ports\ST\STM32 -I..\..\..\..\..\uC-Probe\Target\Communication\Generic\RS-232\Source -I..\..\..\..\..\User\inc -I..\..\..\..\..\uCGUI\Config -I..\..\..\..\..\uCGUI\GUIDemo -I..\..\..\..\..\uCGUI\LCDDriver -I..\..\..\..\..\uCGUI\GUI\AntiAlias -I..\..\..\..\..\uCGUI\GUI\ConvertColor -I..\..\..\..\..\uCGUI\GUI\ConvertMono -I..\..\..\..\..\uCGUI\GUI\Core -I..\..\..\..\..\uCGUI\GUI\Font -I..\..\..\..\..\uCGUI\GUI\LCDDriver -I..\..\..\..\..\uCGUI\GUI\MemDev -I..\..\..\..\..\uCGUI\GUI\MultiLayer -I..\..\..\..\..\uCGUI\GUI\Widget -I..\..\..\..\..\uCGUI\GUI\WM -Id:\Keil-stm32\ARM\INC -Id:\Keil-stm32\ARM\INC\ST\STM32F10x -D__MICROLIB --omf_browse=.\rvmdk\radio_setgroupid.crf ..\..\..\..\..\uCGUI\GUI\Widget\RADIO_SetGroupId.c]
                          THUMB

                          AREA ||.text||, CODE, READONLY, ALIGN=2

                  _SetValue PROC
;;;35     */
;;;36     static void _SetValue(RADIO_Handle hObj, int v) {
000000  b570              PUSH     {r4-r6,lr}
000002  4605              MOV      r5,r0
000004  460c              MOV      r4,r1
;;;37       RADIO_Obj* pObj;
;;;38       pObj = RADIO_H2P(hObj);
000006  4628              MOV      r0,r5
000008  f7fffffe          BL       GUI_ALLOC_h2p
;;;39       RADIO__SetValue(hObj, pObj, v);
00000c  4601              MOV      r1,r0
00000e  4622              MOV      r2,r4
000010  4628              MOV      r0,r5
000012  e8bd4070          POP      {r4-r6,lr}
000016  f7ffbffe          B.W      RADIO__SetValue
;;;40     }
;;;41     
                          ENDP

                  _IsInGroup PROC
;;;45     */
;;;46     static int _IsInGroup(WM_HWIN hWin, U8 GroupId) {
00001a  b510              PUSH     {r4,lr}
00001c  b084              SUB      sp,sp,#0x10
00001e  460c              MOV      r4,r1
;;;47       if (GroupId) {
000020  b16c              CBZ      r4,|L1.62|
;;;48         WM_MESSAGE Msg;
;;;49         Msg.MsgId = WM_GET_RADIOGROUP;
000022  212b              MOVS     r1,#0x2b
000024  9101              STR      r1,[sp,#4]
;;;50         WM__SendMessage(hWin, &Msg);
000026  a901              ADD      r1,sp,#4
000028  f7fffffe          BL       WM__SendMessage
;;;51         return (Msg.Data.v == GroupId);
00002c  9803              LDR      r0,[sp,#0xc]
00002e  42a0              CMP      r0,r4
000030  d102              BNE      |L1.56|
;;;52       }
;;;53       return 0;
;;;54     }
000032  b004              ADD      sp,sp,#0x10
000034  2001              MOVS     r0,#1                 ;51
000036  bd10              POP      {r4,pc}
                  |L1.56|
000038  b004              ADD      sp,sp,#0x10
00003a  2000              MOVS     r0,#0                 ;51
00003c  bd10              POP      {r4,pc}
                  |L1.62|
00003e  b004              ADD      sp,sp,#0x10
000040  2000              MOVS     r0,#0                 ;53
000042  bd10              POP      {r4,pc}
;;;55     
                          ENDP

                  _GetPrevInGroup PROC
;;;59     */
;;;60     static WM_HWIN _GetPrevInGroup(WM_HWIN hWin, U8 GroupId) {
000044  b570              PUSH     {r4-r6,lr}
000046  460d              MOV      r5,r1
;;;61       for (hWin = WM__GetPrevSibling(hWin); hWin; hWin = WM__GetPrevSibling(hWin)) {
000048  f7fffffe          BL       WM__GetPrevSibling
00004c  4604              MOV      r4,r0
00004e  b164              CBZ      r4,|L1.106|
                  |L1.80|
;;;62         if (_IsInGroup(hWin, GroupId)) {
000050  4629              MOV      r1,r5
000052  4620              MOV      r0,r4
000054  f7fffffe          BL       _IsInGroup
000058  b108              CBZ      r0,|L1.94|
;;;63           return hWin;
00005a  4620              MOV      r0,r4
;;;64         }
;;;65       }
;;;66       return 0;
;;;67     }
00005c  bd70              POP      {r4-r6,pc}
                  |L1.94|
00005e  4620              MOV      r0,r4                 ;61
000060  f7fffffe          BL       WM__GetPrevSibling
000064  4604              MOV      r4,r0                 ;61
000066  2c00              CMP      r4,#0                 ;61
000068  d1f2              BNE      |L1.80|
                  |L1.106|
00006a  2000              MOVS     r0,#0                 ;66
00006c  bd70              POP      {r4-r6,pc}
;;;68     
                          ENDP

                  _GetNextInGroup PROC
;;;72     */
;;;73     static WM_HWIN _GetNextInGroup(WM_HWIN hWin, U8 GroupId) {
00006e  b570              PUSH     {r4-r6,lr}
000070  4604              MOV      r4,r0
000072  460d              MOV      r5,r1
;;;74       for (; hWin; hWin = WM_GetNextSibling(hWin)) {
000074  b164              CBZ      r4,|L1.144|
                  |L1.118|
;;;75         if (_IsInGroup(hWin, GroupId)) {
000076  4629              MOV      r1,r5
000078  4620              MOV      r0,r4
00007a  f7fffffe          BL       _IsInGroup
00007e  b108              CBZ      r0,|L1.132|
;;;76           return hWin;
000080  4620              MOV      r0,r4
;;;77         }
;;;78       }
;;;79       return 0;
;;;80     }
000082  bd70              POP      {r4-r6,pc}
                  |L1.132|
000084  4620              MOV      r0,r4                 ;74
000086  f7fffffe          BL       WM_GetNextSibling
00008a  4604              MOV      r4,r0                 ;74
00008c  2c00              CMP      r4,#0                 ;74
00008e  d1f2              BNE      |L1.118|
                  |L1.144|
000090  2000              MOVS     r0,#0                 ;79
000092  bd70              POP      {r4-r6,pc}
;;;81     
                          ENDP

                  _ClearSelection PROC
;;;85     */
;;;86     static void _ClearSelection(RADIO_Handle hObj, U8 GroupId) {
000094  e92d41f0          PUSH     {r4-r8,lr}
000098  4605              MOV      r5,r0
00009a  460e              MOV      r6,r1
;;;87       WM_HWIN hWin;
;;;88       WM_Obj* pWin;
;;;89       for (hWin = WM__GetFirstSibling(hObj); hWin; hWin = pWin->hNext) {
00009c  4628              MOV      r0,r5
00009e  f7fffffe          BL       WM__GetFirstSibling
0000a2  4604              MOV      r4,r0
0000a4  2c00              CMP      r4,#0
0000a6  d014              BEQ      |L1.210|
                  |L1.168|
;;;90         pWin = WM_H2P(hWin);
0000a8  4620              MOV      r0,r4
0000aa  f7fffffe          BL       GUI_ALLOC_h2p
0000ae  4607              MOV      r7,r0
;;;91         if (hWin != hObj) {
0000b0  42ac              CMP      r4,r5
0000b2  d00a              BEQ      |L1.202|
;;;92           if (_IsInGroup(hWin, GroupId)) {
0000b4  4631              MOV      r1,r6
0000b6  4620              MOV      r0,r4
0000b8  f7fffffe          BL       _IsInGroup
0000bc  b128              CBZ      r0,|L1.202|
;;;93             RADIO__SetValue(hWin, (RADIO_Obj*)pWin, -1);
0000be  f04f32ff          MOV      r2,#0xffffffff
0000c2  4639              MOV      r1,r7
0000c4  4620              MOV      r0,r4
0000c6  f7fffffe          BL       RADIO__SetValue
                  |L1.202|
0000ca  f9b7401a          LDRSH    r4,[r7,#0x1a]         ;89
0000ce  2c00              CMP      r4,#0                 ;89
0000d0  d1ea              BNE      |L1.168|
                  |L1.210|
;;;94           }
;;;95         }
;;;96       }
;;;97     }
0000d2  e8bd81f0          POP      {r4-r8,pc}
;;;98     
                          ENDP

                  _HandleSetValue PROC
;;;102    */
;;;103    static void _HandleSetValue(RADIO_Handle hObj, RADIO_Obj* pObj, int v) {
0000d6  b570              PUSH     {r4-r6,lr}
0000d8  4606              MOV      r6,r0
0000da  460c              MOV      r4,r1
0000dc  4615              MOV      r5,r2
;;;104      if (v < 0) {
0000de  2d00              CMP      r5,#0
0000e0  da17              BGE      |L1.274|
;;;105        WM_HWIN hWin = _GetPrevInGroup(hObj, pObj->GroupId);
0000e2  f8941050          LDRB     r1,[r4,#0x50]
0000e6  4630              MOV      r0,r6
0000e8  f7fffffe          BL       _GetPrevInGroup
0000ec  4605              MOV      r5,r0
;;;106        if (hWin) {
0000ee  2d00              CMP      r5,#0
0000f0  d03b              BEQ      |L1.362|
;;;107          WM_SetFocus(hWin);
0000f2  4628              MOV      r0,r5
0000f4  f7fffffe          BL       WM_SetFocus
;;;108          _SetValue(hWin, 0x7FFF);
0000f8  f64771ff          MOV      r1,#0x7fff
0000fc  4628              MOV      r0,r5
0000fe  f7fffffe          BL       _SetValue
;;;109          RADIO__SetValue(hObj, pObj, -1);
000102  4621              MOV      r1,r4
000104  4630              MOV      r0,r6
000106  e8bd4070          POP      {r4-r6,lr}
00010a  f04f32ff          MOV      r2,#0xffffffff
00010e  f7ffbffe          B.W      RADIO__SetValue
                  |L1.274|
;;;110        }
;;;111      } else if (v >= pObj->NumItems) {
000112  f8b4004e          LDRH     r0,[r4,#0x4e]
000116  42a8              CMP      r0,r5
000118  dc17              BGT      |L1.330|
;;;112        WM_HWIN hWin = _GetNextInGroup(pObj->Widget.Win.hNext, pObj->GroupId);
00011a  f8941050          LDRB     r1,[r4,#0x50]
00011e  f9b4001a          LDRSH    r0,[r4,#0x1a]
000122  f7fffffe          BL       _GetNextInGroup
000126  4605              MOV      r5,r0
;;;113        if (hWin) {
000128  2d00              CMP      r5,#0
00012a  d01e              BEQ      |L1.362|
;;;114          WM_SetFocus(hWin);
00012c  4628              MOV      r0,r5
00012e  f7fffffe          BL       WM_SetFocus
;;;115          _SetValue(hWin, 0);
000132  2100              MOVS     r1,#0
000134  4628              MOV      r0,r5
000136  f7fffffe          BL       _SetValue
;;;116          RADIO__SetValue(hObj, pObj, -1);
00013a  4621              MOV      r1,r4
00013c  4630              MOV      r0,r6
00013e  e8bd4070          POP      {r4-r6,lr}
000142  f04f32ff          MOV      r2,#0xffffffff
000146  f7ffbffe          B.W      RADIO__SetValue
                  |L1.330|
;;;117        }
;;;118      } else {
;;;119        if (pObj->Sel != v) {
00014a  f9b40048          LDRSH    r0,[r4,#0x48]
00014e  42a8              CMP      r0,r5
000150  d00b              BEQ      |L1.362|
;;;120          _ClearSelection(hObj, pObj->GroupId);
000152  f8941050          LDRB     r1,[r4,#0x50]
000156  4630              MOV      r0,r6
000158  f7fffffe          BL       _ClearSelection
;;;121          RADIO__SetValue(hObj, pObj, v);
00015c  462a              MOV      r2,r5
00015e  4621              MOV      r1,r4
000160  4630              MOV      r0,r6
000162  e8bd4070          POP      {r4-r6,lr}
000166  f7ffbffe          B.W      RADIO__SetValue
                  |L1.362|
;;;122        }
;;;123      }
;;;124    }
00016a  bd70              POP      {r4-r6,pc}
;;;125    
                          ENDP

                  RADIO_SetGroupId PROC
;;;135    */
;;;136    void RADIO_SetGroupId(RADIO_Handle hObj, U8 NewGroupId) {
00016c  e92d41f0          PUSH     {r4-r8,lr}
000170  4607              MOV      r7,r0
000172  460d              MOV      r5,r1
;;;137      if (hObj) {
000174  2f00              CMP      r7,#0
000176  d03e              BEQ      |L1.502|
;;;138        RADIO_Obj* pObj;
;;;139        U8 OldGroupId;
;;;140        WM_LOCK();
000178  f7fffffe          BL       GUI_Lock
;;;141        pObj = RADIO_H2P(hObj);
00017c  4638              MOV      r0,r7
00017e  f7fffffe          BL       GUI_ALLOC_h2p
000182  4604              MOV      r4,r0
;;;142        OldGroupId = pObj->GroupId;
000184  f8946050          LDRB     r6,[r4,#0x50]
;;;143        if (NewGroupId != OldGroupId) {
000188  42b5              CMP      r5,r6
00018a  d030              BEQ      |L1.494|
;;;144          WM_HWIN hFirst;
;;;145          hFirst = WM__GetFirstSibling(hObj);
00018c  4638              MOV      r0,r7
00018e  f7fffffe          BL       WM__GetFirstSibling
000192  4680              MOV      r8,r0
;;;146          /* Set function pointer if necessary */
;;;147          if (NewGroupId && (RADIO__pfHandleSetValue == NULL)) {
000194  b125              CBZ      r5,|L1.416|
000196  4819              LDR      r0,|L1.508|
000198  6801              LDR      r1,[r0,#0]  ; RADIO__pfHandleSetValue
00019a  b909              CBNZ     r1,|L1.416|
;;;148            RADIO__pfHandleSetValue = _HandleSetValue;
00019c  4918              LDR      r1,|L1.512|
00019e  6001              STR      r1,[r0,#0]  ; RADIO__pfHandleSetValue
                  |L1.416|
;;;149          }
;;;150          /* Pass our selection, if we have one, to another radio button in */
;;;151          /* our old group. So the group have a valid selection when we leave it. */
;;;152          if (OldGroupId && (pObj->Sel >= 0)) {
0001a0  b176              CBZ      r6,|L1.448|
0001a2  f9b40048          LDRSH    r0,[r4,#0x48]
0001a6  2800              CMP      r0,#0
0001a8  db0a              BLT      |L1.448|
;;;153            WM_HWIN hWin;
;;;154            pObj->GroupId = 0; /* Leave group first, so _GetNextInGroup() could */
0001aa  2000              MOVS     r0,#0
0001ac  f8840050          STRB     r0,[r4,#0x50]
;;;155                               /* not find a handle to our own window. */
;;;156            hWin = _GetNextInGroup(hFirst, OldGroupId);
0001b0  4631              MOV      r1,r6
0001b2  4640              MOV      r0,r8
0001b4  f7fffffe          BL       _GetNextInGroup
;;;157            if (hWin) {
0001b8  b110              CBZ      r0,|L1.448|
;;;158              _SetValue(hWin, 0);
0001ba  2100              MOVS     r1,#0
0001bc  f7fffffe          BL       _SetValue
                  |L1.448|
;;;159            }
;;;160          }
;;;161          /* Make sure we have a valid selection according to our new group */
;;;162          if (_GetNextInGroup(hFirst, NewGroupId) != 0) {
0001c0  4629              MOV      r1,r5
0001c2  4640              MOV      r0,r8
0001c4  f7fffffe          BL       _GetNextInGroup
0001c8  b130              CBZ      r0,|L1.472|
;;;163            /* Join an existing group with an already valid selection, so clear our own one */
;;;164            RADIO__SetValue(hObj, pObj, -1);
0001ca  f04f32ff          MOV      r2,#0xffffffff
0001ce  4621              MOV      r1,r4
0001d0  4638              MOV      r0,r7
0001d2  f7fffffe          BL       RADIO__SetValue
0001d6  e008              B        |L1.490|
                  |L1.472|
;;;165          } else if (pObj->Sel < 0) {
0001d8  f9b40048          LDRSH    r0,[r4,#0x48]
0001dc  2800              CMP      r0,#0
0001de  da04              BGE      |L1.490|
;;;166            /* We are the first window in group, so we must have a valid selection at our own. */
;;;167            RADIO__SetValue(hObj, pObj, 0);
0001e0  2200              MOVS     r2,#0
0001e2  4621              MOV      r1,r4
0001e4  4638              MOV      r0,r7
0001e6  f7fffffe          BL       RADIO__SetValue
                  |L1.490|
;;;168          }
;;;169          /* Change the group */
;;;170          pObj->GroupId = NewGroupId;
0001ea  f8845050          STRB     r5,[r4,#0x50]
                  |L1.494|
;;;171        }
;;;172        WM_UNLOCK();
0001ee  e8bd41f0          POP      {r4-r8,lr}
0001f2  f7ffbffe          B.W      GUI_Unlock
                  |L1.502|
;;;173      }
;;;174    }
0001f6  e8bd81f0          POP      {r4-r8,pc}
;;;175    
                          ENDP

0001fa  0000              DCW      0x0000
                  |L1.508|
                          DCD      RADIO__pfHandleSetValue
                  |L1.512|
                          DCD      _HandleSetValue
