; generated by ARM C/C++ Compiler, 4.1 [Build 481]
; commandline ArmCC [--debug -c --asm --interleave -o.\rvmdk\graph_data_yt.o --depend=.\rvmdk\graph_data_yt.d --cpu=Cortex-M3 --apcs=interwork -O1 -Otime -I. -I..\BSP -I..\..\..\..\..\uCOS-II\Ports\arm-cortex-m3\Generic\RealView -I..\..\..\..\..\uCOS-II\Source -I..\..\..\..\..\CPU\ST\STM32\inc -I..\..\..\..\..\uC-CPU -I..\..\..\..\..\uC-CPU\Arm-Cortex-M3\RealView -I..\..\..\..\..\uC-LIB -I..\..\..\..\..\uC-Probe\Target\Plugins\uCOS-II -I..\..\..\..\..\uC-Probe\Target\Communication\Generic\Source -I..\..\..\..\..\uC-Probe\Target\Communication\Generic\RS-232\Ports\ST\STM32 -I..\..\..\..\..\uC-Probe\Target\Communication\Generic\RS-232\Source -I..\..\..\..\..\User\inc -I..\..\..\..\..\uCGUI\Config -I..\..\..\..\..\uCGUI\GUIDemo -I..\..\..\..\..\uCGUI\LCDDriver -I..\..\..\..\..\uCGUI\GUI\AntiAlias -I..\..\..\..\..\uCGUI\GUI\ConvertColor -I..\..\..\..\..\uCGUI\GUI\ConvertMono -I..\..\..\..\..\uCGUI\GUI\Core -I..\..\..\..\..\uCGUI\GUI\Font -I..\..\..\..\..\uCGUI\GUI\LCDDriver -I..\..\..\..\..\uCGUI\GUI\MemDev -I..\..\..\..\..\uCGUI\GUI\MultiLayer -I..\..\..\..\..\uCGUI\GUI\Widget -I..\..\..\..\..\uCGUI\GUI\WM -Id:\Keil-stm32\ARM\INC -Id:\Keil-stm32\ARM\INC\ST\STM32F10x -D__MICROLIB --omf_browse=.\rvmdk\graph_data_yt.crf ..\..\..\..\..\uCGUI\GUI\Widget\GRAPH_DATA_YT.c]
                          THUMB

                          AREA ||.text||, CODE, READONLY, ALIGN=2

                  _OnPaint PROC
;;;47     */
;;;48     static void _OnPaint(GRAPH_DATA_Handle hDataObj, GUI_RECT * pRect) {
000000  e92d47f0          PUSH     {r4-r10,lr}
000004  b084              SUB      sp,sp,#0x10
;;;49       int xPos, yPos;
;;;50       I16               * pData;
;;;51       GRAPH_OBJ         * pObj;
;;;52       GRAPH_DATA_YT_OBJ * pDataYtObj;
;;;53       GUI_USE_PARA(pRect);
;;;54       pDataYtObj = (GRAPH_DATA_YT_OBJ *)GUI_ALLOC_h2p(hDataObj);
000006  f7fffffe          BL       GUI_ALLOC_h2p
00000a  4604              MOV      r4,r0
;;;55       pData = (I16 *)GUI_ALLOC_h2p(pDataYtObj->hData);
00000c  f9b40020          LDRSH    r0,[r4,#0x20]
000010  f7fffffe          BL       GUI_ALLOC_h2p
000014  4680              MOV      r8,r0
;;;56       if (pData) {
000016  f1b80f00          CMP      r8,#0
00001a  d04e              BEQ      |L1.186|
;;;57         GUI_RECT Rect;
;;;58         int NumItems, NumVisItems, BorderL, BorderT, BorderR, BorderB, xSizeWin;
;;;59         pObj = GRAPH_H2P(pDataYtObj->GraphDataObj.PaintObj.hGraph);
00001c  f9b40008          LDRSH    r0,[r4,#8]
000020  f7fffffe          BL       GUI_ALLOC_h2p
000024  4606              MOV      r6,r0
;;;60         BorderL = pObj->Props.BorderL;
000026  f8d6a048          LDR      r10,[r6,#0x48]
;;;61         BorderT = pObj->Props.BorderT;
00002a  6cf7              LDR      r7,[r6,#0x4c]
;;;62         BorderR = pObj->Props.BorderR;
00002c  f8d69050          LDR      r9,[r6,#0x50]
;;;63         BorderB = pObj->Props.BorderB;
000030  6d75              LDR      r5,[r6,#0x54]
;;;64         WM_GetInsideRectExScrollbar(pDataYtObj->GraphDataObj.PaintObj.hGraph, &Rect);
000032  f9b40008          LDRSH    r0,[r4,#8]
000036  a902              ADD      r1,sp,#8
000038  f7fffffe          BL       WM_GetInsideRectExScrollbar
;;;65         Rect.x0 += BorderL;
00003c  f8bd0008          LDRH     r0,[sp,#8]
000040  4450              ADD      r0,r0,r10
000042  b200              SXTH     r0,r0
000044  f8ad0008          STRH     r0,[sp,#8]
;;;66         Rect.y0 += BorderT;
000048  f8bd100a          LDRH     r1,[sp,#0xa]
00004c  4439              ADD      r1,r1,r7
00004e  f8ad100a          STRH     r1,[sp,#0xa]
;;;67         Rect.x1 -= BorderR;
000052  f8bd100c          LDRH     r1,[sp,#0xc]
000056  eba10109          SUB      r1,r1,r9
00005a  b20a              SXTH     r2,r1
00005c  f8ad200c          STRH     r2,[sp,#0xc]
;;;68         Rect.y1 -= BorderB;
000060  f8bd100e          LDRH     r1,[sp,#0xe]
000064  1b49              SUBS     r1,r1,r5
000066  fa0ffc81          SXTH     r12,r1
00006a  f8adc00e          STRH     r12,[sp,#0xe]
;;;69         NumItems = pDataYtObj->GraphDataObj.NumItems;
00006e  68e1              LDR      r1,[r4,#0xc]
;;;70         xSizeWin = Rect.x1 - Rect.x0 + 1;
000070  1a13              SUBS     r3,r2,r0
000072  1c5b              ADDS     r3,r3,#1
;;;71         yPos     = Rect.y1                        /* Bottom of data area */
000074  69e5              LDR      r5,[r4,#0x1c]
000076  ebac0c05          SUB      r12,r12,r5
00007a  6f75              LDR      r5,[r6,#0x74]
00007c  eb0c0905          ADD      r9,r12,r5
;;;72                  - pDataYtObj->GraphDataObj.OffY  /* - Y-offset of data object */
;;;73                  + pObj->ScrollStateV.v;          /* + Y-offset of graph object */
;;;74         if (pDataYtObj->Align == GRAPH_ALIGN_LEFT) {
000080  f8d4c024          LDR      r12,[r4,#0x24]
000084  f1bc0f01          CMP      r12,#1
000088  d01a              BEQ      |L1.192|
;;;75           xPos = Rect.x0;
;;;76           NumVisItems = NumItems - pDataYtObj->GraphDataObj.OffX;
;;;77           if (pDataYtObj->GraphDataObj.OffX < NumItems) {
;;;78             pData += pDataYtObj->GraphDataObj.OffX + pObj->ScrollStateH.v;
;;;79           }
;;;80           if (NumVisItems > xSizeWin) {
;;;81             NumVisItems = xSizeWin;
;;;82           }
;;;83         } else {
;;;84           NumVisItems = NumItems - pObj->ScrollStateH.v;
00008a  f8d63080          LDR      r3,[r6,#0x80]
00008e  1acd              SUBS     r5,r1,r3
;;;85           xPos = Rect.x1 - NumVisItems;
000090  1b57              SUBS     r7,r2,r5
;;;86           if (Rect.x0 > xPos) {
000092  42b8              CMP      r0,r7
000094  dd04              BLE      |L1.160|
;;;87             int Diff = Rect.x0 - xPos;
000096  1bc0              SUBS     r0,r0,r7
;;;88             xPos        += Diff;
000098  4407              ADD      r7,r7,r0
;;;89             pData       += Diff;
00009a  eb080840          ADD      r8,r8,r0,LSL #1
;;;90             NumVisItems -= Diff;
00009e  1a2d              SUBS     r5,r5,r0
                  |L1.160|
;;;91           }
;;;92         }
;;;93         GUI_SetColor(pDataYtObj->GraphDataObj.Color);
0000a0  6960              LDR      r0,[r4,#0x14]
0000a2  f7fffffe          BL       GUI_SetColor
;;;94         GUI_DrawGraphEx(pData, NumVisItems, xPos, yPos, -1, 1);
0000a6  2301              MOVS     r3,#1
0000a8  1e9a              SUBS     r2,r3,#2
0000aa  9301              STR      r3,[sp,#4]
0000ac  9200              STR      r2,[sp,#0]
0000ae  464b              MOV      r3,r9
0000b0  463a              MOV      r2,r7
0000b2  4629              MOV      r1,r5
0000b4  4640              MOV      r0,r8
0000b6  f7fffffe          BL       GUI_DrawGraphEx
                  |L1.186|
;;;95       }
;;;96     }
0000ba  b004              ADD      sp,sp,#0x10
0000bc  e8bd87f0          POP      {r4-r10,pc}
                  |L1.192|
0000c0  4607              MOV      r7,r0                 ;75
0000c2  69a0              LDR      r0,[r4,#0x18]         ;76
0000c4  1a0d              SUBS     r5,r1,r0              ;76
0000c6  4288              CMP      r0,r1                 ;77
0000c8  da04              BGE      |L1.212|
0000ca  f8d61080          LDR      r1,[r6,#0x80]         ;78
0000ce  4408              ADD      r0,r0,r1              ;78
0000d0  eb080840          ADD      r8,r8,r0,LSL #1       ;78
                  |L1.212|
0000d4  429d              CMP      r5,r3                 ;80
0000d6  dde3              BLE      |L1.160|
0000d8  461d              MOV      r5,r3                 ;81
0000da  e7e1              B        |L1.160|
;;;97     
                          ENDP

                  _OnDelete PROC
;;;101    */
;;;102    static void _OnDelete(GRAPH_DATA_Handle hDataObj) {
0000dc  b510              PUSH     {r4,lr}
;;;103      GRAPH_DATA_YT_OBJ * pDataYtObj;
;;;104      pDataYtObj = (GRAPH_DATA_YT_OBJ *)GUI_ALLOC_h2p(hDataObj);
0000de  f7fffffe          BL       GUI_ALLOC_h2p
;;;105      if (pDataYtObj->hData) {
0000e2  f9b00020          LDRSH    r0,[r0,#0x20]
0000e6  2800              CMP      r0,#0
0000e8  d003              BEQ      |L1.242|
;;;106        GUI_ALLOC_Free(pDataYtObj->hData);
0000ea  e8bd4010          POP      {r4,lr}
0000ee  f7ffbffe          B.W      GUI_ALLOC_Free
                  |L1.242|
;;;107      }
;;;108    }
0000f2  bd10              POP      {r4,pc}
;;;109    
                          ENDP

                  _SetOffY PROC
;;;113    */
;;;114    static void _SetOffY(GRAPH_DATA_OBJ * pDataObj, int Value) {
0000f4  2800              CMP      r0,#0
;;;115      if (pDataObj) {
0000f6  d007              BEQ      |L1.264|
;;;116        if (pDataObj->OffY != Value) {
0000f8  69c2              LDR      r2,[r0,#0x1c]
0000fa  428a              CMP      r2,r1
0000fc  d004              BEQ      |L1.264|
;;;117          pDataObj->OffY = Value;
0000fe  61c1              STR      r1,[r0,#0x1c]
;;;118          WM_Invalidate(pDataObj->PaintObj.hGraph);
000100  f9b00008          LDRSH    r0,[r0,#8]
000104  f7ffbffe          B.W      WM_InvalidateWindow
                  |L1.264|
;;;119        }
;;;120      }
;;;121    }
000108  4770              BX       lr
;;;122    
                          ENDP

                  GRAPH_DATA_YT_Create PROC
;;;132    */
;;;133    GRAPH_DATA_Handle GRAPH_DATA_YT_Create(GUI_COLOR Color, unsigned MaxNumItems, I16 * pItems, unsigned NumItems) {
00010a  e92d47f0          PUSH     {r4-r10,lr}
00010e  4607              MOV      r7,r0
000110  460d              MOV      r5,r1
000112  4691              MOV      r9,r2
000114  461c              MOV      r4,r3
;;;134      GRAPH_DATA_Handle  hDataObj;
;;;135      WM_LOCK();
000116  f7fffffe          BL       GUI_Lock
;;;136      hDataObj = GUI_ALLOC_AllocZero(sizeof(GRAPH_DATA_YT_OBJ));
00011a  2028              MOVS     r0,#0x28
00011c  f7fffffe          BL       GUI_ALLOC_AllocZero
000120  4680              MOV      r8,r0
;;;137      if (hDataObj) {
000122  f1b80f00          CMP      r8,#0
000126  d01b              BEQ      |L1.352|
;;;138        GRAPH_DATA_YT_OBJ * pDataYtObj;
;;;139        WM_HMEM             hData;
;;;140        int                 BufferSize;
;;;141        BufferSize = sizeof(I16) * MaxNumItems;
000128  0068              LSLS     r0,r5,#1
;;;142        hData = GUI_ALLOC_AllocZero(BufferSize);
00012a  b200              SXTH     r0,r0
00012c  f7fffffe          BL       GUI_ALLOC_AllocZero
000130  4606              MOV      r6,r0
;;;143        if (hData && pItems && NumItems) {
000132  b156              CBZ      r6,|L1.330|
000134  f1b90f00          CMP      r9,#0
000138  d007              BEQ      |L1.330|
00013a  b134              CBZ      r4,|L1.330|
;;;144          void * p;
;;;145          p = GUI_ALLOC_h2p(hData);
00013c  4630              MOV      r0,r6
00013e  f7fffffe          BL       GUI_ALLOC_h2p
;;;146          memcpy(p, pItems, sizeof(I16) * NumItems);
000142  0062              LSLS     r2,r4,#1
000144  4649              MOV      r1,r9
000146  f7fffffe          BL       __aeabi_memcpy
                  |L1.330|
;;;147        }
;;;148        pDataYtObj = (GRAPH_DATA_YT_OBJ *)GUI_ALLOC_h2p(hDataObj);
00014a  4640              MOV      r0,r8
00014c  f7fffffe          BL       GUI_ALLOC_h2p
;;;149        pDataYtObj->hData = hData;
000150  8406              STRH     r6,[r0,#0x20]
;;;150        pDataYtObj->GraphDataObj.Color               = Color;
000152  6147              STR      r7,[r0,#0x14]
;;;151        pDataYtObj->GraphDataObj.MaxNumItems         = MaxNumItems;
000154  6105              STR      r5,[r0,#0x10]
;;;152        pDataYtObj->GraphDataObj.NumItems            = NumItems;
000156  60c4              STR      r4,[r0,#0xc]
;;;153        pDataYtObj->GraphDataObj.PaintObj.pfOnPaint  = _OnPaint;
000158  4921              LDR      r1,|L1.480|
00015a  6001              STR      r1,[r0,#0]
;;;154        pDataYtObj->GraphDataObj.PaintObj.pfOnDelete = _OnDelete;
00015c  4921              LDR      r1,|L1.484|
00015e  6041              STR      r1,[r0,#4]
                  |L1.352|
;;;155      }
;;;156      WM_UNLOCK();
000160  f7fffffe          BL       GUI_Unlock
;;;157      return hDataObj;
000164  4640              MOV      r0,r8
;;;158    }
000166  e8bd87f0          POP      {r4-r10,pc}
;;;159    
                          ENDP

                  GRAPH_DATA_YT_AddValue PROC
;;;163    */
;;;164    void GRAPH_DATA_YT_AddValue(GRAPH_DATA_Handle hDataObj, I16 Value) {
00016a  b513              PUSH     {r0,r1,r4,lr}
00016c  4604              MOV      r4,r0
;;;165      GRAPH_DATA_YT_OBJ * pDataYtObj;
;;;166      WM_LOCK();
00016e  f7fffffe          BL       GUI_Lock
;;;167      pDataYtObj = (GRAPH_DATA_YT_OBJ *)GUI_ALLOC_h2p(hDataObj);
000172  4620              MOV      r0,r4
000174  f7fffffe          BL       GUI_ALLOC_h2p
000178  4604              MOV      r4,r0
;;;168      if (pDataYtObj) {
00017a  b14c              CBZ      r4,|L1.400|
;;;169        I16 * pData;
;;;170        pData = (I16 *)GUI_ALLOC_h2p(pDataYtObj->hData);
00017c  f9b40020          LDRSH    r0,[r4,#0x20]
000180  f7fffffe          BL       GUI_ALLOC_h2p
;;;171        GRAPH__AddValue(&pDataYtObj->GraphDataObj, pData, &Value, sizeof(I16));
000184  4601              MOV      r1,r0
000186  2302              MOVS     r3,#2
000188  aa01              ADD      r2,sp,#4
00018a  4620              MOV      r0,r4
00018c  f7fffffe          BL       GRAPH__AddValue
                  |L1.400|
;;;172      }
;;;173      WM_UNLOCK();
000190  f7fffffe          BL       GUI_Unlock
;;;174    }
000194  b002              ADD      sp,sp,#8
000196  bd10              POP      {r4,pc}
;;;175    
                          ENDP

                  GRAPH_DATA_YT_SetOffY PROC
;;;179    */
;;;180    void GRAPH_DATA_YT_SetOffY(GRAPH_DATA_Handle hDataObj, int Off) {
000198  b570              PUSH     {r4-r6,lr}
00019a  4605              MOV      r5,r0
00019c  460c              MOV      r4,r1
;;;181      WM_LOCK();
00019e  f7fffffe          BL       GUI_Lock
;;;182      _SetOffY((GRAPH_DATA_OBJ *)GUI_ALLOC_h2p(hDataObj), Off);
0001a2  4628              MOV      r0,r5
0001a4  f7fffffe          BL       GUI_ALLOC_h2p
0001a8  4621              MOV      r1,r4
0001aa  f7fffffe          BL       _SetOffY
;;;183      WM_UNLOCK();
0001ae  e8bd4070          POP      {r4-r6,lr}
0001b2  f7ffbffe          B.W      GUI_Unlock
;;;184    }
;;;185    
                          ENDP

                  GRAPH_DATA_YT_SetAlign PROC
;;;189    */
;;;190    void GRAPH_DATA_YT_SetAlign(GRAPH_DATA_Handle hDataObj, int Value) {
0001b6  b570              PUSH     {r4-r6,lr}
0001b8  4605              MOV      r5,r0
0001ba  460c              MOV      r4,r1
;;;191      GRAPH_DATA_YT_OBJ * pDataYtObj;
;;;192      WM_LOCK();
0001bc  f7fffffe          BL       GUI_Lock
;;;193      pDataYtObj = (GRAPH_DATA_YT_OBJ *)GUI_ALLOC_h2p(hDataObj);
0001c0  4628              MOV      r0,r5
0001c2  f7fffffe          BL       GUI_ALLOC_h2p
;;;194      if (pDataYtObj) {
0001c6  b138              CBZ      r0,|L1.472|
;;;195        if (pDataYtObj->Align != Value) {
0001c8  6a41              LDR      r1,[r0,#0x24]
0001ca  42a1              CMP      r1,r4
0001cc  d004              BEQ      |L1.472|
;;;196          pDataYtObj->Align = Value;
0001ce  6244              STR      r4,[r0,#0x24]
;;;197          WM_Invalidate(pDataYtObj->GraphDataObj.PaintObj.hGraph);
0001d0  f9b00008          LDRSH    r0,[r0,#8]
0001d4  f7fffffe          BL       WM_InvalidateWindow
                  |L1.472|
;;;198        }
;;;199      }
;;;200      WM_UNLOCK();
0001d8  e8bd4070          POP      {r4-r6,lr}
0001dc  f7ffbffe          B.W      GUI_Unlock
;;;201    }
;;;202    
                          ENDP

                  |L1.480|
                          DCD      _OnPaint
                  |L1.484|
                          DCD      _OnDelete
