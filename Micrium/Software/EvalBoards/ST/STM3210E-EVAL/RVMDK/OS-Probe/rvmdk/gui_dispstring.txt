; generated by ARM C/C++ Compiler, 4.1 [Build 481]
; commandline ArmCC [--debug -c --asm --interleave -o.\rvmdk\gui_dispstring.o --depend=.\rvmdk\gui_dispstring.d --cpu=Cortex-M3 --apcs=interwork -O1 -Otime -I. -I..\BSP -I..\..\..\..\..\uCOS-II\Ports\arm-cortex-m3\Generic\RealView -I..\..\..\..\..\uCOS-II\Source -I..\..\..\..\..\CPU\ST\STM32\inc -I..\..\..\..\..\uC-CPU -I..\..\..\..\..\uC-CPU\Arm-Cortex-M3\RealView -I..\..\..\..\..\uC-LIB -I..\..\..\..\..\uC-Probe\Target\Plugins\uCOS-II -I..\..\..\..\..\uC-Probe\Target\Communication\Generic\Source -I..\..\..\..\..\uC-Probe\Target\Communication\Generic\RS-232\Ports\ST\STM32 -I..\..\..\..\..\uC-Probe\Target\Communication\Generic\RS-232\Source -I..\..\..\..\..\User\inc -I..\..\..\..\..\uCGUI\Config -I..\..\..\..\..\uCGUI\GUIDemo -I..\..\..\..\..\uCGUI\LCDDriver -I..\..\..\..\..\uCGUI\GUI\AntiAlias -I..\..\..\..\..\uCGUI\GUI\ConvertColor -I..\..\..\..\..\uCGUI\GUI\ConvertMono -I..\..\..\..\..\uCGUI\GUI\Core -I..\..\..\..\..\uCGUI\GUI\Font -I..\..\..\..\..\uCGUI\GUI\LCDDriver -I..\..\..\..\..\uCGUI\GUI\MemDev -I..\..\..\..\..\uCGUI\GUI\MultiLayer -I..\..\..\..\..\uCGUI\GUI\Widget -I..\..\..\..\..\uCGUI\GUI\WM -Id:\Keil-stm32\ARM\INC -Id:\Keil-stm32\ARM\INC\ST\STM32F10x -D__MICROLIB --omf_browse=.\rvmdk\gui_dispstring.crf ..\..\..\..\..\uCGUI\GUI\Core\GUI_DispString.c]
                          THUMB

                          AREA ||.text||, CODE, READONLY, ALIGN=2

                  GUI_DispString PROC
;;;33     */
;;;34     void GUI_DispString(const char GUI_UNI_PTR *s) {
000000  e92d4ff0          PUSH     {r4-r11,lr}
000004  b083              SUB      sp,sp,#0xc
000006  4604              MOV      r4,r0
;;;35       int xAdjust, yAdjust, xOrg;
;;;36       int FontSizeY;
;;;37       if (!s)
000008  2c00              CMP      r4,#0
00000a  d07a              BEQ      |L1.258|
;;;38         return;
;;;39       GUI_LOCK();
00000c  f7fffffe          BL       GUI_Lock
;;;40       FontSizeY = GUI_GetFontDistY();
000010  f7fffffe          BL       GUI_GetFontDistY
000014  4607              MOV      r7,r0
;;;41       xOrg = GUI_Context.DispPosX;
000016  4e3c              LDR      r6,|L1.264|
000018  f9b65026          LDRSH    r5,[r6,#0x26]  ; GUI_Context
;;;42      /* Adjust vertical position */
;;;43       yAdjust = GUI_GetYAdjust();
00001c  f7fffffe          BL       GUI_GetYAdjust
000020  4682              MOV      r10,r0
;;;44       GUI_Context.DispPosY -= yAdjust;
000022  8d31              LDRH     r1,[r6,#0x28]  ; GUI_Context
000024  eba1000a          SUB      r0,r1,r10
000028  8530              STRH     r0,[r6,#0x28]
;;;45       for (; *s; s++) {
00002a  7820              LDRB     r0,[r4,#0]
00002c  b3f0              CBZ      r0,|L1.172|
;;;46         GUI_RECT r;
;;;47         int LineNumChars = GUI__GetLineNumChars(s, 0x7fff);
;;;48         int xLineSize    = GUI__GetLineDistX(s, LineNumChars);
;;;49       /* Check if x-position needs to be changed due to h-alignment */
;;;50         switch (GUI_Context.TextAlign & GUI_TA_HORIZONTAL) { 
;;;51           case GUI_TA_CENTER: xAdjust = xLineSize / 2; break;
;;;52           case GUI_TA_RIGHT:  xAdjust = xLineSize; break;
;;;53           default:            xAdjust = 0;
;;;54         }
;;;55         r.x0 = GUI_Context.DispPosX -= xAdjust;
;;;56         r.x1 = r.x0 + xLineSize - 1;    
;;;57         r.y0 = GUI_Context.DispPosY;
;;;58         r.y1 = r.y0 + FontSizeY - 1;    
00002e  f1a70801          SUB      r8,r7,#1
;;;59         GUI__DispLine(s, LineNumChars, &r);
;;;60         GUI_Context.DispPosY = r.y0;
;;;61         s += GUI_UC__NumChars2NumBytes(s, LineNumChars);
;;;62         if ((*s == '\n') || (*s == '\r')) {
;;;63           switch (GUI_Context.TextAlign & GUI_TA_HORIZONTAL) { 
;;;64           case GUI_TA_CENTER:
;;;65           case GUI_TA_RIGHT:
;;;66             GUI_Context.DispPosX = xOrg;
000032  fa0ff985          SXTH     r9,r5
                  |L1.54|
000036  f64771ff          MOV      r1,#0x7fff            ;47
00003a  4620              MOV      r0,r4                 ;47
00003c  f7fffffe          BL       GUI__GetLineNumChars
000040  4683              MOV      r11,r0                ;47
000042  4659              MOV      r1,r11                ;48
000044  4620              MOV      r0,r4                 ;48
000046  f7fffffe          BL       GUI__GetLineDistX
00004a  4605              MOV      r5,r0                 ;48
00004c  8e30              LDRH     r0,[r6,#0x30]         ;50  ; GUI_Context
00004e  f0000003          AND      r0,r0,#3              ;50
000052  2801              CMP      r0,#1                 ;50
000054  d03f              BEQ      |L1.214|
000056  2802              CMP      r0,#2                 ;50
000058  d039              BEQ      |L1.206|
00005a  2000              MOVS     r0,#0                 ;53
                  |L1.92|
00005c  8cf1              LDRH     r1,[r6,#0x26]         ;55  ; GUI_Context
00005e  1a08              SUBS     r0,r1,r0              ;55
000060  84f0              STRH     r0,[r6,#0x26]         ;55
000062  f8ad0000          STRH     r0,[sp,#0]            ;55
000066  1e69              SUBS     r1,r5,#1              ;56
000068  4408              ADD      r0,r0,r1              ;56
00006a  f8ad0004          STRH     r0,[sp,#4]            ;56
00006e  8d30              LDRH     r0,[r6,#0x28]         ;57  ; GUI_Context
000070  f8ad0002          STRH     r0,[sp,#2]            ;57
000074  4440              ADD      r0,r0,r8              ;58
000076  f8ad0006          STRH     r0,[sp,#6]            ;58
00007a  466a              MOV      r2,sp                 ;59
00007c  4659              MOV      r1,r11                ;59
00007e  4620              MOV      r0,r4                 ;59
000080  f7fffffe          BL       GUI__DispLine
000084  f8bd0002          LDRH     r0,[sp,#2]            ;60
000088  8530              STRH     r0,[r6,#0x28]         ;60
00008a  4659              MOV      r1,r11                ;61
00008c  4620              MOV      r0,r4                 ;61
00008e  f7fffffe          BL       GUI_UC__NumChars2NumBytes
000092  4420              ADD      r0,r0,r4              ;61
000094  7801              LDRB     r1,[r0,#0]            ;62
000096  290a              CMP      r1,#0xa               ;62
000098  d01f              BEQ      |L1.218|
00009a  290d              CMP      r1,#0xd               ;62
00009c  d01d              BEQ      |L1.218|
;;;67             break;
;;;68           default:
;;;69             GUI_Context.DispPosX = GUI_Context.LBorder;
;;;70             break;
;;;71           }
;;;72           if (*s == '\n')
;;;73             GUI_Context.DispPosY += FontSizeY;
;;;74         } else {
;;;75           GUI_Context.DispPosX = r.x0 + xLineSize;
00009e  f8bd1000          LDRH     r1,[sp,#0]
0000a2  4429              ADD      r1,r1,r5
0000a4  84f1              STRH     r1,[r6,#0x26]
                  |L1.166|
;;;76         }
;;;77         if (*s == 0)    /* end of string (last line) reached ? */
0000a6  7801              LDRB     r1,[r0,#0]
0000a8  b101              CBZ      r1,|L1.172|
0000aa  e000              B        |L1.174|
                  |L1.172|
0000ac  e003              B        |L1.182|
                  |L1.174|
0000ae  1c44              ADDS     r4,r0,#1              ;45
0000b0  7820              LDRB     r0,[r4,#0]            ;45
0000b2  2800              CMP      r0,#0                 ;45
0000b4  d1bf              BNE      |L1.54|
                  |L1.182|
;;;78           break;
;;;79       }
;;;80       GUI_Context.DispPosY += yAdjust;
0000b6  8d30              LDRH     r0,[r6,#0x28]  ; GUI_Context
0000b8  4450              ADD      r0,r0,r10
0000ba  8530              STRH     r0,[r6,#0x28]
;;;81       GUI_Context.TextAlign &= ~GUI_TA_HORIZONTAL;
0000bc  8e30              LDRH     r0,[r6,#0x30]  ; GUI_Context
0000be  f0200003          BIC      r0,r0,#3
0000c2  8630              STRH     r0,[r6,#0x30]
;;;82       GUI_UNLOCK();
0000c4  b003              ADD      sp,sp,#0xc
0000c6  e8bd4ff0          POP      {r4-r11,lr}
0000ca  f7ffbffe          B.W      GUI_Unlock
                  |L1.206|
0000ce  eb0570d5          ADD      r0,r5,r5,LSR #31      ;51
0000d2  1040              ASRS     r0,r0,#1              ;51
0000d4  e7c2              B        |L1.92|
                  |L1.214|
0000d6  4628              MOV      r0,r5                 ;52
0000d8  e7c0              B        |L1.92|
                  |L1.218|
0000da  8e31              LDRH     r1,[r6,#0x30]         ;63  ; GUI_Context
0000dc  f0010103          AND      r1,r1,#3              ;63
0000e0  2901              CMP      r1,#1                 ;63
0000e2  d00b              BEQ      |L1.252|
0000e4  2902              CMP      r1,#2                 ;63
0000e6  d009              BEQ      |L1.252|
0000e8  8cb1              LDRH     r1,[r6,#0x24]         ;69  ; GUI_Context
0000ea  84f1              STRH     r1,[r6,#0x26]         ;69
                  |L1.236|
0000ec  7801              LDRB     r1,[r0,#0]            ;72
0000ee  290a              CMP      r1,#0xa               ;72
0000f0  d1d9              BNE      |L1.166|
0000f2  8d31              LDRH     r1,[r6,#0x28]         ;73  ; GUI_Context
0000f4  4439              ADD      r1,r1,r7              ;73
0000f6  8531              STRH     r1,[r6,#0x28]         ;73
0000f8  e7d5              B        |L1.166|
0000fa  e002              B        |L1.258|
                  |L1.252|
0000fc  f8a69026          STRH     r9,[r6,#0x26]         ;66
000100  e7f4              B        |L1.236|
                  |L1.258|
;;;83     }
000102  b003              ADD      sp,sp,#0xc
000104  e8bd8ff0          POP      {r4-r11,pc}
;;;84     
                          ENDP

                  |L1.264|
                          DCD      GUI_Context
