; generated by ARM C/C++ Compiler, 4.1 [Build 481]
; commandline ArmCC [--debug -c --asm --interleave -o.\rvmdk\gui_sif.o --depend=.\rvmdk\gui_sif.d --cpu=Cortex-M3 --apcs=interwork -O1 -Otime -I. -I..\BSP -I..\..\..\..\..\uCOS-II\Ports\arm-cortex-m3\Generic\RealView -I..\..\..\..\..\uCOS-II\Source -I..\..\..\..\..\CPU\ST\STM32\inc -I..\..\..\..\..\uC-CPU -I..\..\..\..\..\uC-CPU\Arm-Cortex-M3\RealView -I..\..\..\..\..\uC-LIB -I..\..\..\..\..\uC-Probe\Target\Plugins\uCOS-II -I..\..\..\..\..\uC-Probe\Target\Communication\Generic\Source -I..\..\..\..\..\uC-Probe\Target\Communication\Generic\RS-232\Ports\ST\STM32 -I..\..\..\..\..\uC-Probe\Target\Communication\Generic\RS-232\Source -I..\..\..\..\..\User\inc -I..\..\..\..\..\uCGUI\Config -I..\..\..\..\..\uCGUI\GUIDemo -I..\..\..\..\..\uCGUI\LCDDriver -I..\..\..\..\..\uCGUI\GUI\AntiAlias -I..\..\..\..\..\uCGUI\GUI\ConvertColor -I..\..\..\..\..\uCGUI\GUI\ConvertMono -I..\..\..\..\..\uCGUI\GUI\Core -I..\..\..\..\..\uCGUI\GUI\Font -I..\..\..\..\..\uCGUI\GUI\LCDDriver -I..\..\..\..\..\uCGUI\GUI\MemDev -I..\..\..\..\..\uCGUI\GUI\MultiLayer -I..\..\..\..\..\uCGUI\GUI\Widget -I..\..\..\..\..\uCGUI\GUI\WM -Id:\Keil-stm32\ARM\INC -Id:\Keil-stm32\ARM\INC\ST\STM32F10x -D__MICROLIB --omf_browse=.\rvmdk\gui_sif.crf ..\..\..\..\..\uCGUI\GUI\Core\GUI_SIF.c]
                          THUMB

                          AREA ||.text||, CODE, READONLY, ALIGN=2

                  _GetNumCharAreas PROC
;;;31     */
;;;32     static int _GetNumCharAreas(const GUI_FONT GUI_UNI_PTR * pFont) {
000000  b508              PUSH     {r3,lr}
;;;33       U16 NumCharAreas;
;;;34       const U8 * pData;
;;;35       pData = (const U8 *)pFont->p.pFontData + 14 /* Skip ID, YSize, YDist, Baseline, LHeight and CHeight */;
000002  6980              LDR      r0,[r0,#0x18]
000004  300e              ADDS     r0,r0,#0xe
000006  9000              STR      r0,[sp,#0]
;;;36       NumCharAreas = GUI__Read16(&pData);
000008  4668              MOV      r0,sp
00000a  f7fffffe          BL       GUI__Read16
;;;37       return NumCharAreas;
;;;38     }
00000e  bd08              POP      {r3,pc}
;;;39     
                          ENDP

                  GUI_SIF__GetpCharInfo PROC
;;;49     */
;;;50     const U8 * GUI_SIF__GetpCharInfo(const GUI_FONT GUI_UNI_PTR * pFont, U16P c) {
000010  b5f0              PUSH     {r4-r7,lr}
000012  b083              SUB      sp,sp,#0xc
000014  4604              MOV      r4,r0
000016  460e              MOV      r6,r1
;;;51       const U8 * pCharArea, * pCharInfo;
;;;52       int NumCharAreas;
;;;53       NumCharAreas = _GetNumCharAreas(pFont);                 /* Get # of char areas */
000018  4620              MOV      r0,r4
00001a  f7fffffe          BL       _GetNumCharAreas
00001e  4605              MOV      r5,r0
;;;54       pCharArea = (const U8 *)pFont->p.pFontData 
000020  69a0              LDR      r0,[r4,#0x18]
000022  f1000110          ADD      r1,r0,#0x10
000026  9102              STR      r1,[sp,#8]
;;;55                   + sizeof(GUI_SI_FONT);                      /* Set char area pointer to first char area */
;;;56       pCharInfo = pCharArea
000028  eb010485          ADD      r4,r1,r5,LSL #2
                  |L1.44|
;;;57                   + sizeof(GUI_SIF_CHAR_AREA) * NumCharAreas; /* Set char info pointer to first character info */
;;;58       do {
;;;59         GUI_SIF_CHAR_AREA CharArea;
;;;60         CharArea.First    = GUI__Read16(&pCharArea);
00002c  a802              ADD      r0,sp,#8
00002e  f7fffffe          BL       GUI__Read16
000032  f8ad0004          STRH     r0,[sp,#4]
000036  4607              MOV      r7,r0
;;;61         CharArea.Last     = GUI__Read16(&pCharArea);
000038  a802              ADD      r0,sp,#8
00003a  f7fffffe          BL       GUI__Read16
00003e  f8ad0006          STRH     r0,[sp,#6]
000042  4602              MOV      r2,r0
;;;62         if ((c >= CharArea.First) && (c <= CharArea.Last)) {
000044  42b7              CMP      r7,r6
000046  d80a              BHI      |L1.94|
000048  42b2              CMP      r2,r6
00004a  d308              BCC      |L1.94|
;;;63           pCharInfo += sizeof(GUI_SIF_CHARINFO) * (c - CharArea.First);
00004c  f8bd0004          LDRH     r0,[sp,#4]
000050  1a30              SUBS     r0,r6,r0
000052  eb000040          ADD      r0,r0,r0,LSL #1
000056  eb040080          ADD      r0,r4,r0,LSL #2
;;;64           return pCharInfo;
;;;65         }
;;;66         pCharInfo += sizeof(GUI_SIF_CHARINFO) * (CharArea.Last - CharArea.First + 1);
;;;67       } while(--NumCharAreas);
;;;68       return 0;
;;;69     }
00005a  b003              ADD      sp,sp,#0xc
00005c  bdf0              POP      {r4-r7,pc}
                  |L1.94|
00005e  1bd0              SUBS     r0,r2,r7              ;66
000060  1c40              ADDS     r0,r0,#1              ;66
000062  eb000040          ADD      r0,r0,r0,LSL #1       ;66
000066  eb040480          ADD      r4,r4,r0,LSL #2       ;66
00006a  1e6d              SUBS     r5,r5,#1              ;67
00006c  d1de              BNE      |L1.44|
00006e  b003              ADD      sp,sp,#0xc
000070  2000              MOVS     r0,#0                 ;68
000072  bdf0              POP      {r4-r7,pc}
;;;70     
                          ENDP

                  GUI_SIF__GetCharDistX PROC
;;;74     */
;;;75     int GUI_SIF__GetCharDistX(U16P c) {
000074  b538              PUSH     {r3-r5,lr}
000076  4601              MOV      r1,r0
;;;76       const U8 * pCharInfo;
;;;77       U16 DistX = 0;
000078  2400              MOVS     r4,#0
;;;78       pCharInfo = GUI_SIF__GetpCharInfo(GUI_Context.pAFont, c); /* Get pointer to char info data */
00007a  482e              LDR      r0,|L1.308|
00007c  69c0              LDR      r0,[r0,#0x1c]  ; GUI_Context
00007e  f7fffffe          BL       GUI_SIF__GetpCharInfo
000082  9000              STR      r0,[sp,#0]
;;;79       if (pCharInfo) {
000084  b128              CBZ      r0,|L1.146|
;;;80         pCharInfo += 2;
000086  1c80              ADDS     r0,r0,#2
000088  9000              STR      r0,[sp,#0]
;;;81         DistX = GUI__Read16(&pCharInfo);
00008a  4668              MOV      r0,sp
00008c  f7fffffe          BL       GUI__Read16
000090  4604              MOV      r4,r0
                  |L1.146|
;;;82       }
;;;83       return DistX;
000092  4620              MOV      r0,r4
;;;84     }
000094  bd38              POP      {r3-r5,pc}
;;;85     
                          ENDP

                  GUI_SIF__GetFontInfo PROC
;;;89     */
;;;90     void GUI_SIF__GetFontInfo(const GUI_FONT GUI_UNI_PTR * pFont, GUI_FONTINFO * pfi) {
000096  b538              PUSH     {r3-r5,lr}
000098  460c              MOV      r4,r1
;;;91       const U8 * pData;
;;;92       pData = (const U8 *)pFont->p.pFontData + 4 /* Skip XSize and XDist */;
00009a  6980              LDR      r0,[r0,#0x18]
00009c  1d00              ADDS     r0,r0,#4
00009e  9000              STR      r0,[sp,#0]
;;;93       pfi->Baseline = GUI__Read16(&pData);
0000a0  4668              MOV      r0,sp
0000a2  f7fffffe          BL       GUI__Read16
0000a6  70a0              STRB     r0,[r4,#2]
;;;94       pfi->LHeight  = GUI__Read16(&pData);
0000a8  4668              MOV      r0,sp
0000aa  f7fffffe          BL       GUI__Read16
0000ae  70e0              STRB     r0,[r4,#3]
;;;95       pfi->CHeight  = GUI__Read16(&pData);
0000b0  4668              MOV      r0,sp
0000b2  f7fffffe          BL       GUI__Read16
0000b6  7120              STRB     r0,[r4,#4]
;;;96       pfi->Flags    = GUI_FONTINFO_FLAG_PROP;
0000b8  2001              MOVS     r0,#1
0000ba  8020              STRH     r0,[r4,#0]
;;;97     }
0000bc  bd38              POP      {r3-r5,pc}
;;;98     
                          ENDP

                  GUI_SIF__IsInFont PROC
;;;102    */
;;;103    char GUI_SIF__IsInFont(const GUI_FONT GUI_UNI_PTR * pFont, U16 c) {
0000be  b510              PUSH     {r4,lr}
;;;104      const U8 * pCharInfo;
;;;105      GUI_USE_PARA(pFont);
;;;106      pCharInfo = GUI_SIF__GetpCharInfo(GUI_Context.pAFont, c);
0000c0  481c              LDR      r0,|L1.308|
0000c2  69c0              LDR      r0,[r0,#0x1c]  ; GUI_Context
0000c4  f7fffffe          BL       GUI_SIF__GetpCharInfo
;;;107      return (pCharInfo) ? 1 : 0;
0000c8  b108              CBZ      r0,|L1.206|
0000ca  2001              MOVS     r0,#1
;;;108    }
0000cc  bd10              POP      {r4,pc}
                  |L1.206|
0000ce  2000              MOVS     r0,#0                 ;107
0000d0  bd10              POP      {r4,pc}
;;;109    
                          ENDP

                  GUI_SIF_CreateFont PROC
;;;119    */
;;;120    void GUI_SIF_CreateFont(void * pFontData, GUI_FONT * pFont, const GUI_SIF_TYPE * pFontType) {
0000d2  b538              PUSH     {r3-r5,lr}
0000d4  460c              MOV      r4,r1
0000d6  4615              MOV      r5,r2
;;;121      const U8 * pSrc = (const U8 *)pFontData;
0000d8  9000              STR      r0,[sp,#0]
;;;122      U32 ID;
;;;123      /* Set pFontData of GUI_FONT structure to the first byte */
;;;124      pFont->p.pFontData = pFontData;
0000da  61a0              STR      r0,[r4,#0x18]
;;;125      /* Check ID */
;;;126      ID = GUI__Read32(&pSrc);
0000dc  4668              MOV      r0,sp
0000de  f7fffffe          BL       GUI__Read32
;;;127      if (ID != 0x50495547) { /* 'GUIP' */
0000e2  4915              LDR      r1,|L1.312|
0000e4  4288              CMP      r0,r1
0000e6  d123              BNE      |L1.304|
;;;128        GUI_DEBUG_ERROROUT("ID of downloaded font wrong!");
;;;129        return;
;;;130      }
;;;131      /* Read properties of the font */
;;;132      pFont->YSize    = GUI__Read16(&pSrc);
0000e8  4668              MOV      r0,sp
0000ea  f7fffffe          BL       GUI__Read16
0000ee  7520              STRB     r0,[r4,#0x14]
;;;133      pFont->YDist    = GUI__Read16(&pSrc);
0000f0  4668              MOV      r0,sp
0000f2  f7fffffe          BL       GUI__Read16
0000f6  7560              STRB     r0,[r4,#0x15]
;;;134      pFont->Baseline = GUI__Read16(&pSrc);
0000f8  4668              MOV      r0,sp
0000fa  f7fffffe          BL       GUI__Read16
0000fe  7720              STRB     r0,[r4,#0x1c]
;;;135      pFont->LHeight  = GUI__Read16(&pSrc);
000100  4668              MOV      r0,sp
000102  f7fffffe          BL       GUI__Read16
000106  7760              STRB     r0,[r4,#0x1d]
;;;136      pFont->CHeight  = GUI__Read16(&pSrc);
000108  4668              MOV      r0,sp
00010a  f7fffffe          BL       GUI__Read16
00010e  77a0              STRB     r0,[r4,#0x1e]
;;;137      /* Magnification is always 1 */
;;;138      pFont->XMag = 1;
000110  2001              MOVS     r0,#1
000112  75a0              STRB     r0,[r4,#0x16]
;;;139      pFont->YMag = 1;
000114  75e0              STRB     r0,[r4,#0x17]
;;;140      /* Set function pointers */
;;;141      pFont->pfDispChar     = pFontType->pDispChar;
000116  6828              LDR      r0,[r5,#0]
000118  6020              STR      r0,[r4,#0]
;;;142      pFont->pfGetCharDistX = pFontType->pGetCharDistX;
00011a  6868              LDR      r0,[r5,#4]
00011c  6060              STR      r0,[r4,#4]
;;;143      pFont->pfGetFontInfo  = pFontType->pGetFontInfo;
00011e  68a8              LDR      r0,[r5,#8]
000120  60a0              STR      r0,[r4,#8]
;;;144      pFont->pfIsInFont     = pFontType->pIsInFont;
000122  68e8              LDR      r0,[r5,#0xc]
000124  60e0              STR      r0,[r4,#0xc]
;;;145      pFont->pafEncode      = 0;
000126  2000              MOVS     r0,#0
000128  6120              STR      r0,[r4,#0x10]
;;;146      /* Use the new font */
;;;147      GUI_SetFont(pFont);
00012a  4620              MOV      r0,r4
00012c  f7fffffe          BL       GUI_SetFont
                  |L1.304|
;;;148    }
000130  bd38              POP      {r3-r5,pc}
;;;149    
                          ENDP

                  GUI_SIF_DeleteFont PROC
;;;153    */
;;;154    void GUI_SIF_DeleteFont(GUI_FONT * pFont) {
000132  4770              BX       lr
;;;155      GUI_USE_PARA(pFont);
;;;156    }
;;;157    	 	 			 		    	 				 	  			   	 	 	 	 	 	  	  	      	   		 	 	 		  		  	 		 	  	  			     			       	   	 			  		    	 	     	 				  	 					 	 			   	  	  			 				 		 	 	 			     			 
                          ENDP

                  |L1.308|
                          DCD      GUI_Context
                  |L1.312|
                          DCD      0x50495547
