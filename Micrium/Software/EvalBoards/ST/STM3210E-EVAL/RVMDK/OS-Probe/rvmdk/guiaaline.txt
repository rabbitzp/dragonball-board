; generated by ARM C/C++ Compiler, 4.1 [Build 481]
; commandline ArmCC [--debug -c --asm --interleave -o.\rvmdk\guiaaline.o --depend=.\rvmdk\guiaaline.d --cpu=Cortex-M3 --apcs=interwork -O1 -Otime -I. -I..\BSP -I..\..\..\..\..\uCOS-II\Ports\arm-cortex-m3\Generic\RealView -I..\..\..\..\..\uCOS-II\Source -I..\..\..\..\..\CPU\ST\STM32\inc -I..\..\..\..\..\uC-CPU -I..\..\..\..\..\uC-CPU\Arm-Cortex-M3\RealView -I..\..\..\..\..\uC-LIB -I..\..\..\..\..\uC-Probe\Target\Plugins\uCOS-II -I..\..\..\..\..\uC-Probe\Target\Communication\Generic\Source -I..\..\..\..\..\uC-Probe\Target\Communication\Generic\RS-232\Ports\ST\STM32 -I..\..\..\..\..\uC-Probe\Target\Communication\Generic\RS-232\Source -I..\..\..\..\..\User\inc -I..\..\..\..\..\uCGUI\Config -I..\..\..\..\..\uCGUI\GUIDemo -I..\..\..\..\..\uCGUI\LCDDriver -I..\..\..\..\..\uCGUI\GUI\AntiAlias -I..\..\..\..\..\uCGUI\GUI\ConvertColor -I..\..\..\..\..\uCGUI\GUI\ConvertMono -I..\..\..\..\..\uCGUI\GUI\Core -I..\..\..\..\..\uCGUI\GUI\Font -I..\..\..\..\..\uCGUI\GUI\LCDDriver -I..\..\..\..\..\uCGUI\GUI\MemDev -I..\..\..\..\..\uCGUI\GUI\MultiLayer -I..\..\..\..\..\uCGUI\GUI\Widget -I..\..\..\..\..\uCGUI\GUI\WM -Id:\Keil-stm32\ARM\INC -Id:\Keil-stm32\ARM\INC\ST\STM32F10x -D__MICROLIB --omf_browse=.\rvmdk\guiaaline.crf ..\..\..\..\..\uCGUI\GUI\AntiAlias\GUIAALine.c]
                          THUMB

                          AREA ||.text||, CODE, READONLY, ALIGN=2

                  _AA_DrawLine PROC
;;;34     */
;;;35     static void _AA_DrawLine(int x0, int y0, int x1, int y1) {
000000  e92d5ff0          PUSH     {r4-r12,lr}
000004  4605              MOV      r5,r0
000006  4689              MOV      r9,r1
000008  4614              MOV      r4,r2
00000a  4698              MOV      r8,r3
;;;36       int xMin, xMax;
;;;37       U8 PenSizeOld = GUI_GetPenSize();
00000c  f7fffffe          BL       GUI_GetPenSize
000010  4606              MOV      r6,r0
;;;38       U8 PenSizeHR  = PenSizeOld * GUI_Context.AA_Factor;
000012  f8dfa0e8          LDR      r10,|L1.252|
000016  f89a0060          LDRB     r0,[r10,#0x60]  ; GUI_Context
00001a  4370              MULS     r0,r6,r0
00001c  b2c7              UXTB     r7,r0
;;;39       U8 OldPenShape = GUI_SetPenShape(GUI_PS_FLAT);
00001e  2001              MOVS     r0,#1
000020  f7fffffe          BL       GUI_SetPenShape
000024  4683              MOV      r11,r0
;;;40       /* Calculate left and right borders for AA module */
;;;41       if (x0 < x1) {
000026  42a5              CMP      r5,r4
000028  da02              BGE      |L1.48|
;;;42         xMin = x0;
00002a  4628              MOV      r0,r5
;;;43         xMax = x1;
00002c  4621              MOV      r1,r4
00002e  e001              B        |L1.52|
                  |L1.48|
;;;44       } else {
;;;45         xMin = x1;
000030  4620              MOV      r0,r4
;;;46         xMax = x0;
000032  4629              MOV      r1,r5
                  |L1.52|
;;;47       }
;;;48       if (GUI_Context.AA_HiResEnable) {
000034  f89a2061          LDRB     r2,[r10,#0x61]  ; GUI_Context
000038  b142              CBZ      r2,|L1.76|
;;;49         xMin -= PenSizeHR;
00003a  1bc2              SUBS     r2,r0,r7
;;;50         xMax += PenSizeHR;
00003c  4439              ADD      r1,r1,r7
;;;51         xMin /= GUI_Context.AA_Factor;
00003e  f89a0060          LDRB     r0,[r10,#0x60]  ; GUI_Context
000042  fb92f2f0          SDIV     r2,r2,r0
;;;52         xMax /= GUI_Context.AA_Factor;
000046  fb91f1f0          SDIV     r1,r1,r0
00004a  e009              B        |L1.96|
                  |L1.76|
;;;53       } else {
;;;54         xMin -= PenSizeOld;
00004c  1b82              SUBS     r2,r0,r6
;;;55         xMax += PenSizeOld;
00004e  4431              ADD      r1,r1,r6
;;;56         x0 *= GUI_Context.AA_Factor;
000050  f89a0060          LDRB     r0,[r10,#0x60]  ; GUI_Context
000054  4345              MULS     r5,r0,r5
;;;57         x1 *= GUI_Context.AA_Factor;
000056  4344              MULS     r4,r0,r4
;;;58         y0 *= GUI_Context.AA_Factor;
000058  fb00f909          MUL      r9,r0,r9
;;;59         y1 *= GUI_Context.AA_Factor;
00005c  fb00f808          MUL      r8,r0,r8
                  |L1.96|
;;;60       }
;;;61       /* Do the actual drawing */
;;;62       GUI_AA_Init(xMin, xMax);
000060  4610              MOV      r0,r2
000062  f7fffffe          BL       GUI_AA_Init
;;;63       GUI_SetPenSize(PenSizeHR);
000066  4638              MOV      r0,r7
000068  f7fffffe          BL       GUI_SetPenSize
;;;64       GL_DrawLine(x0 , y0 , x1 ,  y1 );
00006c  4643              MOV      r3,r8
00006e  4622              MOV      r2,r4
000070  4649              MOV      r1,r9
000072  4628              MOV      r0,r5
000074  f7fffffe          BL       GL_DrawLine
;;;65       GUI_AA_Exit();
000078  f7fffffe          BL       GUI_AA_Exit
;;;66       /* Draw end points (can be optimized away in future, TBD*/
;;;67       switch (OldPenShape) {
00007c  f1bb0f00          CMP      r11,#0
000080  d10d              BNE      |L1.158|
;;;68       case GUI_PS_ROUND:
;;;69         {
;;;70           int r = GUI_Context.AA_Factor * PenSizeOld / 2;
000082  f89a0060          LDRB     r0,[r10,#0x60]  ; GUI_Context
000086  4370              MULS     r0,r6,r0
000088  0847              LSRS     r7,r0,#1
;;;71           GL_FillCircleAA_HiRes(x0 , y0 , r);
00008a  463a              MOV      r2,r7
00008c  4649              MOV      r1,r9
00008e  4628              MOV      r0,r5
000090  f7fffffe          BL       GL_FillCircleAA_HiRes
;;;72           GL_FillCircleAA_HiRes(x1 , y1 , r);
000094  463a              MOV      r2,r7
000096  4641              MOV      r1,r8
000098  4620              MOV      r0,r4
00009a  f7fffffe          BL       GL_FillCircleAA_HiRes
                  |L1.158|
;;;73         }
;;;74         break;
;;;75       }
;;;76       GUI_SetPenSize(PenSizeOld);
00009e  4630              MOV      r0,r6
0000a0  f7fffffe          BL       GUI_SetPenSize
;;;77       GUI_SetPenShape(OldPenShape);
0000a4  4658              MOV      r0,r11
0000a6  e8bd5ff0          POP      {r4-r12,lr}
0000aa  f7ffbffe          B.W      GUI_SetPenShape
;;;78     }
;;;79     
                          ENDP

                  GUI_AA_DrawLine PROC
;;;89     */
;;;90     void GUI_AA_DrawLine(int x0, int y0, int x1, int y1) {
0000ae  e92d41f0          PUSH     {r4-r8,lr}
0000b2  4604              MOV      r4,r0
0000b4  460d              MOV      r5,r1
0000b6  4616              MOV      r6,r2
0000b8  4698              MOV      r8,r3
;;;91       GUI_LOCK();
0000ba  f7fffffe          BL       GUI_Lock
;;;92       #if (GUI_WINSUPPORT)
;;;93         WM_ADDORG_AA(x0,y0);
0000be  f7fffffe          BL       WM__GetOrgX_AA
0000c2  1907              ADDS     r7,r0,r4
0000c4  f7fffffe          BL       WM__GetOrgY_AA
0000c8  4405              ADD      r5,r5,r0
;;;94         WM_ADDORG_AA(x1,y1);
0000ca  f7fffffe          BL       WM__GetOrgX_AA
0000ce  4406              ADD      r6,r6,r0
0000d0  f7fffffe          BL       WM__GetOrgY_AA
0000d4  eb000408          ADD      r4,r0,r8
;;;95         WM_ITERATE_START(NULL); {
0000d8  2000              MOVS     r0,#0
0000da  f7fffffe          BL       WM__InitIVRSearch
0000de  b148              CBZ      r0,|L1.244|
                  |L1.224|
;;;96       #endif
;;;97       _AA_DrawLine(x0, y0, x1, y1);
0000e0  4623              MOV      r3,r4
0000e2  4632              MOV      r2,r6
0000e4  4629              MOV      r1,r5
0000e6  4638              MOV      r0,r7
0000e8  f7fffffe          BL       _AA_DrawLine
;;;98       #if (GUI_WINSUPPORT)
;;;99         } WM_ITERATE_END();
0000ec  f7fffffe          BL       WM__GetNextIVR
0000f0  2800              CMP      r0,#0
0000f2  d1f5              BNE      |L1.224|
                  |L1.244|
;;;100      #endif
;;;101      GUI_UNLOCK();
0000f4  e8bd41f0          POP      {r4-r8,lr}
0000f8  f7ffbffe          B.W      GUI_Unlock
;;;102    }
;;;103    
                          ENDP

                  |L1.252|
                          DCD      GUI_Context
