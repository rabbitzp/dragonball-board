; generated by ARM C/C++ Compiler, 4.1 [Build 481]
; commandline ArmCC [--debug -c --asm --interleave -o.\rvmdk\gui__memset.o --depend=.\rvmdk\gui__memset.d --cpu=Cortex-M3 --apcs=interwork -O1 -Otime -I. -I..\BSP -I..\..\..\..\..\uCOS-II\Ports\arm-cortex-m3\Generic\RealView -I..\..\..\..\..\uCOS-II\Source -I..\..\..\..\..\CPU\ST\STM32\inc -I..\..\..\..\..\uC-CPU -I..\..\..\..\..\uC-CPU\Arm-Cortex-M3\RealView -I..\..\..\..\..\uC-LIB -I..\..\..\..\..\uC-Probe\Target\Plugins\uCOS-II -I..\..\..\..\..\uC-Probe\Target\Communication\Generic\Source -I..\..\..\..\..\uC-Probe\Target\Communication\Generic\RS-232\Ports\ST\STM32 -I..\..\..\..\..\uC-Probe\Target\Communication\Generic\RS-232\Source -I..\..\..\..\..\User\inc -I..\..\..\..\..\uCGUI\Config -I..\..\..\..\..\uCGUI\GUIDemo -I..\..\..\..\..\uCGUI\LCDDriver -I..\..\..\..\..\uCGUI\GUI\AntiAlias -I..\..\..\..\..\uCGUI\GUI\ConvertColor -I..\..\..\..\..\uCGUI\GUI\ConvertMono -I..\..\..\..\..\uCGUI\GUI\Core -I..\..\..\..\..\uCGUI\GUI\Font -I..\..\..\..\..\uCGUI\GUI\LCDDriver -I..\..\..\..\..\uCGUI\GUI\MemDev -I..\..\..\..\..\uCGUI\GUI\MultiLayer -I..\..\..\..\..\uCGUI\GUI\Widget -I..\..\..\..\..\uCGUI\GUI\WM -Id:\Keil-stm32\ARM\INC -Id:\Keil-stm32\ARM\INC\ST\STM32F10x -D__MICROLIB --omf_browse=.\rvmdk\gui__memset.crf ..\..\..\..\..\uCGUI\GUI\Core\GUI__memset.c]
                          THUMB

                          AREA ||.text||, CODE, READONLY, ALIGN=1

                  GUI__memset PROC
;;;39     */
;;;40     void GUI__memset(U8* p, U8 Fill, int NumBytes) {
000000  e002              B        |L1.8|
                  |L1.2|
;;;41       int NumInts;
;;;42       /* Write bytes until we are done or have reached an int boundary */
;;;43       while (NumBytes && ((sizeof(int) - 1) & (U32)p)) {
;;;44         *p++ = Fill;
000002  f8001b01          STRB     r1,[r0],#1
;;;45         NumBytes--;
000006  1e52              SUBS     r2,r2,#1
                  |L1.8|
000008  b112              CBZ      r2,|L1.16|
00000a  f0100f03          TST      r0,#3                 ;43
00000e  d1f8              BNE      |L1.2|
                  |L1.16|
;;;46       }
;;;47       /* Write Ints */
;;;48       NumInts = (unsigned)NumBytes / sizeof(int);
000010  0893              LSRS     r3,r2,#2
;;;49       if (NumInts) {
000012  b1c3              CBZ      r3,|L1.70|
;;;50         int FillInt;
;;;51         int *pInt;
;;;52         NumBytes &= (sizeof(int) - 1);
000014  f0020203          AND      r2,r2,#3
;;;53         if (sizeof(int) == 2) {        /* May some compilers generate a warning at this line: Condition is alwaws true/false */
;;;54           FillInt = Fill * 0x101;      /* May some compilers generate a warning at this line: Unreachable code */
;;;55         } else if (sizeof(int) == 4) { /* May some compilers generate a warning at this line: Condition is alwaws true/false */
;;;56           FillInt = Fill * 0x1010101;  /* May some compilers generate a warning at this line: Unreachable code */
000018  eb014c01          ADD      r12,r1,r1,LSL #16
00001c  eb0c2c0c          ADD      r12,r12,r12,LSL #8
;;;57         }
;;;58         pInt = (int*)p;
;;;59         /* Fill large amount of data at a time */
;;;60         while (NumInts >= 4) { 
000020  2b04              CMP      r3,#4
000022  db0a              BLT      |L1.58|
                  |L1.36|
;;;61           *pInt++ = FillInt;
000024  f840cb04          STR      r12,[r0],#4
;;;62           *pInt++ = FillInt;
000028  f840cb04          STR      r12,[r0],#4
;;;63           *pInt++ = FillInt;
00002c  f840cb04          STR      r12,[r0],#4
;;;64           *pInt++ = FillInt;
000030  f840cb04          STR      r12,[r0],#4
;;;65           NumInts -= 4;
000034  1f1b              SUBS     r3,r3,#4
000036  2b04              CMP      r3,#4                 ;60
000038  daf4              BGE      |L1.36|
                  |L1.58|
;;;66         }
;;;67         /* Fill one int at a time */
;;;68         while (NumInts) {
00003a  b123              CBZ      r3,|L1.70|
                  |L1.60|
;;;69           *pInt++ = FillInt;
00003c  f840cb04          STR      r12,[r0],#4
;;;70           NumInts--;
000040  1e5b              SUBS     r3,r3,#1
000042  2b00              CMP      r3,#0                 ;68
000044  d1fa              BNE      |L1.60|
                  |L1.70|
;;;71         }
;;;72         p = (U8*)pInt;
;;;73       }
;;;74       /* Fill the remainder byte wise */
;;;75       while (NumBytes) {
000046  2a00              CMP      r2,#0
000048  d004              BEQ      |L1.84|
                  |L1.74|
;;;76         *p++ = Fill;
00004a  f8001b01          STRB     r1,[r0],#1
;;;77         NumBytes--;
00004e  1e52              SUBS     r2,r2,#1
000050  2a00              CMP      r2,#0                 ;75
000052  d1fa              BNE      |L1.74|
                  |L1.84|
;;;78       }
;;;79     }
000054  4770              BX       lr
;;;80     
                          ENDP

