; generated by ARM C/C++ Compiler, 4.1 [Build 481]
; commandline ArmCC [--debug -c --asm --interleave -o.\rvmdk\gui__memset16.o --depend=.\rvmdk\gui__memset16.d --cpu=Cortex-M3 --apcs=interwork -O1 -Otime -I. -I..\BSP -I..\..\..\..\..\uCOS-II\Ports\arm-cortex-m3\Generic\RealView -I..\..\..\..\..\uCOS-II\Source -I..\..\..\..\..\CPU\ST\STM32\inc -I..\..\..\..\..\uC-CPU -I..\..\..\..\..\uC-CPU\Arm-Cortex-M3\RealView -I..\..\..\..\..\uC-LIB -I..\..\..\..\..\uC-Probe\Target\Plugins\uCOS-II -I..\..\..\..\..\uC-Probe\Target\Communication\Generic\Source -I..\..\..\..\..\uC-Probe\Target\Communication\Generic\RS-232\Ports\ST\STM32 -I..\..\..\..\..\uC-Probe\Target\Communication\Generic\RS-232\Source -I..\..\..\..\..\User\inc -I..\..\..\..\..\uCGUI\Config -I..\..\..\..\..\uCGUI\GUIDemo -I..\..\..\..\..\uCGUI\LCDDriver -I..\..\..\..\..\uCGUI\GUI\AntiAlias -I..\..\..\..\..\uCGUI\GUI\ConvertColor -I..\..\..\..\..\uCGUI\GUI\ConvertMono -I..\..\..\..\..\uCGUI\GUI\Core -I..\..\..\..\..\uCGUI\GUI\Font -I..\..\..\..\..\uCGUI\GUI\LCDDriver -I..\..\..\..\..\uCGUI\GUI\MemDev -I..\..\..\..\..\uCGUI\GUI\MultiLayer -I..\..\..\..\..\uCGUI\GUI\Widget -I..\..\..\..\..\uCGUI\GUI\WM -Id:\Keil-stm32\ARM\INC -Id:\Keil-stm32\ARM\INC\ST\STM32F10x -D__MICROLIB --omf_browse=.\rvmdk\gui__memset16.crf ..\..\..\..\..\uCGUI\GUI\Core\GUI__memset16.c]
                          THUMB

                          AREA ||.text||, CODE, READONLY, ALIGN=1

                  GUI__memset16 PROC
;;;35     */
;;;36     void GUI__memset16(U16 * p, U16 Fill, int NumWords) {
000000  f0100f02          TST      r0,#2
;;;37       /* Code for 16 bit CPUs */
;;;38       if (sizeof(int) == 2) { /* May some compilers generate a warning at this line: Condition is alwaws true/false */
;;;39         if (NumWords >= 8) {  /* May some compilers generate a warning at this line: Unreachable code */
;;;40           *p++ = Fill;
;;;41           *p++ = Fill;
;;;42           *p++ = Fill;
;;;43           *p++ = Fill;
;;;44           *p++ = Fill;
;;;45           *p++ = Fill;
;;;46           *p++ = Fill;
;;;47           *p++ = Fill;
;;;48           NumWords -= 8;
;;;49         }
;;;50         while (NumWords) {
;;;51           *p++ = Fill;
;;;52           NumWords--;
;;;53         }
;;;54       } else {
;;;55         int NumInts;          /* May some compilers generate a warning at this line: Unreachable code */
;;;56         /* Write 16 bit until we are done or have reached an int boundary */
;;;57         if (2 & (U32)p) {
000004  d002              BEQ      |L1.12|
;;;58           *p++ = Fill;
000006  f8201b02          STRH     r1,[r0],#2
;;;59           NumWords--;
00000a  1e52              SUBS     r2,r2,#1
                  |L1.12|
;;;60         }
;;;61         /* Write Ints */
;;;62         NumInts = (unsigned)NumWords / (sizeof(int) / 2);
00000c  0853              LSRS     r3,r2,#1
;;;63         if (NumInts) {
00000e  b1ab              CBZ      r3,|L1.60|
;;;64           int FillInt;
;;;65           int *pInt;
;;;66           FillInt = Fill * 0x10001;
000010  eb014c01          ADD      r12,r1,r1,LSL #16
;;;67     
;;;68           pInt = (int*)p;
;;;69           /* Fill large amount of data at a time */
;;;70           if (NumInts >= 4) {
000014  2b04              CMP      r3,#4
000016  db0b              BLT      |L1.48|
                  |L1.24|
;;;71             do {
;;;72               *pInt       = FillInt;
000018  f8c0c000          STR      r12,[r0,#0]
;;;73               *(pInt + 1) = FillInt;
00001c  f8c0c004          STR      r12,[r0,#4]
;;;74               *(pInt + 2) = FillInt;
000020  f8c0c008          STR      r12,[r0,#8]
;;;75               *(pInt + 3) = FillInt;
000024  f8c0c00c          STR      r12,[r0,#0xc]
;;;76               pInt += 4;
000028  3010              ADDS     r0,r0,#0x10
;;;77             } while ((NumInts -= 4) >= 4);
00002a  1f1b              SUBS     r3,r3,#4
00002c  2b04              CMP      r3,#4
00002e  daf3              BGE      |L1.24|
                  |L1.48|
;;;78           }
;;;79           /* Fill one int at a time */
;;;80           while (NumInts) {
000030  b123              CBZ      r3,|L1.60|
                  |L1.50|
;;;81             *pInt++ = FillInt;
000032  f840cb04          STR      r12,[r0],#4
;;;82             NumInts--;
000036  1e5b              SUBS     r3,r3,#1
000038  2b00              CMP      r3,#0                 ;80
00003a  d1fa              BNE      |L1.50|
                  |L1.60|
;;;83           }
;;;84           p = (U16*)pInt;
;;;85         }
;;;86         /* Fill the remainder */
;;;87         if (NumWords & 1) {
00003c  f0120f01          TST      r2,#1
000040  d000              BEQ      |L1.68|
;;;88           *p = Fill;
000042  8001              STRH     r1,[r0,#0]
                  |L1.68|
;;;89         }
;;;90       }
;;;91     }
000044  4770              BX       lr
;;;92     
                          ENDP

