; generated by ARM C/C++ Compiler, 4.1 [Build 481]
; commandline ArmCC [--debug -c --asm --interleave -o.\rvmdk\gui_array_insertitem.o --depend=.\rvmdk\gui_array_insertitem.d --cpu=Cortex-M3 --apcs=interwork -O1 -Otime -I. -I..\BSP -I..\..\..\..\..\uCOS-II\Ports\arm-cortex-m3\Generic\RealView -I..\..\..\..\..\uCOS-II\Source -I..\..\..\..\..\CPU\ST\STM32\inc -I..\..\..\..\..\uC-CPU -I..\..\..\..\..\uC-CPU\Arm-Cortex-M3\RealView -I..\..\..\..\..\uC-LIB -I..\..\..\..\..\uC-Probe\Target\Plugins\uCOS-II -I..\..\..\..\..\uC-Probe\Target\Communication\Generic\Source -I..\..\..\..\..\uC-Probe\Target\Communication\Generic\RS-232\Ports\ST\STM32 -I..\..\..\..\..\uC-Probe\Target\Communication\Generic\RS-232\Source -I..\..\..\..\..\User\inc -I..\..\..\..\..\uCGUI\Config -I..\..\..\..\..\uCGUI\GUIDemo -I..\..\..\..\..\uCGUI\LCDDriver -I..\..\..\..\..\uCGUI\GUI\AntiAlias -I..\..\..\..\..\uCGUI\GUI\ConvertColor -I..\..\..\..\..\uCGUI\GUI\ConvertMono -I..\..\..\..\..\uCGUI\GUI\Core -I..\..\..\..\..\uCGUI\GUI\Font -I..\..\..\..\..\uCGUI\GUI\LCDDriver -I..\..\..\..\..\uCGUI\GUI\MemDev -I..\..\..\..\..\uCGUI\GUI\MultiLayer -I..\..\..\..\..\uCGUI\GUI\Widget -I..\..\..\..\..\uCGUI\GUI\WM -Id:\Keil-stm32\ARM\INC -Id:\Keil-stm32\ARM\INC\ST\STM32F10x -D__MICROLIB --omf_browse=.\rvmdk\gui_array_insertitem.crf ..\..\..\..\..\uCGUI\GUI\Widget\GUI_ARRAY_InsertItem.c]
                          THUMB

                          AREA ||.text||, CODE, READONLY, ALIGN=1

                  GUI_ARRAY_InsertBlankItem PROC
;;;51     */
;;;52     char GUI_ARRAY_InsertBlankItem(GUI_ARRAY* pThis, unsigned int Index) {
000000  e92d41f0          PUSH     {r4-r8,lr}
000004  4604              MOV      r4,r0
000006  460d              MOV      r5,r1
;;;53       GUI_ARRAY_CHECK(pThis);    /* Sanity checks at higher debug levels only */
;;;54     
;;;55       if (Index >= (unsigned)pThis->NumItems) {
000008  8820              LDRH     r0,[r4,#0]
00000a  42a8              CMP      r0,r5
00000c  d929              BLS      |L1.98|
;;;56         GUI_DEBUG_ERROROUT("GUI_ARRAY_InsertBlankItem: Illegal index");
;;;57       } else {
;;;58         WM_HMEM hNewBuffer;
;;;59         hNewBuffer = GUI_ALLOC_AllocZero(sizeof(WM_HMEM) * (pThis->NumItems + 1));
00000e  1c40              ADDS     r0,r0,#1
000010  0040              LSLS     r0,r0,#1
000012  b200              SXTH     r0,r0
000014  f7fffffe          BL       GUI_ALLOC_AllocZero
000018  4606              MOV      r6,r0
;;;60         if (hNewBuffer == 0) {
00001a  b316              CBZ      r6,|L1.98|
;;;61           GUI_DEBUG_ERROROUT("GUI_ARRAY_InsertBlankItem: Failed to alloc buffer");
;;;62         } else {
;;;63           WM_HMEM *pOldBuffer;
;;;64           WM_HMEM *pNewBuffer;
;;;65           pNewBuffer = (WM_HMEM*) GUI_ALLOC_h2p(hNewBuffer);
00001c  4630              MOV      r0,r6
00001e  f7fffffe          BL       GUI_ALLOC_h2p
000022  4680              MOV      r8,r0
;;;66           pOldBuffer = (WM_HMEM*) GUI_ALLOC_h2p(pThis->haHandle);
000024  f9b40002          LDRSH    r0,[r4,#2]
000028  f7fffffe          BL       GUI_ALLOC_h2p
00002c  4607              MOV      r7,r0
;;;67           memcpy(pNewBuffer, pOldBuffer, Index * sizeof(WM_HMEM));
00002e  006a              LSLS     r2,r5,#1
000030  4639              MOV      r1,r7
000032  4640              MOV      r0,r8
000034  f7fffffe          BL       __aeabi_memcpy
;;;68           memcpy(pNewBuffer + (Index + 1), pOldBuffer + Index, (pThis->NumItems - Index) * sizeof(WM_HMEM));
000038  8820              LDRH     r0,[r4,#0]
00003a  eb070145          ADD      r1,r7,r5,LSL #1
00003e  1b40              SUBS     r0,r0,r5
000040  0042              LSLS     r2,r0,#1
000042  1c68              ADDS     r0,r5,#1
000044  eb080040          ADD      r0,r8,r0,LSL #1
000048  f7fffffe          BL       __aeabi_memcpy
;;;69           GUI_ALLOC_Free(pThis->haHandle);
00004c  f9b40002          LDRSH    r0,[r4,#2]
000050  f7fffffe          BL       GUI_ALLOC_Free
;;;70           pThis->haHandle = hNewBuffer;
000054  8066              STRH     r6,[r4,#2]
;;;71           pThis->NumItems++;
000056  8820              LDRH     r0,[r4,#0]
000058  1c40              ADDS     r0,r0,#1
00005a  8020              STRH     r0,[r4,#0]
;;;72           return 1;               /* Successfull */
00005c  2001              MOVS     r0,#1
;;;73         }
;;;74       }
;;;75       return 0;                   /* Failed */
;;;76     }
00005e  e8bd81f0          POP      {r4-r8,pc}
                  |L1.98|
000062  2000              MOVS     r0,#0                 ;75
000064  e8bd81f0          POP      {r4-r8,pc}
;;;77     
                          ENDP

                  GUI_ARRAY_InsertItem PROC
;;;99     */
;;;100    WM_HMEM GUI_ARRAY_InsertItem(GUI_ARRAY* pThis, unsigned int Index, int Len) {
000068  e92d41f0          PUSH     {r4-r8,lr}
00006c  4606              MOV      r6,r0
00006e  460f              MOV      r7,r1
000070  4615              MOV      r5,r2
;;;101      WM_HMEM hNewBuffer = 0;
000072  2400              MOVS     r4,#0
;;;102      if (GUI_ARRAY_InsertBlankItem(pThis, Index)) {
000074  4639              MOV      r1,r7
000076  4630              MOV      r0,r6
000078  f7fffffe          BL       GUI_ARRAY_InsertBlankItem
00007c  b130              CBZ      r0,|L1.140|
;;;103        hNewBuffer = GUI_ARRAY_SetItem(pThis, Index, 0, Len);
00007e  462b              MOV      r3,r5
000080  2200              MOVS     r2,#0
000082  4639              MOV      r1,r7
000084  4630              MOV      r0,r6
000086  f7fffffe          BL       GUI_ARRAY_SetItem
00008a  4604              MOV      r4,r0
                  |L1.140|
;;;104      }
;;;105      return hNewBuffer;
00008c  4620              MOV      r0,r4
;;;106    }
00008e  e8bd81f0          POP      {r4-r8,pc}
;;;107    
                          ENDP

