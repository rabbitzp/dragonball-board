; generated by ARM C/C++ Compiler, 4.1 [Build 481]
; commandline ArmCC [--debug -c --asm --interleave -o.\rvmdk\gui_drawbitmapmag.o --depend=.\rvmdk\gui_drawbitmapmag.d --cpu=Cortex-M3 --apcs=interwork -O1 -Otime -I. -I..\BSP -I..\..\..\..\..\uCOS-II\Ports\arm-cortex-m3\Generic\RealView -I..\..\..\..\..\uCOS-II\Source -I..\..\..\..\..\CPU\ST\STM32\inc -I..\..\..\..\..\uC-CPU -I..\..\..\..\..\uC-CPU\Arm-Cortex-M3\RealView -I..\..\..\..\..\uC-LIB -I..\..\..\..\..\uC-Probe\Target\Plugins\uCOS-II -I..\..\..\..\..\uC-Probe\Target\Communication\Generic\Source -I..\..\..\..\..\uC-Probe\Target\Communication\Generic\RS-232\Ports\ST\STM32 -I..\..\..\..\..\uC-Probe\Target\Communication\Generic\RS-232\Source -I..\..\..\..\..\User\inc -I..\..\..\..\..\uCGUI\Config -I..\..\..\..\..\uCGUI\GUIDemo -I..\..\..\..\..\uCGUI\LCDDriver -I..\..\..\..\..\uCGUI\GUI\AntiAlias -I..\..\..\..\..\uCGUI\GUI\ConvertColor -I..\..\..\..\..\uCGUI\GUI\ConvertMono -I..\..\..\..\..\uCGUI\GUI\Core -I..\..\..\..\..\uCGUI\GUI\Font -I..\..\..\..\..\uCGUI\GUI\LCDDriver -I..\..\..\..\..\uCGUI\GUI\MemDev -I..\..\..\..\..\uCGUI\GUI\MultiLayer -I..\..\..\..\..\uCGUI\GUI\Widget -I..\..\..\..\..\uCGUI\GUI\WM -Id:\Keil-stm32\ARM\INC -Id:\Keil-stm32\ARM\INC\ST\STM32F10x -D__MICROLIB --omf_browse=.\rvmdk\gui_drawbitmapmag.crf ..\..\..\..\..\uCGUI\GUI\Core\GUI_DrawBitmapMag.c]
                          THUMB

                          AREA ||.text||, CODE, READONLY, ALIGN=2

                  GUI_DrawBitmapMag PROC
;;;32     */
;;;33     void GUI_DrawBitmapMag(const GUI_BITMAP GUI_UNI_PTR *pBitmap, int x0, int y0, int xMul, int yMul) {
000000  e92d4fff          PUSH     {r0-r11,lr}
000004  b089              SUB      sp,sp,#0x24
000006  4604              MOV      r4,r0
000008  460e              MOV      r6,r1
00000a  469b              MOV      r11,r3
00000c  f8dda058          LDR      r10,[sp,#0x58]
;;;34       GUI_DRAWMODE PrevDraw;
;;;35       int xSize, ySize;
;;;36       const GUI_LOGPALETTE GUI_UNI_PTR * pPal;
;;;37       const LCD_PIXELINDEX* pTrans;
;;;38       GUI_LOCK();
000010  f7fffffe          BL       GUI_Lock
;;;39       pPal = pBitmap->pPal;
000014  68e5              LDR      r5,[r4,#0xc]
;;;40       xSize = pBitmap->XSize;
000016  f8b48000          LDRH     r8,[r4,#0]
;;;41       ySize = pBitmap->YSize;
00001a  f8b49002          LDRH     r9,[r4,#2]
;;;42       pTrans = LCD_GetpPalConvTable(pPal);
00001e  4628              MOV      r0,r5
000020  f7fffffe          BL       LCD_GetpPalConvTable
000024  4607              MOV      r7,r0
;;;43       if (!pTrans) {
000026  b92f              CBNZ     r7,|L1.52|
;;;44         pTrans = (pBitmap->BitsPerPixel != 1) ? NULL : &LCD_BKCOLORINDEX;
000028  88e0              LDRH     r0,[r4,#6]
00002a  2801              CMP      r0,#1
00002c  d001              BEQ      |L1.50|
00002e  2700              MOVS     r7,#0
000030  e000              B        |L1.52|
                  |L1.50|
000032  4f2a              LDR      r7,|L1.220|
                  |L1.52|
;;;45       }
;;;46       PrevDraw = GUI_SetDrawMode((pPal && pPal->HasTrans) ? GUI_DRAWMODE_TRANS : 0);
000034  b11d              CBZ      r5,|L1.62|
000036  7928              LDRB     r0,[r5,#4]
000038  b108              CBZ      r0,|L1.62|
00003a  2002              MOVS     r0,#2
00003c  e000              B        |L1.64|
                  |L1.62|
00003e  2000              MOVS     r0,#0
                  |L1.64|
000040  f7fffffe          BL       GUI_SetDrawMode
000044  9008              STR      r0,[sp,#0x20]
;;;47       #if (GUI_WINSUPPORT)
;;;48         WM_ADDORG(x0,y0);
000046  4825              LDR      r0,|L1.220|
000048  6c41              LDR      r1,[r0,#0x44]  ; GUI_Context
00004a  198d              ADDS     r5,r1,r6
00004c  6c81              LDR      r1,[r0,#0x48]  ; GUI_Context
00004e  980b              LDR      r0,[sp,#0x2c]
000050  180e              ADDS     r6,r1,r0
;;;49         {
;;;50           GUI_RECT r;
;;;51           r.x0 = x0;
000052  f8ad5018          STRH     r5,[sp,#0x18]
;;;52           r.x1 = x0 + xSize * xMul -1;
000056  1e68              SUBS     r0,r5,#1
000058  fb08000b          MLA      r0,r8,r11,r0
00005c  f8ad001c          STRH     r0,[sp,#0x1c]
;;;53           r.y0 = y0;
000060  f8ad601a          STRH     r6,[sp,#0x1a]
;;;54           r.y1 = y0 + ySize * yMul -1;
000064  1e70              SUBS     r0,r6,#1
000066  fb09000a          MLA      r0,r9,r10,r0
00006a  f8ad001e          STRH     r0,[sp,#0x1e]
;;;55           WM_ITERATE_START(&r);
00006e  a806              ADD      r0,sp,#0x18
000070  f7fffffe          BL       WM__InitIVRSearch
000074  b348              CBZ      r0,|L1.202|
                  |L1.118|
;;;56       #endif
;;;57       if (pBitmap->pMethods) {
000076  f8d4c010          LDR      r12,[r4,#0x10]
00007a  f1bc0f00          CMP      r12,#0
00007e  d00f              BEQ      |L1.160|
;;;58         #if GUI_COMPILER_SUPPORTS_FP      /* Do not support this on VERY simple chips and compilers */
;;;59           pBitmap->pMethods->pfDraw(x0, y0, pBitmap->XSize ,pBitmap->YSize, (U8 const *)pBitmap->pData, pBitmap->pPal, xMul, yMul);
000080  68e1              LDR      r1,[r4,#0xc]
000082  68a0              LDR      r0,[r4,#8]
000084  9101              STR      r1,[sp,#4]
000086  9000              STR      r0,[sp,#0]
000088  f8cdb008          STR      r11,[sp,#8]
00008c  f8cda00c          STR      r10,[sp,#0xc]
000090  f8dcc000          LDR      r12,[r12,#0]
000094  8863              LDRH     r3,[r4,#2]
000096  8822              LDRH     r2,[r4,#0]
000098  4631              MOV      r1,r6
00009a  4628              MOV      r0,r5
00009c  47e0              BLX      r12
00009e  e010              B        |L1.194|
                  |L1.160|
;;;60         #endif
;;;61       } else {
;;;62         LCD_DrawBitmap(x0, y0, xSize, ySize, xMul, yMul
0000a0  88a1              LDRH     r1,[r4,#4]
0000a2  88e0              LDRH     r0,[r4,#6]
0000a4  68a2              LDR      r2,[r4,#8]
0000a6  f8cdb000          STR      r11,[sp,#0]
0000aa  e9cd2704          STRD     r2,r7,[sp,#0x10]
0000ae  9103              STR      r1,[sp,#0xc]
0000b0  9002              STR      r0,[sp,#8]
0000b2  464b              MOV      r3,r9
0000b4  f8cda004          STR      r10,[sp,#4]
0000b8  4642              MOV      r2,r8
0000ba  4631              MOV      r1,r6
0000bc  4628              MOV      r0,r5
0000be  f7fffffe          BL       LCD_DrawBitmap
                  |L1.194|
;;;63                         ,pBitmap->BitsPerPixel, pBitmap->BytesPerLine
;;;64                         ,pBitmap->pData, pTrans);
;;;65       }
;;;66       #if (GUI_WINSUPPORT)
;;;67           WM_ITERATE_END();
0000c2  f7fffffe          BL       WM__GetNextIVR
0000c6  2800              CMP      r0,#0
0000c8  d1d5              BNE      |L1.118|
                  |L1.202|
;;;68         }
;;;69       #endif
;;;70       GUI_SetDrawMode(PrevDraw);
0000ca  9808              LDR      r0,[sp,#0x20]
0000cc  f7fffffe          BL       GUI_SetDrawMode
;;;71       GUI_UNLOCK();
0000d0  b00d              ADD      sp,sp,#0x34
0000d2  e8bd4ff0          POP      {r4-r11,lr}
0000d6  f7ffbffe          B.W      GUI_Unlock
;;;72     }
;;;73     
                          ENDP

0000da  0000              DCW      0x0000
                  |L1.220|
                          DCD      GUI_Context
