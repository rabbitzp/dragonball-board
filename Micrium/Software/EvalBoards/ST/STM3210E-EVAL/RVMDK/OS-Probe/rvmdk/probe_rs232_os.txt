; generated by ARM C/C++ Compiler, 4.1 [Build 481]
; commandline ArmCC [--debug -c --asm --interleave -o.\rvmdk\probe_rs232_os.o --depend=.\rvmdk\probe_rs232_os.d --cpu=Cortex-M3 --apcs=interwork -O1 -Otime -I. -I..\BSP -I..\..\..\..\..\uCOS-II\Ports\arm-cortex-m3\Generic\RealView -I..\..\..\..\..\uCOS-II\Source -I..\..\..\..\..\CPU\ST\STM32\inc -I..\..\..\..\..\uC-CPU -I..\..\..\..\..\uC-CPU\Arm-Cortex-M3\RealView -I..\..\..\..\..\uC-LIB -I..\..\..\..\..\uC-Probe\Target\Plugins\uCOS-II -I..\..\..\..\..\uC-Probe\Target\Communication\Generic\Source -I..\..\..\..\..\uC-Probe\Target\Communication\Generic\RS-232\Ports\ST\STM32 -I..\..\..\..\..\uC-Probe\Target\Communication\Generic\RS-232\Source -I..\..\..\..\..\User\inc -I..\..\..\..\..\uCGUI\Config -I..\..\..\..\..\uCGUI\GUIDemo -I..\..\..\..\..\uCGUI\LCDDriver -I..\..\..\..\..\uCGUI\GUI\AntiAlias -I..\..\..\..\..\uCGUI\GUI\ConvertColor -I..\..\..\..\..\uCGUI\GUI\ConvertMono -I..\..\..\..\..\uCGUI\GUI\Core -I..\..\..\..\..\uCGUI\GUI\Font -I..\..\..\..\..\uCGUI\GUI\LCDDriver -I..\..\..\..\..\uCGUI\GUI\MemDev -I..\..\..\..\..\uCGUI\GUI\MultiLayer -I..\..\..\..\..\uCGUI\GUI\Widget -I..\..\..\..\..\uCGUI\GUI\WM -Id:\Keil-stm32\ARM\INC -Id:\Keil-stm32\ARM\INC\ST\STM32F10x -D__MICROLIB --omf_browse=.\rvmdk\probe_rs232_os.crf ..\..\..\..\..\uC-Probe\Target\Communication\Generic\RS-232\OS\uCOS-II\probe_rs232_os.c]
                          THUMB

                          AREA ||.text||, CODE, READONLY, ALIGN=2

                  ProbeRS232_OS_Task PROC
;;;267    #if (PROBE_RS232_PARSE_TASK == DEF_ENABLED)
;;;268    static  void  ProbeRS232_OS_Task (void *p_arg)
000000  f7ffbffe          B.W      ProbeRS232_Task
;;;269    {
;;;270        ProbeRS232_Task(p_arg);
;;;271    }
;;;272    #endif
                          ENDP

                  ProbeRS232_OS_Init PROC
;;;130    #if (PROBE_RS232_PARSE_TASK == DEF_ENABLED)
;;;131    void  ProbeRS232_OS_Init (void)
000004  b500              PUSH     {lr}
;;;132    {
000006  b087              SUB      sp,sp,#0x1c
;;;133        CPU_INT08U  err;
;;;134    
;;;135    
;;;136    #if (OS_SEM_EN > 0)
;;;137        ProbeRS232_OS_Sem = OSSemCreate(0);
000008  2000              MOVS     r0,#0
00000a  f7fffffe          BL       OSSemCreate
00000e  4915              LDR      r1,|L1.100|
000010  6008              STR      r0,[r1,#0]  ; ProbeRS232_OS_Sem
;;;138    #if   (OS_EVENT_NAME_SIZE > 16)
;;;139        OSEventNameSet(ProbeRS232_OS_Sem, (CPU_INT08U *)"uC/Probe RS-232", &err);
;;;140    #elif (OS_EVENT_NAME_SIZE > 13)
;;;141        OSEventNameSet(ProbeRS232_OS_Sem, (CPU_INT08U *)"Probe RS-232", &err);
000012  aa06              ADD      r2,sp,#0x18
000014  a114              ADR      r1,|L1.104|
000016  f7fffffe          BL       OSEventNameSet
;;;142    #endif
;;;143    #endif
;;;144    
;;;145    #if (OS_TASK_CREATE_EXT_EN > 0)
;;;146        #if (OS_STK_GROWTH == 1)
;;;147        err = OSTaskCreateExt( ProbeRS232_OS_Task,
00001a  2303              MOVS     r3,#3
00001c  2200              MOVS     r2,#0
00001e  e9cd2303          STRD     r2,r3,[sp,#0xc]
000022  4815              LDR      r0,|L1.120|
000024  f44f7180          MOV      r1,#0x100
000028  9102              STR      r1,[sp,#8]
00002a  9001              STR      r0,[sp,#4]
00002c  2308              MOVS     r3,#8
00002e  f500727f          ADD      r2,r0,#0x3fc
000032  2100              MOVS     r1,#0
000034  4811              LDR      r0,|L1.124|
000036  9300              STR      r3,[sp,#0]
000038  f7fffffe          BL       OSTaskCreateExt
00003c  9006              STR      r0,[sp,#0x18]
;;;148                               (void *)0,
;;;149                              &ProbeRS232_OS_TaskStk[PROBE_RS232_TASK_STK_SIZE - 1],    /* Set Top-Of-Stack.                    */
;;;150                               PROBE_RS232_TASK_PRIO,
;;;151                               PROBE_RS232_TASK_PRIO,
;;;152                              &ProbeRS232_OS_TaskStk[0],                                /* Set Bottom-Of-Stack.                 */
;;;153                               PROBE_RS232_TASK_STK_SIZE,
;;;154                               (void *)0,                                               /* No TCB extension.                    */
;;;155                               OS_TASK_OPT_STK_CHK | OS_TASK_OPT_STK_CLR);              /* Enable stack checking + clear stack. */
;;;156        #else
;;;157        err = OSTaskCreateExt( ProbeRS232_OS_Task,
;;;158                               (void *)0,
;;;159                              &ProbeRS232_OS_TaskStk[0],                                /* Set Top-Of-Stack.                    */
;;;160                               PROBE_RS232_TASK_PRIO,
;;;161                               PROBE_RS232_TASK_PRIO,
;;;162                              &ProbeRS232_OS_TaskStk[PROBE_RS232_TASK_STK_SIZE - 1],    /* Set Bottom-Of-Stack.                 */
;;;163                               PROBE_RS232_TASK_STK_SIZE,
;;;164                               (void *)0,                                               /* No TCB extension.                    */
;;;165                               OS_TASK_OPT_STK_CHK | OS_TASK_OPT_STK_CLR);              /* Enable stack checking + clear stack. */
;;;166        #endif
;;;167    #else
;;;168        #if (OS_STK_GROWTH == 1)
;;;169        err = OSTaskCreate( ProbeRS232_OS_Task,
;;;170                            (void *)0,
;;;171                           &ProbeRS232_OS_TaskStk[PROBE_RS232_TASK_STK_SIZE - 1],
;;;172                            PROBE_RS232_TASK_PRIO);
;;;173        #else
;;;174        err = OSTaskCreate( ProbeRS232_OS_Task,
;;;175                            (void *)0,
;;;176                           &ProbeRS232_OS_TaskStk[0],
;;;177                            PROBE_RS232_TASK_PRIO);
;;;178        #endif
;;;179    #endif
;;;180    
;;;181    #if   (OS_TASK_NAME_SIZE > 13)
;;;182        OSTaskNameSet(PROBE_RS232_TASK_PRIO, (CPU_INT08U *)"Probe RS-232", &err);
00003e  aa06              ADD      r2,sp,#0x18
000040  a109              ADR      r1,|L1.104|
000042  2008              MOVS     r0,#8
000044  f7fffffe          BL       OSTaskNameSet
;;;183    #endif
;;;184    }
000048  b007              ADD      sp,sp,#0x1c
00004a  bd00              POP      {pc}
;;;185    #endif
                          ENDP

                  ProbeRS232_OS_Pend PROC
;;;204    #if (PROBE_RS232_PARSE_TASK == DEF_ENABLED)
;;;205    void  ProbeRS232_OS_Pend (void)
00004c  b508              PUSH     {r3,lr}
;;;206    {
;;;207    #if (OS_SEM_EN > 0)
;;;208        CPU_INT08U  err;
;;;209    
;;;210    
;;;211        OSSemPend(ProbeRS232_OS_Sem, 0, &err);                          /* Wait for a packet to be received                     */
00004e  4805              LDR      r0,|L1.100|
000050  466a              MOV      r2,sp
000052  2100              MOVS     r1,#0
000054  6800              LDR      r0,[r0,#0]  ; ProbeRS232_OS_Sem
000056  f7fffffe          BL       OSSemPend
;;;212    #endif
;;;213    }
00005a  bd08              POP      {r3,pc}
;;;214    #endif
                          ENDP

                  ProbeRS232_OS_Post PROC
;;;233    #if (PROBE_RS232_PARSE_TASK == DEF_ENABLED)
;;;234    void  ProbeRS232_OS_Post (void)
00005c  4801              LDR      r0,|L1.100|
;;;235    {
;;;236    #if (OS_SEM_EN > 0)
;;;237        OSSemPost(ProbeRS232_OS_Sem);                                   /* A packet has been received                           */
00005e  6800              LDR      r0,[r0,#0]  ; ProbeRS232_OS_Sem
000060  f7ffbffe          B.W      OSSemPost
;;;238    #endif
;;;239    }
;;;240    #endif
                          ENDP

                  |L1.100|
                          DCD      ||.data||
                  |L1.104|
000068  50726f62          DCB      "Probe RS-232",0
00006c  65205253
000070  2d323332
000074  00      
000075  00                DCB      0
000076  00                DCB      0
000077  00                DCB      0
                  |L1.120|
                          DCD      ||.bss||
                  |L1.124|
                          DCD      ProbeRS232_OS_Task

                          AREA ||.bss||, DATA, NOINIT, ALIGN=6

                  ProbeRS232_OS_TaskStk
                          %        1024

                          AREA ||.data||, DATA, ALIGN=2

                  ProbeRS232_OS_Sem
                          DCD      0x00000000
